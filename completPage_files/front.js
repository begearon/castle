function getInputValue(a){return a.attr("placeholder")&&a.val()==a.attr("placeholder")?"":a.val()}function convertStrDateToObjDate(a,b){var a=a||"",b=b||sDateFormatDefault;if(""==a)return null;var c=b.replace("dd","d").replace("mm","m").replace("yy","y"),d={d:c.indexOf("d")/2,m:c.indexOf("m")/2,y:c.indexOf("y")/2,sep1:c.charAt(1),sep2:c.charAt(3)},e=a.split(d.sep1),f=[],g={d:0,m:0,y:0};return 3==e.length?f=e:(f[0]=e[0],f[1]=e[1].split(sep2)[0],f[2]=e[1].split(sep2)[1]),g.d=parseInt(f[d.d],10),g.m=parseInt(f[d.m],10)-1,g.y=parseInt(f[d.y],10),new Date(g.y,g.m,g.d)}function convertObjDateToStrDate(a,b){var a=a||null,b=b||sDateFormatDefault,c=[0,0,0],d="";if(null==a)return d;var e=a.getDate(),f=a.getMonth()+1,g=a.getFullYear(),h=b.replace("dd","d").replace("mm","m").replace("yy","y"),i={d:h.indexOf("d")/2,m:h.indexOf("m")/2,y:h.indexOf("y")/2,sep1:h.charAt(1),sep2:h.charAt(3)};return-1!=b.indexOf("dd")&&(e=e<10?"0"+e:e),-1!=b.indexOf("mm")&&(f=f<10?"0"+f:f),c[i.d]=e,c[i.m]=f,c[i.y]=g,d=c[0]+i.sep1+c[1]+i.sep2+c[2]}function daysInMonth(a,b){return new Date(b,a,0).getDate()}function numToStrLess10(a){return(a<10?"0":"")+a}function doSelectedActionFunctionName(a){}function polyfillPlaceholder(){var a=document.activeElement;$("body").on("focus","[placeholder]",function(){""!==$(this).attr("placeholder")&&$(this).val()===$(this).attr("placeholder")&&$(this).val("").removeClass("placeholder")}),$("body").on("blur","[placeholder]",function(){""===$(this).attr("placeholder")||""!==$(this).val()&&$(this).val()!=$(this).attr("placeholder")||$(this).val($(this).attr("placeholder")).addClass("placeholder")}),$("[placeholder]").blur(),$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")})}),$(a).focus()}function getUserAgentElementName(a){return{transEndEventName:{transEndEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}}.transEndEventNames[Modernizr.prefixed("transition")]}[a]}function manageAddToCart(){$("body").on("click",".rc-GiftCard-buy-btn",function(){var a=$(this).data("product-id");$("#gift-a2c-product").val(a)}),$("body").on("submit",".js-rc-AddToCart-form",function(a){a.preventDefault();var b=$("#gift-a2c-product").val();if("undefined"!=typeof __PRODUCTS__){var c=__PRODUCTS__.items.filter(function(a){return a.code===b})[0];return AddToCart.addToCartPopin(c,{list:"landing"})}AddToCart.addToCartPopin()}),$(document).bind("cbox_complete",function(){if($("#colorbox").find("#rc-AddToCart-popin").length){var a=".js-gift-a2c-country",b=$("#gift-a2c-product").val();if("undefined"!=typeof __PRODUCTS__){var c=__PRODUCTS__.items.filter(function(a){return a.code===b})[0],d=AddToCart.setProductPopinDropdownForTWIG(c,a);const e=$(a).find("option")[0],f=parseInt(e.getAttribute("data-id"));AddToCart.setProductPopinRadioButtonsForTWIG(d,f),$(a).on("change",function(a){const b=a.target.options[a.target.selectedIndex],c=parseInt(b.getAttribute("data-id"));AddToCart.setProductPopinRadioButtonsForTWIG(d,c)}),$(".formField-submit").removeClass("loadingLayer")}}})}function appNav(){function a(){var a,b,c,d,e=document.querySelector(".menuExpanded .nav-menu"),f=e.getBoundingClientRect().width,g=document.querySelector("#nav"),h=g.getBoundingClientRect().width,i=(g.querySelectorAll(".subMenu"),0),j=null;e.addEventListener("touchstart",function(c){j=c.changedTouches[0],a=parseInt(e.style.left)||0,b=parseInt(j.clientX),"true"===$("body").attr("data-menuExpanded")&&$("body").addClass("nav-isGrabbed")},!1),e.addEventListener("touchmove",function(g){j=g.changedTouches[0],i=parseInt(j.clientX)-b,c=parseInt(h-f),d=a+i>0?0:a+i<c?c:a+i,e.style.position="relative",e.style.left=d+"px",g.preventDefault()},!1)}bIsPhone||$("#nav").accessibleMegaMenu({menuClass:"nav-menu",topNavItemClass:"firstLevel",panelClass:"subMenu",panelGroupClass:"subMenu-group"});var b=$(".navTrigger"),c=$(".header"),d=$("body"),e=$(".rc-GiftBanner-breadcrumbs"),f=$(".layerNav"),g=c.find(".firstLevel"),h=$(".navContainer"),i=$(".navContainerInner"),j=$(".navContainer .subMenu"),k=$(".hotelHeader .priceTag.sticked"),l=$(".displayMsg "),m=function(){if("false"===$("body").attr("data-menuExpanded")){var a={};if(a.iWindowHeight=$(window).height(),a.iWindowScrollTop=$(window).scrollTop(),a.iDeltaTop=60,a.iDeltaBottom=bIsPhone?0:38,a.iDeltaHeight=a.iDeltaTop+a.iDeltaBottom,a.iWindowScrollBottom=a.iWindowScrollTop+a.iWindowHeight-a.iDeltaBottom,a.iMaxHeight=a.iWindowHeight-a.iDeltaHeight,j.css({"max-height":a.iMaxHeight-(bIsPhone?44:0)}),d.hasClass("cnil-isvisible")&&l.length){var b=l.height(),c=l.find(".row").height();c>b&&i.css({"max-height":window.innerHeight-c-70+"px"})}else i.css({"max-height":a.iMaxHeight});j.each(function(){var b=$(this),c=b.closest(".firstLevel").outerHeight();b.outerHeight(),b.css({"margin-top":-c}),setTimeout(function(){var d=b.offset().top+b.height(),e=Math.round(a.iWindowScrollBottom-d);e<0&&b.css({"margin-top":e-c-2})},0)})}};if(b.on("click",function(){d.toggleClass("nav-is-opened"),f.toggleClass("active"),d.hasClass("nav-is-opened")||h.find(".active").removeClass("active"),bIsPhone&&(h.find(".open").removeClass("open"),h.find("li.is-hidden, .menuToolbar.is-hidden").removeClass("is-hidden")),m()}),f.on("click",function(){b.trigger("click")}),$("body").on("click",".ftrackView",function(){c.addClass("fastTrack-is-open"),e.addClass("is-hidden"),k.length&&k.removeClass("sticked")}),$("body").on("click",".ftrackHide","button",function(a){a.preventDefault(),c.removeClass("fastTrack-is-open"),e.removeClass("is-hidden"),d.removeClass("antiScroll-on"),k.length&&k.addClass("sticked")}),bIsPhone&&($("body").on("focus",".ftrackSearch input",function(){c.addClass("fastTrack-is-focus"),setTimeout(function(){$(window).scrollTop(0)},500)}),$("body").on("blur",".ftrackSearch input",function(){c.removeClass("fastTrack-is-focus")}),bOnlyInte&&($("body").on("keyup",".ftrackSearch input",function(){$(this).parent(".ftrackSearch").addClass("is-opened")}),$("body").on("blur",".ftrackSearch input",function(){$(this).parent(".ftrackSearch").removeClass("is-opened")})),g.each(function(){$(this).children("a").on("click",function(){var a=$(this),b=a.next(".subMenu"),c=a.parent(".firstLevel"),d=a.closest(".navContainer").find(".menuToolbar"),e=c.siblings("li");a.toggleClass("open"),b.toggleClass("open"),e.toggleClass("is-hidden"),d.toggleClass("is-hidden")})})),"true"===$("body").attr("data-menuexpanded")&&$(window).width()<900){var n=0;$("#nav").find(".nav-menu > li:visible").not(".tmpHidden, .navLanguage, .navCurrency").map(function(){n+=$(this).outerWidth(!0)}),$("#nav").find(".nav-menu").css("width",n+15),a()}$(window).on("resize",function(){m()})}function initBlanpain(){$(".montre-blancpain").length&&(startClock($("#heure-container"),blancpainH,$("#minute-container"),blancpainM,$("#seconde-container"),blancpainS),dayClock($("#jour-container"),blancpainDay),digitalClock($("#digital"),"FR"))}function startClock(a,b,c,d,e,f){var g=30*b+.5*d+360/43200*f,h=6*d+360/43200*f,i=6*f;navigateur&&(a&&(a[0].style[navigateur+"Transform"]="rotate("+g+"deg)"),c&&(c[0].style[navigateur+"Transform"]="rotate("+h+"deg)"),e&&(e[0].style[navigateur+"Transform"]="rotate("+i+"deg)"))}function dayClock(a,b){if(a){var c=c?c/31:360/31;a[0].style[navigateur+"Transform"]="rotate("+c*b+"deg)";var d=blancpainTZ;setTimeout(function(){updateDate(b,d,a)},1e3*(86400-(60*blancpainH*60+60*blancpainM+blancpainS)))}}function updateDate(a,b,c){var d=a,e=b,f=c;setTimeout(function(){updateDate(d,e,f)},864e5)}function digitalClock(a,b){if(a){var c=blancpainTZ,d=b;setTimeout(function(){updateDigital(c,a,d)},1e3*(60-blancpainS))}}function updateDigital(a,b,c){var d,e,f=parseInt($("#digital_minute").html(),10),g=parseInt($("#digital_hour").html(),10);"en_US"==blancpainLocale?(d=12,e=1):(d=23,e=0),59==f?(f=0,g==d?g=e:g++):f++,1==f.toString().length&&(f="0"+f.toString()),1==g.toString().length&&(g="0"+g.toString()),$("#digital_minute").html(f),$("#digital_hour").html(g);var h=a,i=b,j=c;setTimeout(function(){updateDigital(h,i,j)},6e4)}function meteoDislplay(){if($(".meteoDisplay").not(".js-done").length){var a=$(".meteoDisplay").not(".js-done"),b=a.find(".unit span"),c=a.find(".temp span");b.on("click",function(){$(this).toggleClass("active"),$(this).siblings().toggleClass("active"),c.toggleClass("hide")}),a.addClass("js-done")}}function manageGiftCartCoupon(){var a=$(".shippingMain"),b=a.find(".addCoupon"),c=b.find(".js-couponCart"),d=a.find(".cartCoupon__code"),e=a.find(".cartCoupon__name"),f=$(".basketAsideSummary"),g='<div class="formError">'+Translator.trans("rc.gifts.order.error.shipping_choice")+"<br></div>",h=$("div.shipping-form-radio").closest("div.formError-wrapper"),i=b.data("action");void 0!==b&&0!==b.length&&b.find(".addCouponSubmit").on("click",function(){1===$('input[name="rc_gifts_shipping[pick]"]:checked').length?(f.addClass("loadingLayer"),addCouponCart(i,c.val()).done(function(b){if(!1!==b){a.find(".cartCouponError").hide(),updateMiniBasket(b.items),updateAsideTotalPrice(b.items,b.totals);for(var f=0;f<b.items.length;++f)updateAsidePackPrice(b.items[f].id,b.items[f]);for(var g in b.cartDiscounts)d.html(g),e.html(b.cartDiscounts[g].description),a.find(".cartCoupon").show();changeDeliveryAside($("#shipping-form").find('[name="rc_gifts_shipping[pick]"]:checked'))}else a.find(".cartCouponError").show(),a.find(".cartCouponCode").html(c.val())}).always(function(){f.removeClass("loadingLayer")})):h.hasClass("has-error")||h.addClass("has-error").append(g)})}function manageDeliveryInformations(){var a=$(".shippingMain"),b=a.find("form#shipping-form"),c=b.data("action"),d=$(".basketAsideSummary"),e=$("div.shipping-form-radio").closest("div.formError-wrapper");a.find("div.shipping-form-radio").find("input").on("click",function(){d.addClass("loadingLayer"),addDelivery(c,$(this).val()).done(function(){e.removeClass("has-error"),e.find(".formError").hide()}).always(function(){changeDeliveryAside($("#shipping-form").find('[name="rc_gifts_shipping[pick]"]:checked'))})})}function manageGiftPackQuantity(a){var b,c=a.find(".js-itemGiftPack-form"),d=c.find(".js-itemGiftPack-qty"),e=c.find("button"),f=a.find(".js-pack-price"),g=a.find(".js-pack-price-old"),h=c.attr("action"),i=parseInt(a.data("product-id"));c.find("button").on("click",function(){var a=$(this),e=parseInt(d.val());d.val()>1&&a.hasClass("js-itemGiftPack-qty--less")&&(b=e-1),a.hasClass("js-itemGiftPack-qty--more")&&(b=parseInt(d.val())+1),d.val(b),c.submit()}),c.on("submit",function(b){b.preventDefault(),d.attr("max")?d.val()>=1&&d.val()<=parseInt(d.attr("max"))?(e.addClass("itemGiftPack-qty--loading").prop("disabled",!0),a.addClass("itemGiftPack--updatingPrice"),updateCartProductQuantity(h,d.val()).done(function(){fetchUpdatedCart().done(function(b){var c=b.items.find(function(a){return a.id===i});if(c.product.variants[0]&&c.product.variants[0].price.current*c.quantity!=c.total){var d=c.product.variants[0].price.current*c.quantity;g.html(getConvertedPrice(d/100))}f.html(getConvertedPrice(c.total/100)),e.removeClass("itemGiftPack-qty--loading").removeAttr("disabled"),a.removeClass("itemGiftPack--updatingPrice"),updateMiniBasket(b.items),updateAsidePackPrice(i,c),updateAsideTotalPrice(b.items,b.totals)})})):(d.val(1),updateCartProductQuantity(h,1).done(function(){fetchUpdatedCart().done(function(b){var c=b.items.find(function(a){return a.id===i});if(c.product.variants[0]&&c.product.variants[0].price.current*c.quantity!=c.total){var d=c.product.variants[0].price.current*c.quantity;g.html(getConvertedPrice(d/100))}f.html(getConvertedPrice(c.total/100)),e.removeClass("itemGiftPack-qty--loading").removeAttr("disabled"),a.removeClass("itemGiftPack--updatingPrice"),updateMiniBasket(b.items),updateAsidePackPrice(i,c),updateAsideTotalPrice(b.items,b.totals)})})):d.val()>=1?(e.addClass("itemGiftPack-qty--loading").prop("disabled",!0),a.addClass("itemGiftPack--updatingPrice"),updateCartProductQuantity(h,d.val()).done(function(){fetchUpdatedCart().done(function(b){var c=b.items.find(function(a){return a.id===i});if(c.product.variants[0]&&c.product.variants[0].price.current*c.quantity!=c.total){var d=c.product.variants[0].price.current*c.quantity;g.html(getConvertedPrice(d/100))}f.html(getConvertedPrice(c.total/100)),e.removeClass("itemGiftPack-qty--loading").removeAttr("disabled"),a.removeClass("itemGiftPack--updatingPrice"),updateMiniBasket(b.items),updateAsidePackPrice(i,c),updateAsideTotalPrice(b.items,b.totals)})})):d.val(1)})}function manageRemoveGiftFromCart(a){var b=parseInt(a.data("product-id")),c=a.data("product");a.find(".js-itemGiftPack-removeLink").on("click",function(d){d.preventDefault();var e=$(this).attr("href"),f=$(this).data("code");void 0!==c&&c!=={}&&"undefined"!=typeof dataLayer&&"check-box"!==f&&dataLayer.push({event:"removeFromCart",currencyCode:"EUR",ecommerce:{remove:{actionField:{list:"Panier"},products:[{name:c.name,id:c.id,price:c.price,brand:"gift",category:c.category,quantity:c.quantity,id_galitt:c.galitt,product_lang:c.lang}]}}}),a.addClass("itemGiftPack--removingPack"),removeItemFromCart(e).done(function(){if("check-box"===f)return location.reload();fetchUpdatedCart().done(function(c){0===c.items.length&&hideIfEmptyCart(),a.slideUp(400,function(){$(this).remove()}),updateMiniBasket(c.items),updateAsidePacksOnRemove(b),updateAsideTotalPrice(c.items,c.totals)})})})}function fetchUpdatedCart(){var a=$("#pack").data("cart-url");return $.ajax({url:a,method:"get"})}function updateCartProductQuantity(a,b){return $.ajax({url:a+"/"+b,method:"get"})}function updateAsidePackPrice(a,b){var c=$('.js-basketAsideSummary-giftItem[data-product-id="'+a+'"]'),d=c.find(".js-item-price"),e=c.find(".js-total-price");if(b.product.variants[0]&&b.product.variants[0].price.current*b.quantity!=b.total){var f=b.product.variants[0].price.current*b.quantity;d.html('<span class="box_old_price">'+getConvertedPrice(f/100/b.quantity)+"</span> "+getConvertedPrice(b.total/100/b.quantity)),d.find(".box_old_price").show(),e.html('<span class="box_old_price">'+getConvertedPrice(f/100)+"</span> "+getConvertedPrice(b.total/100))}else d.html(getConvertedPrice(b.total/100/b.quantity)),e.html(getConvertedPrice(b.product.variants[0].price.current*b.quantity/100))}function updateAsideTotalPrice(a,b){for(var c=0,d=$("#basket_aside_nb_gift_label_plural"),e=$("#basket_aside_nb_gift_label_singular"),f=b.total-b.promotion,g=0;g<a.length;++g)c+=a[g].quantity;$(".js-basketAsideSummary-total").html(getConvertedPrice(b.total/100)),$(".cartCoupon").length&&f!=b.total&&$(".box_old_price").show(),1===c?(e.show(),d.hide()):(d.show(),e.hide()),$("#basket_aside_nb_gift").html(c)}function removeItemFromCart(a){return $.ajax({url:a,method:"get"})}function addCouponCart(a,b){return $.ajax({url:a+"/"+b,method:"get"})}function addDelivery(a,b){return $.ajax({url:a,method:"post",data:{shipping:b}})}function updateAsidePacksOnRemove(a){$('.js-basketAsideSummary-giftItem[data-product-id="'+a+'"]').slideUp(400,function(){$(this).remove()})}function updateMiniBasket(a){var b=$("#basket-count");if(b.length){for(var c=0,d=parseInt(b.data("basket-count")),e=0;e<a.length;++e)c+=a[e].quantity;b.html(d+c)}}function hideIfEmptyCart(){$(".basketBlockGift").fadeOut(400,function(){$(".basketBlockReservation").show(),$(".basketBlockReservation .alert-hosp").hide(),$(".basketBlockReservation .alert-gifts").show(),$(this).remove()})}function displayCheckoutFormErrors(){$("form[data-display-errors]").each(function(){var a=$(this),b=a.find(".formError");b.length&&b.each(function(){var a=$(this),b=a.parent(".formError-wrapper");b.addClass("has-error"),b.find('[name="rc_gifts_shipping[pick]"]:checked').prop("checked",!1)})})}function changeDeliveryAside(a){var b=a.val(),c=$(".basketAsideSummary"),d=c.find(".shipping-container");d.show(),c.find(".shipping-price-detail").hide(),fetchUpdatedCart().done(function(a){c.find(".shipping-price-detail__"+b).show(),"shop"!==b&&a.totals.shipping<=0&&a.cartDiscounts.length>0&&(c.find(".shipping-price-detail__"+b).hide(),0===d.find(".js-shipping-price").find(".free-delivery").length&&d.find(".js-shipping-price").append("<span class='free-delivery shipping-price-detail'>"+Translator.trans("rc.gifts.order.delivery.free")+"</span>"),d.find(".js-shipping-price").find(".free-delivery").show())}).always(function(){c.removeClass("loadingLayer")})}function getItemPerLine(){var a=$(document).width(),b=5;return a<1240&&(b=4,a<1024&&(b=3)),b}function chefFn(){if($(".chefHomeResults").length){var a=3,b=2,c=0,d=!1,e=0,f=$(".chefResultsItem").length,g=parseInt($(".infiniteLoader").data("nb-items-total"),10),h=getItemPerLine(),i=f-h*b,j=$(".chefHomeResults").find(".chefResultsItem");j.slice(j.length-i).remove(),f=$(".chefResultsItem").length,$(".infiniteLoader .btn").on("click",function(){h=getItemPerLine(),(e=h-f%h)==h&&(e=0),$.ajax({url:$(".infiniteLoader").data("path"),method:"POST",data:{nbItemsToDisplay:h*b+e,start:f}}).done(function(b){$(".chefHomeResults").append(b),c++,c>=a&&$(".infiniteLoader .btn").removeClass("loadingLayer"),f=$(".chefResultsItem").length,f>=g&&$(".infiniteLoader").remove(),$(".linkParent").length>0&&$(".linkParent").addLinkBlock()}).fail(function(){console.log("ajax load chefs error")}).always(function(){d=!1})}),$(window).on("scroll",function(){$(".infiniteLoader").length&&$(window).scrollTop()>=$(".infiniteLoader").offset().top-$(window).height()+$(".footerSticky").height()&&c<a&&!1===d&&(d=!0,$(".infiniteLoader .btn").trigger("click"))})}}function refreshNbNights(a){var b=a,c=convertStrDateToObjDate(getInputValue(b.find(".startDate"))),d=convertStrDateToObjDate(getInputValue(b.find(".endDate"))),e=b.closest(".dateField").next(".yourStay");b.data({iNbNights:0}),d>c&&b.data({iNbNights:dateDiff(c,d)}),b.closest(".dateField").next(".yourStay").length&&(e.find(".nbNights").html(b.data("iNbNights")),b.data("iNbNights")<=1?e.addClass("single").removeClass("plural"):e.addClass("plural").removeClass("single"))}function dateDiff(a,b){var c=Math.abs(b.getTime()-a.getTime());return c+=216e5,console.log("timeDiff: ",c),Math.floor(c/864e5)}function hideStartEndDatepicker(a){a.removeClass("start end"),a.find("input.suggested, span.suggested").removeClass("suggested")}function showHideStartEndDatepicker(a,b){var c=a.closest(".startEndDate"),d=c.find(".startEndDatepicker"),e=c.data("state")||"closed",b=(c.data("bDateSelected"),c.data("bInline")&&"closed"==b&&"closed"!=e?"start"==e?"end":"start":b),f=b;if("closed"!=b){var g="start"==b?"end":"start";if((c.hasClass("start")||c.hasClass("end"))&&(c.addClass("marginTransition"),setTimeout(function(){c.removeClass("marginTransition")},500)),c.hasClass("start")&&"start"==b&&!c.data("bInline")||c.hasClass("end")&&"end"==b&&!c.data("bInline"))f="closed";else{if(!1===c.data("bDateSelected")&&"closed"!=e){var h=c.find("input."+e+"Date");h.hasClass("suggested")&&h.removeClass("suggested").siblings("span.suggested").removeClass("suggested")}d.datepicker("option","minDate",d.data("oMinMaxStartEnd")[b].min),d.datepicker("option","maxDate",d.data("oMinMaxStartEnd")[b].max);var i=c.find("input."+b+"Date"),j=convertStrDateToObjDate(getInputValue(i));if(d.datepicker("setDate",j),updateCellAvailability(d),null!=j){var k=c.find("input."+g+"Date"),l=convertStrDateToObjDate(getInputValue(k));if(null!=l){var m=l.getMonth(),n=j.getMonth(),o="end"==b?m:n,p="end"==b?n:m;!bIsPhone&&(p>o&&"end"==b||p>=o&&"end"==b&&"start"==e&&!0===c.data("bDateSelected"))&&setTimeout(function(){d.find(".ui-datepicker-prev:not(.ui-state-disabled)").trigger("click")},1)}}var q=a.offset().top-c.offset().top+a.outerHeight();c.find(".startEndDatepickerWrapper").css({marginTop:q})}c.removeClass(g),c.data("bInline")?(c.find("input."+b+"Date").trigger("focus"),c.addClass(b)):c.toggleClass(b)}"closed"==f&&(checkDateAvailability(c,"close"),hideStartEndDatepicker(c)),c.data({state:f,previousState:e,bDateSelected:!1})}function checkForEmptyFields(){var a=$(".propertyBookingAside").find(".startDateField"),b=$(".area-specialOffers").find("select").eq(0);a.find("input.startDate").on("change",function(){var a=$.trim($(this).val()),c=b.find("option:selected").index();a.length>0&&0!==c?enableAditionalFilters():disableAditionalFilters()}),b.on("change",function(){var b=$.trim(a.find("input.startDate").val()),c=$(this).find("option:selected").index();b.length>0&&0!==c?enableAditionalFilters():disableAditionalFilters()})}function disableAditionalFilters(){$(".filters-specialOffers , .range-specialOffers").addClass("is-disabled")}function enableAditionalFilters(){$(".filters-specialOffers , .range-specialOffers").removeClass("is-disabled")}function fixPositionDpOniPad(){if($(".ipad").length&&$(".startDateField").length){var a=$(".startDateField").offset().left;$(".startEndDatepickerWrapper").css({left:-a})}}function appFooter(){function a(){if($(".footerSticky.fixed").length){var a=$("body"),b=$(".footerSticky"),c=b.outerHeight();a.css("padding-bottom",c)}}$("body").on("click",".footerDockToolTip button",function(){$(this).parent().removeClass("is-opened")}),bOnlyInte&&$("body").on("click",".btnBasketHeader, .footerStickyNav > div + .btn",function(a){a.preventDefault(),a.stopPropagation(),$(".footerDockToolTip").addClass("is-opened")}),$("body").on("click",".footerStickyNav [data-tab]",function(){var b=$(this).data("tab"),c=$(this).closest("li"),d=$(".footerStickyNav li.tab-active"),e=$("."+b),f=$(".tabFooter"),g=$(".footerStickyContent"),h=e.innerHeight(),i=f.filter(".is-opened").innerHeight();"tabFooterConcierge"==b&&(h=295),g.hasClass("is-opened")?e.hasClass("is-opened")?e.slideUp(function(){a(),g.removeClass("is-opened"),d.removeClass("tab-active")}).removeClass("is-opened"):(f.hide().removeClass("is-opened"),e.show().addClass("is-opened"),g.height(i).animate({height:h},400,function(){$(this).height("auto")}),d.removeClass("tab-active"),c.addClass("tab-active"),a()):e.slideDown(function(){a(),g.addClass("is-opened"),d.removeClass("tab-active"),c.addClass("tab-active")}).addClass("is-opened"),"tabFooterConcierge"==b&&f.hasClass("is-opened")?(setTimeout(function(){""!=$("#dblcm-block-chat").attr("style")&&"display: block;"!=$("#dblcm-block-chat").attr("style")||$("#dblcm-block-form").hide()},500),dblcmopen=!0,$("#dblcm-count").empty()):dblcmopen=!1}),$("body").on("click",".btnCloseFooterTabs",function(){var b=$(".footerStickyContent");$(this).closest(".tabFooter").slideUp(function(){a(),b.removeClass("is-opened"),$(".footerStickyNav li.tab-active").removeClass("tab-active")}).removeClass("is-opened"),dblcmopen=!1})}function loadGmapScript(a,b){sFunctionToLaunch=a&&"string"==typeof a?a:null,oParamsToLaunch=b||{},null!=google&&null!=google.maps?null!=sFunctionToLaunch&&window[sFunctionToLaunch](oParamsToLaunch):loadGmapApi()}function loadGmapApi(){var a=document.createElement("script");a.type="text/javascript",a.src="//maps.googleapis.com/maps/api/js?key="+settingsGlobal.sGoogleApiKey+"&language="+(settingsLocalization.sLanguage||"fr")+"&libraries=places,geometry&sensor=true&callback=loadPluginsGmap",document.body.appendChild(a)}function loadPluginsGmap(){var a=document.createElement("script");a.type="text/javascript",a.src=settingsGlobal.pluginGmapUrl,document.body.appendChild(a),$(document).trigger("googleLoaded")}function initializeAllGmap(){bPluginsGmapLoaded=!0,oGmapOptionsDefault.common={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,styles:[{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2e5d4"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:20}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{color:"#acbcc9"}]}]},oInfoBoxOptions.common={disableAutoPan:!1,alignBottom:!0,maxWidth:0,maxHeight:"400px",closeBoxMargin:"0",closeBoxURL:settingsGlobal.sRootPath+"images/common/gmap/btn_close.png",isHidden:!1,pane:"floatPane",enableEventPropagation:!1,boxClass:"infoBox grey",infoBoxClearance:new google.maps.Size(55,35),pixelOffset:new google.maps.Size(-105,-10)},oInfoBoxOptions.default={boxClass:"infoBox"},oInfoBoxOptions.poi={boxClass:"infoBox poi"},oInfoBoxOptions.rdb={boxClass:"infoBox rdb"};var a={coord:[12,0,30,0,42,12,42,30,22,50,20,50,0,30,0,12,12,0],type:"poly"},b={coord:[6,0,24,0,30,6,30,24,24,30,6,30,0,24,0,6,6,0],type:"poly"},c={coord:[12,0,30,0,42,12,42,30,30,50,30,55,12,55,12,50,0,30,0,12,12,0],type:"poly"};aMarkerType=["default","hotel","restaurant","villa","favourite","visited","wine","food","cultural","etablissement","rdb","stopover","store"],aPoiType=["wine","food","cultural","etablissement"],aForbidenClusterType=aPoiType.concat(["stopover"]),aInfoBoxType=["default","poi","rdb"],$.each(aMarkerType,function(d,e){oMarkersType.anchor[e]="stopover"==e?new google.maps.Point(15,15):new google.maps.Point(21,47),oMarkersType.shapes[e]=-1!=$.inArray(e,aPoiType)?c:"stopover"==e?b:a,oMarkersType.images[e]=settingsGlobal.sRootPath+settingsGlobal.sMarkerPath+e+".png"}),null!=sFunctionToLaunch&&window[sFunctionToLaunch](oParamsToLaunch),google.maps.event.addDomListener(window,"resize",function(){$.each(oInitGmaps,function(a,b){b.resizeGmap()})})}function getGoodMarkerType(a){return a.type&&-1!=$.inArray(a.type,aMarkerType)?a.type:a.entities[0].type&&-1!=$.inArray(a.entities[0].type,aMarkerType)?a.entities[0].type:"default"}function infoBoxOpen(a,b,c){var d=b.sMapId,e=$("#"+d),f=function(a,b){var c=oInitGmaps[a],d=c.$map,e=d.siblings(".edge.top").height()-20,f=$(b.div_),g=Math.floor(d.offset().top+e-f.offset().top);g>0&&c.map.panBy(0,-g)};a.domreadyListener&&google.maps.event.removeListener(a.domreadyListener),a.open(b,c);var g=$(".map").closest(".mapWrapper"),h=g.find(".edge.right");h=h.outerWidth()/2,b.setCenter(c.getPosition()),b.panBy(h,-24),a.domreadyListener=google.maps.event.addListener(a,"domready",function(){var a=this;setTimeout(function(){f(d,a)},100);var b=e.find(".infoBox .tabSwitcher").not(".js-done");b.length&&(b.addClass("js-done").manageTabSwitcher(),b.find(".tabNav").data({sMapId:d,oIb:a}).on("click",function(){f($(this).data("sMapId"),$(this).data("oIb"))}))})}function preventScrollOnMap(a){if($.browser.mozilla){var b,c=document.documentElement||document.body;a.getDiv().addEventListener("DOMMouseScroll",function(a){a.axis===a.VERTICAL_AXIS&&(b=c.scrollTop,setTimeout(function(){c.scrollTop=b}))},!0)}}function mapPanelToggler(a){var b=$(a).find(".js-mapFull"),c=$(a).find(".overmapContent, .overmapFooter"),d=!1;$(document).ready(function(){setTimeout(function(){b.addClass("is-tooltipHidden")},2500)}),b.on("click",function(){!1===d?(c.attr("data-toggled","out"),d=!0):(c.attr("data-toggled","in"),d=!1)})}function hotelFn(){$("body").on("click",".propertyBookingNav a",function(a){if(a.preventDefault(),$(this).is("#buyGiftBtn")?history.pushState({tab:"gift"},"",$(this).attr("href")):history.replaceState("","",window.location.href.split("#")[0]),!$(this).closest("li").hasClass("active")){$(".propertyBookingNav li").removeClass("active"),$(this).closest("li").addClass("active");var b=$(this).attr("href").slice(1);$(".propertyBookingTab").addClass("is-hidden"),$("."+b).removeClass("is-hidden"),$("."+b).find(".defaultSlider").slick("setPosition")}var c=setInterval(function(){var a=$("#propertyBookingTab");a.length&&($("html, body").animate({scrollTop:a.offset().top-120}),$(".js-triggerNavHotel").removeClass("loadingLayer"),clearInterval(c))},100)});var a=$(".propertyBookingNav").find("li");a.length>4&&a.addClass("is-bigRow"),$("body").on("click",".propertyListRoomsTools .viewBy span",function(a){if($(this).hasClass("active"))return!1;$(this).siblings("span").removeClass("active"),$(this).addClass("active");var b=$(this).data("view");$(".tabViewBy").addClass("is-hidden"),$('.tabViewBy[data-view="'+b+'"]').removeClass("is-hidden"),$('.tabViewBy[data-view="'+b+'"]').find(".defaultSlider").slick("setPosition")}),$("body").on("click",".propertyRoom .btnToggleRates",function(a){a.preventDefault(),$(this).closest(".propertyRoomCTA").toggleClass("is-opened"),$(this).closest(".propertyRoom").next(".propertyRoomRatesContent").slideToggle(function(){$(this).toggleClass("is-opened")})}),$("body").on("click",".propertyRate .btnToggleRooms",function(a){a.preventDefault(),$(this).closest(".propertyRatePrice").toggleClass("is-opened"),$(this).closest(".propertyRate").next(".propertyRateRoomsContent").slideToggle(function(){$(this).toggleClass("is-opened")}),$(this).closest(".propertyRate").next(".propertyRateRoomsContent").find(".defaultSlider").slick("setPosition")}),$(".propertyRoomFeatures").length&&$(".propertyRoomFeatures").each(function(){var a=$(this).css("height","auto").innerHeight();$(this).css("height",""),a<165?$(this).addClass("has-short-content"):$(this).removeClass("has-short-content")}),$("body").on("click",".propertyRoomFeatures .learnMore, .rc-popinQualitelis-reviewContentText .learnMore",function(){$(this).closest(".propertyRoomFeatures, .rc-popinQualitelis-reviewContentText").toggleClass("is-opened")})}function initAndAjax(){function a(){if(!b.hasClass("js-done"))try{b.addClass("js-done"),b.lbuiDirect({connectionid:"INTL-RELAISETCHATEAUX:19855",style:{baseColor:"B5985A"},language:"fr-FR",restaurantid:c.html(),gaAccountNumber:"UA-1240387-8",modalWindow:{enabled:!0}})}catch(a){}}var b=$("#tableBooking"),c=$("#liveBookingId");b.length&&c.length&&a();var d=$(".displayMsg ");if($("body").hasClass("cnil-isvisible")&&d.length){var e=d.height(),f=d.find(".row").height();f>e&&(d.height(f+10),$("header.header").css({top:f+10}),$('.is-phone .cnil-isvisible[data-menuExpanded="false"]').css({"padding-top":f+70}),$('.cnil-isvisible[data-menuExpanded="false"]').css({"padding-top":f+70}),$(".is-phone .cnil-isvisible .fastTrackHomeWrapper .ftrackView").css({top:f+10}),$(".navContainerInner").css({"max-height":window.innerHeight-f-60+"px"}))}if(slickDefault(),$("#giftGallery").length||slickGallery(),slickSlideTxt(),slickPushItem(),slickMultipleItem(),slickLP(),meteoDislplay(),$(".will-stick").not(".js-done").length&&1!=Modernizr.csssticky&&($sticky=$(".will-stick").not(".js-done"),$sticky.addClass("js-done fixedsticky-off").fixedsticky()),$(".will-stick").length&&1!=Modernizr.csssticky&&stickyResize(),reviewRating(),$(".has-price-detail").not(".js-done").addClass("js-done").on("click",".price-detail-trigger",function(){$(".has-price-detail").removeClass("is-opened"),$(this).closest(".has-price-detail").addClass("is-opened")}),$(".ftrackChoose-select, .ftrackRooms-select").not(".js-done").length)var g=$(".ftrackChoose-select, .ftrackRooms-select").not(".js-done").addClass("js-done").selectBoxIt({autoWidth:!1,showEffect:"fadeIn",showEffectSpeed:400,hideEffect:"fadeOut",hideEffectSpeed:400,copyClasses:"container"}).on("change",function(){g.data("selectBox-selectBoxIt").refresh()});$(".formField, .propertyBookingAside").not(".js-done").addClass("js-done").find("select").each(function(){$(this).selectBoxIt({similarSearch:!0,copyClasses:"container",dynamicPositioning:!1,showFirstOption:!$(this).hasClass("hasPlaceHolder")}).addClass("selectBoxIt-done").on("change",function(){}).prev("label").on("click",function(){$(this).nextAll(".selectboxit-container").first().find(".selectboxit-btn").focus()})}),Modernizr.input.placeholder||polyfillPlaceholder(),$(".addFavorite").not(".js-done").length&&addItemToFav(),$(".map").length&&loadGmapScript("initGmaps"),
$(".datepicker").not(".js-done").length&&$(".datepicker").not(".js-done").addClass("js-done").manageDatepicker(),$(".startEndDate").not(".js-done").length&&$(".startEndDate").not(".js-done").addClass("js-done").manageStartEndDatepicker(),$(".accordion").length&&initAccordion(),$(".popinMap, .overmapWrap").not(".js-done").length&&$(".popinMap, .overmapWrap").not(".js-done").find(".overmapContent").length&&$(".popinMap, .overmapWrap").not(".js-done").addClass("js-done").switchView(),bIsPhone&&$(".formMobileFilters").not(".js-done").length&&$(".formMobileFilters").not(".js-done").addClass("js-done").switchViewMobileFilter(),$(".formFilters").not(".js-done").length&&$(".formFilters").not(".js-done").addClass("js-done").manageFormFilters(),$(".tabSwitcher").not(".js-done").length&&$(".tabSwitcher").not(".js-done").addClass("js-done").manageTabSwitcher(),refreshAddons(),$("html").hasClass("lte-ie9")||videoPiksel()}function loadData(a,b,c,d,e,f,g){f=f||!1,g=g||!1,e=e||"GET";var h,i;h=$.isFunction(f)?f:function(a,b){},i=$.isFunction(g)?g:function(a,b,c){},a.match("^http")||(a=settingsGlobal.sPathAjax+a);var j={type:e,url:a,data:d,dataType:b,error:i,beforeSend:h,success:c},k="http://",l="https://";(window.location.href.substring(0,k.length)===k&&a.substring(0,l.length)===l||window.location.href.substring(0,l.length)===l&&a.substring(0,k.length)===k)&&(j.xhrFields={withCredentials:!0},j.crossDomain=!0),$.ajax(j)}function moodboardInfiniteScroll(){var a=$(".infiniteLoader"),b=a.find(".btn"),c=0,d=2,e=!1,f=$(".moodboard-item").length,g=parseInt(a.data("nb-items-total"),10),h=$(".moodboard-row").length;b.on("click",function(){$.ajax({url:a.data("path"),method:"POST",data:{nbItemsToDisplay:2,nbLine:h,start:f},beforeSend:function(){b.addClass("loadingLayer")}}).done(function(e){$(".moodboard").append(e),c++,c>=d&&b.removeClass("loadingLayer"),f=$(".moodboard-item").length,h=$(".moodboard-row").length,f>=g&&a.remove()}).fail(function(){}).always(function(){setTimeout(function(){$(".moodboard-item img").checkObjectFitSupport(),e=!1},800)})}),$(window).on("scroll",function(){a.length&&$(window).scrollTop()>=a.offset().top-$(window).height()+$(".footerSticky").height()&&c<d&&!1===e&&(e=!0,b.trigger("click"))})}function moodBoardTouchHover(){var a=$(".moodboard");a.on({mouseenter:function(){a.find(".moodboard-item").removeClass("touch-hover"),$(this).addClass("touch-hover")},mouseleave:function(){$(this).removeClass("touch-hover")}},".moodboard-item"),a.on("touchend",".moodboard-item",function(b){$(this).hasClass("touch-hover")||(b.preventDefault(),a.find(".moodboard-item").removeClass("touch-hover"),$(this).addClass("touch-hover"))}),a.on("click",".moodboard-item",function(a){if($(this).hasClass("touch-hover"))return!0;a.preventDefault()})}function managePopins(){$(document).on("click",function(a){var b=a.target;!$(b).closest("#cboxLoadedContent").length&&$(b).closest("#colorbox").length&&$("#cboxLoadedContent").is(":visible")&&$.colorbox.close()}),$.extend($.colorbox.settings,{fixed:!0,maxWidth:"100%",top:0,maxHeight:"100%",reposition:!0,onComplete:function(a){initAndAjax()}}),bIsPhone&&$.extend($.colorbox.settings,{width:"100%",height:"100%"}),$("body").on("click",".cboxAjaxWithLoader",function(a){a.preventDefault(),$.colorbox({onOpen:function(){$("#colorbox").css("opacity",0),$("#cboxOverlay").addClass("is-hidden"),$("#loadingPageContainer").css("display","block")},href:$(this).attr("href")}),$(document).bind("cbox_complete",function(){$("#loadingPageContainer").css("display","none"),$("#cboxOverlay").removeClass("is-hidden"),$("#colorbox").css("opacity",1)})}),$(document).bind("cbox_complete",function(){$("body").addClass("popinOpened"),$(".jsrc-popinQualitelis").length&&(svg4everybody(),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-reviewContentText").each(function(){var a=$(this),b=$.trim(a.children("strong").text()),c=parseInt(a.data("max-chars"));a.data("full-comment").length>c&&(a.addClass("isLongText"),a.find(".more").click(function(){a.children("strong").text(a.data("full-comment"))}),a.find(".less").click(function(){a.children("strong").text(b.substring(0,c))}))}),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-criteriaRatingBar[data-rating-bar]").each(function(){var a=$(this),b=parseFloat(a.attr("data-rating-bar").replace(/,/g,".")).toFixed(1);a.css("transform","scale("+b/10+", 1")})),$("#popinJoinB2bForm").length&&autoCompleteB2B("#popinJoinB2bForm")}),$(document).ready(function(){$(".jsrc-popinQualitelis").length&&(svg4everybody(),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-reviewContentText").each(function(){var a=$(this),b=$.trim(a.children("strong").text()),c=parseInt(a.data("max-chars"));a.data("full-comment").length>c&&(a.addClass("isLongText"),a.find(".more").click(function(){a.children("strong").text(a.data("full-comment"))}),a.find(".less").click(function(){a.children("strong").text(b.substring(0,c))}))}),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-criteriaRatingBar[data-rating-bar]").each(function(){var a=$(this),b=parseFloat(a.attr("data-rating-bar").replace(/,/g,".")).toFixed(1);a.css("transform","scale("+b/10+", 1")})),$("#popinJoinB2bForm").length&&autoCompleteB2B("#popinJoinB2bForm")}),$(document).bind("cbox_closed",function(){$("body").removeClass("popinOpened"),$("#cboxClose").removeClass()}),$("body").on("click",".cboxInline",function(a){a.preventDefault(),$.colorbox({inline:!0,href:$(this).attr("href"),className:void 0===$(this).attr("data-classname")?$(this).attr("href").replace("#","")+"__container":$(this).attr("data-classname")})}),$("body").on("click",".cboxInlineFullScreen",function(a){a.preventDefault(),$.colorbox({inline:!0,href:$(this).attr("href"),width:"100%",height:"100%",className:void 0===$(this).attr("data-classname")?$(this).attr("href").replace("#","")+"__container cboxFullScreen":$(this).attr("data-classname")+" cboxFullScreen"})}),$("body").on("click",".cboxAjax",function(a){a.preventDefault(),$.colorbox({href:$(this).attr("href"),className:void 0!==$(this).attr("data-classname")?$(this).attr("data-classname"):""})}),$("body.home").on("click",".cboxInlineHomeOnly",function(a){a.preventDefault(),$.colorbox({inline:!0,href:$(this).attr("href")})}),$("body").on("click",".cboxAjaxFullMapScreen",function(a){a.preventDefault(),$.colorbox({href:$(this).attr("href"),className:"cboxFullMapScreen",width:"100%",height:"100%"})}),$("body").on("click",".cboxAjaxFullScreen",function(a){a.preventDefault(),$.colorbox({href:$(this).attr("href"),className:"cboxFullScreen",width:"100%",height:"100%"})}),$("body").on("click",".cboxAjaxFullScreenLocation",function(a){a.preventDefault(),$.colorbox({href:$(this).attr("href"),className:"cboxFullMapScreen",width:"100%",height:"100%"})}),$("body").on("click",".cboxFrame",function(a){a.preventDefault();var b=$(this).data("width"),c=$(this).data("height"),d="";void 0!=$(this).data("class")&&(d=$(this).data("class")),$.colorbox({iframe:!0,className:"cboxIframeContainer "+d,href:$(this).attr("href"),width:b,height:c+80,onComplete:function(a){$("#cboxLoadedContent").find(".cboxIframe").css("height",c)}})}),$("body").on("click",".popinMoreRoomRates .btn",function(a){a.preventDefault();var b=$(".popin .popinHeaderTitleLogo").height()+$(".popin .form").height()+$(".popinMoreRoomRates").height()+40;$("#cboxLoadedContent").animate({scrollTop:b})}),$("body").on("click","#popinSelectAddOn .js-triggerClosePopin",function(a){a.preventDefault(),0==$("#cboxClose").length?jQuery().colorbox.close():$("#cboxClose").trigger("click"),"RelaisChateauxApp"===window.navigator.userAgent&&(window.location.href=Routing.generate("reservation_basket."+settingsLocalization.sLanguageMin))}),$("body").on("click",".js-triggerClosePopin",function(a){a.preventDefault(),0==$("#cboxClose").length?jQuery().colorbox.close():$("#cboxClose").trigger("click")}),$("body").on("click",".js-printPopin",function(a){a.preventDefault();var b=document.getElementsByTagName("head")[0].innerHTML,c=document.getElementById("cboxLoadedContent").innerHTML,d=document.createElement("iframe");d.name="frame1",d.style.position="absolute",d.style.top="-1000000px",document.body.appendChild(d);var e=d.contentWindow?d.contentWindow:d.contentDocument.document?d.contentDocument.document:d.contentDocument;return e.document.open(),e.document.write("<html><head>"),e.document.write(b),e.document.write("</head><body>"),e.document.write(c),e.document.write("</body></html>"),e.document.close(),setTimeout(function(){window.frames.frame1.focus(),window.frames.frame1.print(),document.body.removeChild(d)},500),!1}),$("body").on("click",".popinTripAdvisor .reviewBody .more",function(a){a.preventDefault(),$(this).closest(".reviewBody").find(".review").toggleClass("is-hidden")}),$("body").on("click",".popinTripAdvisor .ownerResponse .more",function(a){a.preventDefault(),$(this).closest(".ownerResponse").find(".response").toggleClass("is-hidden")}),$("body").on("click",".openPopinception",function(a){a.preventDefault();var b=$(this).attr("href");$(".popInception").hide(),$(".popInceptionParent").hide(),$(b).show(),$(b).find(".popin").removeClass("popin"),$("#cboxLoadedContent").scrollTop(0),$("#cboxLoadedContent").addClass("has-popinception"),$("#cboxLoadedContent").prepend('<div class="closePopInception"></div>')}),$("body").on("click",".closePopInception",function(a){$(".popInception").hide(),$("#cboxLoadedContent").removeClass("has-popinception"),$(".closePopInception").remove(),$(".popInceptionParent").show()})}function range_number_format(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g=void 0===d?",":d,h=void 0===c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}function refreshAddons(){function a(a){var b=a.closest(".addOnServiceItem"),c=b.find("select#date"),d=b.find("select#quantity"),e=d.data("price"),d=void 0!==d?d.val():0,f=0;if(c.length){var g=c.find("option:selected"),e=g.data("price"),e=void 0!==e?e:g.data("adult-price");c.data("only")?f=parseFloat(e):void 0!==e&&(f=parseFloat(d)*parseFloat(e))}else void 0!==e&&(f=parseFloat(d)*parseFloat(e));if(f){var h=b.find(".priceTag > .tag > .price");h.html(formatPrice(f)),h.attr("data-price",f)}}if($(".addOnServiceItem").not(".js-done").length){$(".addOnServiceItem").not(".js-done").addClass("js-done").each(function(){if($("select.dateService",$(this)).length){var a=$("select.dateService option",$(this)).first();a.data("adult-price")&&($("div.adultQuantity strong",$(this)).html(formatPrice(a.data("adult-price"))),$("div.adultQuantity strong",$(this)).attr("data-price",a.data("adult-price"))),a.data("children-price")&&($("div.childrenQuantity strong",$(this)).html(formatPrice(a.data("children-price"))),$("div.childrenQuantity strong",$(this)).attr("data-price",a.data("children-price"))),a.data("senior-price")&&($("div.seniorQuantity strong",$(this)).html(formatPrice(a.data("senior-price"))),$("div.seniorQuantity strong",$(this)).attr("data-price",a.data("senior-price"))),a.data("price")&&($("div.defaultQuantity strong",$(this)).html(formatPrice(a.data("price"))),$("div.defaultQuantity strong",$(this)).attr("data-price",a.data("price")))}if($(".directPrice",$(this)).length)if(0!=$(".directPrice",$(this)).val()){var b=$(".directPrice",$(this)).val();b=formatPrice(b),$("div.tag .price",$(this)).html(b),$("div.tag .price",$(this)).attr("data-price",$(".directPrice",$(this)).val())}else $("div.tag .price",$(this)).html(0),$("div.tag .price",$(this)).attr("data-free",1)}),$("body").on("change","select.dateService[data-only=true]",function(){var a=$(this),b=a.find("option:selected");if(void 0!==b&&b.length){var c=b.data("price");a.closest(".addOnServiceItem").find(".priceTag > .tag > .price").attr("data-price",c)}});var b=$("input.checkAddon:checked");b.length&&$.each(b,function(){a($(this))});var c=$("select.selectQuantity option:only-child");$.each(c,function(){a($(this))});var c=$("select.dateService[data-only=true] option:only-child");$.each(c,function(){var a=$(this).closest(".addOnServiceItem"),b=$(this).data("price");a.find(".priceTag > .tag > .price").data("price",b),a.find(".priceTag > .tag > .price").html(formatPrice(b))});var b=$("input.checkAddon:checked");b.length&&$(".btnAddSelection").removeClass("disabled")}}function restaurantStaffManager(){$("#restaurant-staff").length&&$(".staffCard-heading").matchHeight()}function reviewRating(){function a(a,b){a.removeClass("active");var c=b.data("reviewrate");b.find("button:lt("+c+")").addClass("active")}$(".reviewRating").length&&$(".reviewRating").each(function(){var b=$(this).find(".rate").find("button"),c=$(this).find(".rate"),d=c.data("edit");a(b,c),d&&(b.on("mouseover",function(){$(this).siblings().removeClass("active"),$(this).addClass("active"),$(this).prevAll().addClass("active")}),b.on("click",function(){var a=$(this).data("rate");c.attr("data-reviewrate",a),c.data("reviewrate",a)}),c.on("mouseleave",function(){a(b,c)}))})}function initRouteStep(){var a=$(".routeStep"),b=$(".overmapContentPassportList").length,c=b?a:$(".routeCityStep"),d=$(".overmapWrap .map"),e=d.attr("id");a.on("click",".blocRouteSteps .step a",function(){oInitGmaps[e]&&oInitGmaps[e].checkMarkerPostion($(this).data("marker-linked"))}),$(window).on("scroll",function(){var a=$(window).scrollTop(),d=a+$(window).height()/2;c.each(function(){$(this).offset().top<d&&(b?(oInitGmaps[e]&&!$(this).hasClass("active")&&oInitGmaps[e].activeStopOveMarker($(this).data("marker-linked")),$(this).addClass("active").siblings(".routeStep").removeClass("active")):(oInitGmaps[e]&&!$(this).hasClass("active")&&oInitGmaps[e].activeStopOveMarker($(this).data("marker-linked")),$(".routeCityStep").removeClass("active"),$(this).addClass("active").closest(".routeStep").addClass("active").siblings(".routeStep").removeClass("active")))})}),$(window).on("resize",function(){$(window).trigger("scroll")})}function eventScroll(a){function b(){c(),d(),$(window).on("scroll",function(a){null!=e&&clearTimeout(e),c(),bIsPhone?d():e=setTimeout(d,100)})}function c(){if(i=h,h=scrollY(),bIsPhone&&!j.bFirstLoad){var b=i-h,c=Math.abs(b),d=0==b?0:b/c;-1==d&&c>j.tollerance.down&&h>j.offsetTop&&f.addClass("antiScroll-on"),1==d&&(c>j.tollerance.up||h<=j.offsetTop)&&(f.removeClass("antiScroll-on"),g.removeClass("top-pricing"))}if(j.bFirstLoad=!1,"hotel"===a||"giftProduct"===a){var e=$(".hotelHeader .priceTag, #rc-GiftBanner .priceTag"),k=$(".hotelHeader, #rc-GiftBanner").height(),l=k-50+(bIsPhone&&f.hasClass("antiScroll-on")?60:0);$(".header .priceTag").length||e.clone().addClass("is-hidden").insertBefore(".ftrackView"),h>=l?($(".header").addClass("priceTag-added").find(".priceTag").removeClass("is-hidden"),$(".header").find(".priceTag").length&&g.addClass("top-pricing")):($(".header").removeClass("priceTag-added").find(".priceTag").addClass("is-hidden"),$(".header").find(".priceTag").length&&g.removeClass("top-pricing"))}}function d(){if(e=null,"home"==a){var b=$(".home").find(".footerSticky"),c=$(".fastTrack"),d=c.find(".startEndDatepickerWrapper"),g=130,i=120,j=bIsPhone?0:g,k=bIsPhone?i:g;h>=j?(f.attr("data-menuExpanded","false"),$(".firstLevel-gift-link").removeClass("no-focus"),f.removeClass("nav-isGrabbed"),bIsPhone||(f.addClass("sticky"),b.css({bottom:0}))):(f.attr("data-menuExpanded","true"),$(".firstLevel-gift-link").addClass("no-focus"),bIsPhone||f.removeClass("sticky"),bIsPhone||(b.css({bottom:"-10rem"}),f.hasClass("nav-is-opened")&&$(".navTrigger").trigger("click"))),h>=k?(f.attr("data-fastTrackExpanded","false"),c.length&&d.css({top:0})):(f.attr("data-fastTrackExpanded","true"),c.length&&d.css({top:c.offset().top-h}))}if("hotel"==a&&$(".propertyBookingNav").length){var l=$(".propertyBookingNav").offset().top-112;h>=l?$(".hotelNav").addClass("fixedsticky-hidden"):$(".hotelNav").removeClass("fixedsticky-hidden")}}var e=null,f=$("body"),g=$(".rc-GiftBanner-breadcrumbs"),h=0,i=0,j={bFirstLoad:!0,offsetTop:f.hasClass("home")?180:60,tollerance:{up:5,down:1}};b()}function scrollY(){return $(window).scrollTop()}function slickDefault(){$(".defaultSlider").not(".js-done").length&&$(".defaultSlider").not(".js-done").addClass("js-done").slick({fade:!0,speed:600,lazyLoad:"ondemand",slidesToShow:1,slidesToScroll:1})}function slickSlideTxt(){$(".txtSlider").not(".js-done").length&&$(".txtSlider").not(".js-done").each(function(){var a=$(this),b=a.closest("#cboxLoadedContent");a.addClass("js-done").slick({speed:600,slidesToShow:1,slidesToScroll:1,dots:!0}),$("html").hasClass("onlyInte")||a.on("afterChange",function(a,c,d,e){var f=$(".slideItem.slick-active",b).data("price"),g=$(".propertyRoomCTA .priceTag");if(g.css("display","inline-block"),0>=f&&g.css("display","none"),$(".propertyRoomCTA .price",b).html(formatPrice(f)),$(".propertyRoomCTA .js-detail-room",b).html($(".slideItem.slick-active",b).data("detail-room")),$(".propertyRoomCTA .js-type-room",b).html($(".slideItem.slick-active",b).data("room-name")),$(".propertyRoomCTA .js-type-price",b).html($(".slideItem.slick-active",b).data("room-rate-description")),void 0!==$(".slideItem.slick-active",b)[0]){for(var h=$(".slideItem.slick-active",b)[0].dataset,i=Object.entries(h),j=i.filter(function(a){return a[0].indexOf("taxeInfoText")>-1}),k=i.filter(function(a){return a[0].indexOf("taxeInfoAmount")>-1}),l=[],m=0,n=j.length;m<n;m++){void 0===l[j[m][1]]&&(l[j[m][1]]=0);var o=l[j[m][1]]+parseFloat(k[m][1]);l[j[m][1]]=o}var p,q;$(".trTaxesTab").remove();var r=document.getElementById("addtableTaxe");for(var s in l)l.hasOwnProperty(s)&&(p=document.createElement("tr"),p.classList.add("trTaxesTab"),q=p.insertCell(0),q.innerHTML=s,q=p.insertCell(1),q.classList.add("value-table-price"),q.innerHTML=$(".slideItem.slick-active").data("currency-symbol")+" "+l[s].toFixed(2),r.parentNode.insertBefore(p,r.nextSibling))}var t=$(".slideItem.slick-active",b).data("detail-discount"),u=$("div.propertyRoomCTA .js-detail-discount",b);t?(u.parent().css("display","table-row"),u.html(t)):u.parent().css("display","none"),$("div.propertyRoomCTA .js-detail-fee",b).html($(".slideItem.slick-active",b).data("detail-fee")),$("div.propertyRoomCTA .js-detail-taxe",b).html($(".slideItem.slick-active",b).data("detail-tax")),$("div.propertyRoomCTA .js-detail-fee-taxe",b).html($(".slideItem.slick-active",b).data("detail-tax-fee")),$("div.propertyRoomCTA .js-detail-total",b).html($(".slideItem.slick-active",b).data("detail-total")),$(".js-detail-commission",b).length&&$(".slideItem.slick-active",b).data("commission")&&$("div.propertyRoomCTA .js-detail-commission",b).html($(".slideItem.slick-active",b).data("commission")+"%")})})}function slickLP(){var a=parseInt($(".lpSlider").attr("data-duration"))||2e3;$(".lpSlider").not(".js-done").length&&$(".lpSlider").not(".js-done").addClass("js-done").slick({fade:!0,speed:a,lazyLoad:"ondemand",slidesToShow:1,slidesToScroll:1,dots:!0})}function slickGallery(){if($(".gallerySlider").not(".js-done").length){var a=$(".gallerySlider").not(".js-done");a.addClass("js-done"),a.slick({fade:!0,speed:0,infinite:!0,lazyLoad:"ondemand",slidesToShow:1,slidesToScroll:1,dots:!0,dotsClass:"custom_paging",customPaging:function(a,b){$(".gallerySliderNavWrapper .galleryPagination .totalSlide").text(a.slideCount)}});var b=$(".gallerySliderNav").not(".js-done");b.addClass("js-done");var c=[],d=3,e=10;for(i=d;i<e;i++){var f=170*(i+1)+100-1;c.push({breakpoint:f,settings:{slidesToShow:i}})}b.slick({infinite:!1,speed:600,slidesToShow:e,responsive:c});var g=$(".gallerySlider").slick("slickCurrentSlide");$(".gallerySliderNavWrapper .galleryPagination .currentSlide").text(g+1),a.on("beforeChange",function(a,c,d,e){$(".gallerySliderNavWrapper .galleryPagination .currentSlide").text(e+1),b.slick("slickGoTo",parseInt(e,10)),b.find(".slide").eq(e).trigger("click")}),$(".gallerySliderNavWrapper .galleryPagination").on("click",function(){$(this).closest(".gallerySliderNavWrapper").toggleClass("is-closed")}),b.on("click",".slide",function(){a.slick("slickGoTo",parseInt($(this).index(),10)),$(this).addClass("active").siblings(".slide").removeClass("active")}),setTimeout(function(){a.find(".slick-list").focus()},50),$(window).on("keydown",function(b){9==b.keyCode&&$("body.popinOpened .gallerySlider").length&&b.preventDefault(),37!=b.keyCode&&39!=b.keyCode||a.find(".slick-list").focus()})}}function slickPushItem(){$(".pushItemSlider").not(".js-done").length&&$(".pushItemSlider").not(".js-done").addClass("js-done").slick({speed:600,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!0})}function slickMultipleItem(){$(".multiple3ItemSlider").not(".js-done").length&&$(".multiple3ItemSlider").not(".js-done").addClass("js-done").slick({speed:600,slidesToShow:3,slidesToScroll:1,dots:!0,arrows:!0,responsive:[{breakpoint:1240,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1,arrows:!1}}]}),$(".multiple4ItemSlider").not(".js-done").length&&$(".multiple4ItemSlider").not(".js-done").addClass("js-done").slick({speed:600,slidesToShow:4,slidesToScroll:1,dots:!0,arrows:!0,responsive:[{breakpoint:1240,settings:{slidesToShow:3}},{breakpoint:1024,settings:{slidesToShow:2}},{breakpoint:769,settings:{slidesToShow:1,arrows:!1}}]})}function socialCount(){var a=encodeURIComponent(window.location.href),b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c,d,e,f,g,h,i,j="",k=0;for(a=b._utf8_encode(a);k<a.length;)c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return j},decode:function(a){var c,d,e,f,g,h,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9+\/=]/g,"");k<a.length;)f=this._keyStr.indexOf(a.charAt(k++)),g=this._keyStr.indexOf(a.charAt(k++)),h=this._keyStr.indexOf(a.charAt(k++)),i=this._keyStr.indexOf(a.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));return j=b._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},c=function(a){return window.btoa?window.btoa(a):b.encode(a)};$.ajax({url:"//www.linkedin.com/countserv/count/share?url="+a+"&format=jsonp",dataType:"jsonp",success:function(a){if(void 0!==a.count){var b=a.count.toString();b>1&&$(".dockShare.btnLinkedIn .count .label").addClass("plural"),$(".js-lkCount").html(b)}}}),$.ajax({url:Routing.generate("rc_social_googleplus."+settingsLocalization.sLanguageMin,{url:c(a)})}).done(function(a){a.total>1&&$(".dockShare.btnGoogleplus .count .label").addClass("plural"),$(".js-gpCount").html(a.total)}),$("body").on("click",".dockShare.btnFacebook",function(){window.open("https://www.facebook.com/sharer/sharer.php?u="+a,"","toolbar=0, status=0, width=900, height=500")}),$("body").on("click",".dockShare.btnTwitter",function(){window.open("https://twitter.com/intent/tweet?url="+a,"","toolbar=0, status=0, width=650, height=360")}),$("body").on("click",".dockShare.btnLinkedIn",function(){window.open("https://www.linkedin.com/cws/share?url="+a+"&token=&isFramed=true","linkedin","toolbar=no,width=550,height=550")}),$("body").on("click",".dockShare.btnPinterest",function(){window.open("https://pinterest.com/pin/create/button/?url="+a,"toolbar=0, status=0, width=650, height=360")}),$("body").on("click",".dockShare.btnGoogleplus",function(){window.open("https://plus.google.com/share?url="+a,"toolbar=0, status=0, width=650, height=360")})}function stickyResize(){$(document).width(),$(".will-stick").each(function(){$(this).attr("style","");var a=$(this).next().outerWidth(),b=$(this).next().offset();$(this).css({left:b.left,width:a}).addClass("js-done")})}function videoPiksel(){function timer(){"undefined"!=typeof as_widget_manager&&(clearInterval(i),$(".js-videoAdd").not(".js-done").each(function(){var $video=$(this),$videoId=$(this).attr("id");$(this).addClass("js-done");var oVideoOptions=eval($video.data("video-options")),$my_video=as_widget_manager.create_player($videoId,{player_id:"rzz16131",project_uuid:oVideoOptions.project_id,video_uuid:oVideoOptions.video_uuid,auto_play:oVideoOptions.auto_play,width:oVideoOptions.width,height:oVideoOptions.height,className:"my_player_class","de-titlebar":!0,"de-bitrate":!0,"de-share":!0,"de-responsive":!0,"de-subtitle":!0,"de-subtitle-on":!0,"embed-type":"1","de-html-default":!0,"de-appid":"player_"+$videoId});players.push($my_video),$my_video.render()}))}var i=setInterval(timer,50)}function vidplay(){var a=$("#bannerVideoMedia").get(0),b=$(".videoBannerButton");a.paused?(a.play(),b.addClass("videoBannerButton-pause")):(a.pause(),b.removeClass("videoBannerButton-pause"))}function autoCompleteB2B(a){var b=$(".companyAutoComplete");b.autocomplete({appendTo:a||null,source:function(a,b){$.ajax({url:Routing.generate("b2b_company_search."+settingsLocalization.sLanguageMin),type:"POST",data:{iata:a.term},success:function(a){b(a)}})},minLength:3,open:function(){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&$(".ui-autocomplete").off("menufocus hover mouseover"),$(".ui-autocomplete").css("width",b.outerWidth())},select:function(a,c){if(a.preventDefault(),!0!==c.item.error){$("#rc_account_registerB2b_type_companyId").val(c.item.value),b.val(c.item.label.replace(/(<([^>]+)>)/gi,"")).blur();var d='<div class="company-response-inner ffGougyBold">';d+="<strong>"+c.item.company+"</strong><br />",d+="<strong>"+c.item.address+"</strong><br />",d+="<strong>"+c.item.address2+"</strong><br />",d+="<strong>IATA : "+c.item.iata+"</strong>",d+="</div>",$(".js-company-response").html(d)}}}),$(".companyAutoComplete").focusin(function(){$("#rc_account_registerB2b_type_companyId").val(""),$(this).val("")}),$.ui.autocomplete.prototype._renderItem=function(a,b){var c=$("<li></li>").data("item.autocomplete",b),d=$("<a></a>").html(b.label);return!0===b.error&&d.css("color","#d9b56e"),c.append(d).appendTo(a)}}function qualitelisFooter(){$(".jsrc-popinQualitelis").length&&(svg4everybody(),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-reviewContentText").each(function(){var a=$(this),b=$.trim(a.children("strong").text()),c=parseInt(a.data("max-chars"));a.data("full-comment").length>c&&(a.addClass("isLongText"),a.find(".more").click(function(){a.children("strong").text(a.data("full-comment"))}),a.find(".less").click(function(){a.children("strong").text(b.substring(0,c))}))}),$(".jsrc-popinQualitelis").find(".rc-popinQualitelis-criteriaRatingBar[data-rating-bar]").each(function(){var a=$(this),b=parseFloat(a.attr("data-rating-bar").replace(/,/g,".")).toFixed(1);a.css("transform","scale("+b/10+", 1")}))}function number_format(a,b,c,d){b=b||0,a=parseFloat(a),c&&d||(c=".",d=",");for(var e=Math.round(Math.abs(a)*("1e"+b))+"",f=b?e.slice(0,-1*b):e,g=b?e.slice(-1*b):"",h="";f.length>3;)h+=d+f.slice(-3),f=f.slice(0,-3);return(a<0?"-":"")+f+h+(g?c+g:"")}function switchCurrency(a){var b;$.ajax({url:Routing.generate("switch_currency_ajax."+settingsLocalization.sLanguageMin),type:"POST",data:{codeCurrency:a},cache:!1,async:!1,success:function(a){b=!0,a.success?location.reload():event.preventDefault()},error:function(){b=!1,console.log("error call ajax")}})}function setCookie(a,b){var c=new Date;c.setTime(c.getTime()+342144e5);var d="expires="+c.toUTCString();document.cookie=a+"="+b+"; "+d}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return""}function formatPrice(a){return 0==a?0:number_format(a,2,settingsLocalization.autoNumericOpt.aDec,settingsLocalization.autoNumericOpt.aSep)}function countFacebook(a){$.getJSON("//graph.facebook.com/?id="+a,function(a){if(void 0!==a.shares){var b=a.shares.toString();b>1&&$(".dockShare.btnFacebook .count .label").addClass("plural"),$(".js-fbCount").html(b)}})}function countPinterest(a){$.ajax({url:"//api.pinterest.com/v1/urls/count.json?url="+a+"&format=jsonp",dataType:"jsonp",success:function(a){if(void 0!==a.count){var b=a.count.toString();b>1&&$(".dockShare.btnPinterest .count .label").addClass("plural"),$(".js-ptCount").html(b)}}})}function manageErrors(a,b){var c=$('<div class="formError"></div>'),d=$('<div class="alert alert-error col-1-1"></div>');$(b).find(".formError").remove(),$(b).find(".alert").remove(),$.each(a.errors,function(a){var e=this;if(e.field){var f=$("#"+e.form+"_"+e.field),g=c.clone();if(f.parent().hasClass("checkbox"))var h=f.closest(".checkbox");else if("error-element"==f.attr("data-error"))var h=f.closest(".error-wrapper");else var h=f.closest(".formField");g.html(e.message),h.append(g)}else{var h=b,g=d.clone();g.html(e.message),h.prepend(g)}})}function manageSubmitStatus(a){if($(a).is(".submit-checker")){var b=!1,c=$(a).find("[type=submit]");$(a).find("input.checkable").each(function(){var a=$(this),c=$(a).val();void 0!==c&&""!==c||(b=!0)}),$(a).find("select.checkable").each(function(){var a=$(this),c=$(a).val();void 0!==c&&""!==c||(b=!0)}),$(a).find(".checkable-radio").each(function(){0===$(this).find(":checked").length&&(b=!0)}),$(a).find(".checkable-checkbox").each(function(){$(this).is(":checked")||(b=!0)});var d=$(".basketAside a.btn.btnGold.btnMedium").length;b?($(c).addClass("disabled"),d&&$(".basketAside a.btn.btnGold.btnMedium").addClass("disabled")):($(c).removeClass("disabled"),d&&$(".basketAside a.btn.btnGold.btnMedium").removeClass("disabled"))}}var $window,$sticky,dblcmopen=!1,iWindowHeight=$(window).height(),iWindowWidth=$(window).width(),idTimeoutDebouncedresize,players=[],bOnlyInte=$("html").hasClass("onlyInte"),bIsPhone=$("html").hasClass("is-phone"),isTouchy=!$("html.no-touchevents").length,transEndEventName=getUserAgentElementName("transEndEventName"),$viewportMeta=$("#viewport-meta"),triggerNavPlanATrip=!1,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9+\/=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),
c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};!function(a){var b,c,d=a.event;b=d.special.debouncedresize={setup:function(){a(this).on("resize",b.handler)},teardown:function(){a(this).off("resize",b.handler)},handler:function(a,e){var f=this,g=arguments,h=function(){a.type="debouncedresize",d.dispatch.apply(f,g)};c&&clearTimeout(c),e?h():c=setTimeout(h,b.threshold)},threshold:200}}(jQuery),Object.size=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c};var sDateFormatDefault=sDateFormatDefault||"dd/mm/yy";$(function(){window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)?$("html").addClass("ie-browser"):$("html").addClass("not-ie-browser")}),$(function(){$("body").on("click",".notReady",function(a){return a.preventDefault(),a.stopPropagation(),alert("/!\\ Cette fonctionnalité n'est pas encore disponible. /!\\"),!1})}),$(function(){$.fn.addLinkBlock=function(){$(this).each(function(){if(!$(this).hasClass("js-done")){var a=$(this).find(".linkBlock"),b="return false;"!=a.attr("onclick")&&a.attr("onclick");$(this).addClass("js-done").css({cursor:"pointer"}),(a.attr("onclick")&&"return false;"!=a.attr("onclick")||!a.attr("onclick"))&&$(this).click(function(b){var c=b;if(b||(c=window.event),c&&c.target!=a[0]){var d=a.attr("href"),e=a.attr("target")?a.attr("target"):"_self";switch(e){case"_blank":window.open(d,"");break;case"_parent":parent.location.href=d;break;case"_top":top.location.href=d;break;case"_self":document.location.href=d;break;default:e.location.href=d}}}),b&&($(this).attr("onclick",b),a.removeAttr("onclick"))}})},$.fn.setAutoNumeric=function(a){var b=a.float;this.autoNumeric("init",settingsLocalization.autoNumericOpt),this.autoNumeric("set",b),this.autoNumeric("destroy");var c=this.html();c=c.replace(settingsLocalization.autoNumericOpt.aDec+"00",""),this.html(c)}}),function(a,b,c){"use strict";function d(b,c){this.element=b,this.settings=a.extend({},h,c),this._defaults=h,this._name=g,this.mouseTimeoutID=null,this.focusTimeoutID=null,this.mouseFocused=!1,this.justFocused=!1,this.init()}function e(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}function f(b,c){var d,f,g,h=b.nodeName.toLowerCase();return"area"===h?(d=b.parentNode,f=d.name,!(!b.href||!f||"map"!==d.nodeName.toLowerCase())&&!!(g=a("img[usemap=#"+f+"]")[0])&&e(g)):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&e(b)}var g="accessibleMegaMenu",h={uuidPrefix:"accessible-megamenu",menuClass:"accessible-megamenu",topNavItemClass:"accessible-megamenu-top-nav-item",panelClass:"accessible-megamenu-panel",panelGroupClass:"accessible-megamenu-panel-group",hoverClass:"hover",focusClass:"focus",disabledClass:"no-focus",openClass:"open"},i={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,keyMap:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",190:"."}};d.prototype=function(){var e,f,h,j,k,l,m,n,o,p,q,r,s,t=0,u=1e3,v="",w="function"==typeof b.hasOwnProperty&&!!b.hasOwnProperty("ontouchstart");return e=function(b){return a(b).closest(":data(plugin_"+g+")").data("plugin_"+g)},f=function(b){b=a(b);var c=this.settings;b.attr("id")||b.attr("id",c.uuidPrefix+"-"+(new Date).getTime()+"-"+ ++t)},h=function(b,d){var e,f=a(b.target),g=this,h=this.settings,j=this.menu,k=f.closest("."+h.topNavItemClass),l=f.hasClass(h.panelClass)?f:f.closest("."+h.panelClass);if(s.call(this,!0),d)if(k=j.find("."+h.topNavItemClass+" ."+h.openClass+":first").closest("."+h.topNavItemClass),k.is(b.relatedTarget)||k.has(b.relatedTarget).length>0)0===k.length&&j.find("[aria-expanded=true]").attr("aria-expanded","false").removeClass(h.openClass).filter("."+h.panelClass).attr("aria-hidden","true");else{if(("mouseout"===b.type||"focusout"===b.type)&&(k.has(c.activeElement).length>0||a(c.activeElement).hasClass("navContainer")))return;k.find("[aria-expanded]").attr("aria-expanded","false").removeClass(h.openClass).filter("."+h.panelClass).attr("aria-hidden","true"),("keydown"===b.type&&b.keyCode===i.ESCAPE||"DOMAttrModified"===b.type)&&(e=k.find(":tabbable:first"),setTimeout(function(){j.find("[aria-expanded]."+g.settings.panelClass).off("DOMAttrModified.accessible-megamenu"),e.focus(),g.justFocused=!1},99))}else clearTimeout(g.focusTimeoutID),k.siblings().find("[aria-expanded]").attr("aria-expanded","false").removeClass(h.openClass).filter("."+h.panelClass).attr("aria-hidden","true"),k.find("[aria-expanded]").attr("aria-expanded","true").addClass(h.openClass).filter("."+h.panelClass).attr("aria-hidden","false"),"mouseover"===b.type&&f.is(":tabbable")&&1===k.length&&0===l.length&&j.has(c.activeElement).length>0&&(f.focus(),g.justFocused=!1),s.call(g)},j=function(b){var c=a(b.target),d=this,e=this.settings,f=(this.menu,c.closest("."+this.settings.topNavItemClass)),g=c.closest("."+this.settings.panelClass);1===f.length&&0===g.length&&1===f.find("."+this.settings.panelClass).length&&(c.hasClass(this.settings.openClass)||c.hasClass(this.settings.disabledClass)?(clearTimeout(d.focusTimeoutID),a("."+this.settings.topNavItemClass).find("[aria-expanded]").attr("aria-expanded","false").removeClass(e.openClass).removeClass(e.focusClass).filter("."+e.panelClass).attr("aria-hidden","true")):(b.preventDefault(),b.stopPropagation(),h.call(this,b),this.justFocused=!1))},k=function(b){0===a(b.target).closest(".navContainer").length&&(b.preventDefault(),b.stopPropagation(),h.call(this,b,!0))},l=function(b){"aria-expanded"===b.originalEvent.attrName&&"false"===b.originalEvent.newValue&&a(b.target).hasClass(this.settings.openClass)&&(b.preventDefault(),b.stopPropagation(),h.call(this,b,!0))},m=function(b){clearTimeout(this.focusTimeoutID);var c=a(b.target),d=c.closest("."+this.settings.panelClass);c.addClass(this.settings.focusClass).on("click.accessible-megamenu",a.proxy(j,this)),this.justFocused=!this.mouseFocused,this.mouseFocused=!1,this.panels.not(d).filter("."+this.settings.openClass).length&&h.call(this,b)},n=function(c){this.justFocused=!1;var d=this,e=a(c.target),f=e.closest("."+this.settings.topNavItemClass);e.removeClass(this.settings.focusClass).off("click.accessible-megamenu"),b.cvox?d.focusTimeoutID=setTimeout(function(){b.cvox.Api.getCurrentNode(function(a){f.has(a).length?clearTimeout(d.focusTimeoutID):d.focusTimeoutID=setTimeout(function(a,b,c){h.call(a,b,c)},275,d,c,!0)})},25):d.focusTimeoutID=setTimeout(function(){h.call(d,c,!0)},300)},o=function(c){var f,g,k,l,m,n,o=this.constructor===d?this:e(this),p=o.settings,q=a(a(this).is("."+p.hoverClass+":tabbable")?this:c.target),r=o.menu,s=o.topnavitems,t=q.closest("."+p.topNavItemClass),w=r.find(":tabbable"),x=q.hasClass(p.panelClass)?q:q.closest("."+p.panelClass),y=x.find("."+p.panelGroupClass),z=q.closest("."+p.panelGroupClass),A=c.keyCode||c.which,B=!1,C=i.keyMap[c.keyCode]||"",D=1===t.length&&0===x.length;if(!q.is("input:focus, select:focus, textarea:focus, button:focus")){switch(q.is("."+p.hoverClass+":tabbable")&&a("html").off("keydown.accessible-megamenu"),A){case i.ESCAPE:h.call(o,c,!0);break;case i.DOWN:c.preventDefault(),"true"==a("body").attr("data-menuExpanded")?(D?(h.call(o,c),B=1===t.find("."+p.panelClass+" :tabbable:first").focus().length):B=1===w.filter(":gt("+w.index(q)+"):first").focus().length,!B&&b.opera&&"[object Opera]"===opera.toString()&&(c.ctrlKey||c.metaKey)&&(w=a(":tabbable"),k=w.index(q),B=1===a(":tabbable:gt("+a(":tabbable").index(q)+"):first").focus().length)):D?B=1===s.filter(":gt("+s.index(t)+"):first").find(":tabbable:first").focus().length:(y.length&&z.length&&(B=1===y.filter(":gt("+y.index(z)+"):first").find(":tabbable:first").focus().length),B||(B=1===t.find(":tabbable:first").focus().length));break;case i.UP:c.preventDefault(),"true"==a("body").attr("data-menuExpanded")?(D&&q.hasClass(p.openClass)?(h.call(o,c,!0),f=s.filter(":lt("+s.index(t)+"):last"),f.children("."+p.panelClass).length&&(B=1===f.children().attr("aria-expanded","true").addClass(p.openClass).filter("."+p.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):D||(B=1===w.filter(":lt("+w.index(q)+"):last").focus().length),!B&&b.opera&&"[object Opera]"===opera.toString()&&(c.ctrlKey||c.metaKey)&&(w=a(":tabbable"),k=w.index(q),B=1===a(":tabbable:lt("+a(":tabbable").index(q)+"):first").focus().length)):D?B=1===s.filter(":lt("+s.index(t)+"):last").find(":tabbable:first").focus().length:(y.length&&z.length&&(B=1===y.filter(":lt("+y.index(z)+"):last").find(":tabbable:first").focus().length),B||(B=1===t.find(":tabbable:first").focus().length));break;case i.RIGHT:c.preventDefault(),"true"==a("body").attr("data-menuExpanded")?D?B=1===s.filter(":gt("+s.index(t)+"):first").find(":tabbable:first").focus().length:(y.length&&z.length&&(B=1===y.filter(":gt("+y.index(z)+"):first").find(":tabbable:first").focus().length),B||(B=1===t.find(":tabbable:first").focus().length)):(D?(h.call(o,c),B=1===t.find("."+p.panelClass+" :tabbable:first").focus().length):B=1===w.filter(":gt("+w.index(q)+"):first").focus().length,!B&&b.opera&&"[object Opera]"===opera.toString()&&(c.ctrlKey||c.metaKey)&&(w=a(":tabbable"),k=w.index(q),B=1===a(":tabbable:gt("+a(":tabbable").index(q)+"):first").focus().length));break;case i.LEFT:c.preventDefault(),"true"==a("body").attr("data-menuExpanded")?D?B=1===s.filter(":lt("+s.index(t)+"):last").find(":tabbable:first").focus().length:(y.length&&z.length&&(B=1===y.filter(":lt("+y.index(z)+"):last").find(":tabbable:first").focus().length),B||(B=1===t.find(":tabbable:first").focus().length)):(D&&q.hasClass(p.openClass)?(h.call(o,c,!0),f=s.filter(":lt("+s.index(t)+"):last"),f.children("."+p.panelClass).length&&(B=1===f.children().attr("aria-expanded","true").addClass(p.openClass).filter("."+p.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):D||(B=1===w.filter(":lt("+w.index(q)+"):last").focus().length),!B&&b.opera&&"[object Opera]"===opera.toString()&&(c.ctrlKey||c.metaKey)&&(w=a(":tabbable"),k=w.index(q),B=1===a(":tabbable:lt("+a(":tabbable").index(q)+"):first").focus().length));break;case i.TAB:k=w.index(q),c.shiftKey&&D&&q.hasClass(p.openClass)?(h.call(o,c,!0),f=s.filter(":lt("+s.index(t)+"):last"),f.children("."+p.panelClass).length&&(B=f.children().attr("aria-expanded","true").addClass(p.openClass).filter("."+p.panelClass).attr("aria-hidden","false").find(":tabbable:last").focus())):c.shiftKey&&k>0?B=1===w.filter(":lt("+k+"):last").focus().length:!c.shiftKey&&k<w.length-1?B=1===w.filter(":gt("+k+"):first").focus().length:b.opera&&"[object Opera]"===opera.toString()&&(w=a(":tabbable"),k=w.index(q),B=c.shiftKey?1===a(":tabbable:lt("+a(":tabbable").index(q)+"):last").focus().length:1===a(":tabbable:gt("+a(":tabbable").index(q)+"):first").focus().length),B&&c.preventDefault();break;case i.SPACE:if(!D)return!0;c.preventDefault(),j.call(o,c);break;case i.ENTER:return!0;default:if(clearTimeout(this.keydownTimeoutID),v+=C!==v?C:"",0===v.length)return;for(this.keydownTimeoutID=setTimeout(function(){v=""},u),w=D&&!q.hasClass(p.openClass)?w.filter(":not(."+p.panelClass+" :tabbable)"):t.find(":tabbable"),c.shiftKey&&(w=a(w.get().reverse())),k=0;k<w.length;k++)if(l=w.eq(k),l.is(q)){g=1===v.length?k+1:k;break}for(n=new RegExp("^"+v.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),"i"),k=g;k<w.length;k++)if(l=w.eq(k),m=a.trim(l.text()),n.test(m)){B=!0,l.focus();break}if(!B)for(k=0;k<g;k++)if(l=w.eq(k),m=a.trim(l.text()),n.test(m)){l.focus();break}}o.justFocused=!1}},p=function(b){a(b.target).is(":focusable, ."+this.settings.panelClass)&&(this.mouseFocused=!0),this.mouseTimeoutID=setTimeout(function(){clearTimeout(this.focusTimeoutID)},1)},q=function(a){},r=function(a){},s=function(b){var c=this.menu;b?(a("html").off("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu"),c.find("[aria-expanded]."+this.settings.panelClass).off("DOMAttrModified.accessible-megamenu")):(a("html").on("mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu",a.proxy(k,this)),c.find("[aria-expanded=true]."+this.settings.panelClass).on("DOMAttrModified.accessible-megamenu",a.proxy(l,this)))},{constructor:d,init:function(){var b=this,d=this.settings,e=this.nav=a(this.element),g=this.menu=e.children().first(),h=this.topnavitems=g.children();e.attr("role","navigation"),h.each(function(c,d){var e,g;d=a(d),e=d.find(":tabbable:first"),g=d.children(":not(:tabbable):last"),f.call(b,e),g.length&&(f.call(b,g),e.attr({"aria-haspopup":!0,"aria-controls":g.attr("id"),"aria-expanded":!1}),g.attr({role:"group","aria-expanded":!1,"aria-hidden":!0}).not("[aria-labelledby]").attr("aria-labelledby",e.attr("id")))}),this.panels=g.find("."+d.panelClass),g.on("focusin.accessible-megamenu",":focusable, ."+d.panelClass,a.proxy(m,this)).on("focusout.accessible-megamenu",":focusable, ."+d.panelClass,a.proxy(n,this)).on("keydown.accessible-megamenu",a.proxy(o,this)).on("mouseover.accessible-megamenu",a.proxy(q,this)).on("mouseout.accessible-megamenu",a.proxy(r,this)).on("mousedown.accessible-megamenu",a.proxy(p,this)),w&&g.on("touchstart.accessible-megamenu",a.proxy(j,this)),g.find("hr").attr("role","separator"),a(c.activeElement).closest(g).length&&a(c.activeElement).trigger("focusin.accessible-megamenu")},getDefaults:function(){return this._defaults},getOption:function(a){return this.settings[a]},getAllOptions:function(){return this.settings},setOption:function(a,b,c){this.settings[a]=b,c&&this.init()}}}(),a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new d(this,b))})},a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return f(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),d=isNaN(c);return(d||c>=0)&&f(b,!d)}})}(jQuery,window,document),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b:a.echo=b(a)}(this,function(a){"use strict";var b,c,d,e,f={},g=function(){},h=function(a,b){var c=a.getBoundingClientRect();return c.right>=b.l&&c.bottom>=b.t&&c.left<=b.r&&c.top<=b.b},i=function(){clearTimeout(c),c=setTimeout(f.render,d)};return f.init=function(c){c=c||{};var h=c.offset||0,j=c.offsetVertical||h,k=c.offsetHorizontal||h,l=function(a,b){return parseInt(a||b,10)};b={t:l(c.offsetTop,j),b:l(c.offsetBottom,j),l:l(c.offsetLeft,k),r:l(c.offsetRight,k)},d=l(c.throttle,250),e=!!c.unload,g=c.callback||g,f.render(),document.addEventListener?(a.addEventListener("scroll",i,!1),a.addEventListener("load",i,!1)):(a.attachEvent("onscroll",i),a.attachEvent("onload",i))},f.render=function(){for(var c,d,i=document.querySelectorAll("img[data-echo]"),j=i.length,k={l:0-b.l,t:0-b.t,b:(a.innerHeight||document.documentElement.clientHeight)+b.b,r:(a.innerWidth||document.documentElement.clientWidth)+b.r},l=0;l<j;l++)d=i[l],h(d,k)?(e&&d.setAttribute("data-echo-placeholder",d.src),d.src=d.getAttribute("data-echo"),e||d.removeAttribute("data-echo"),g(d,"load")):e&&(c=d.getAttribute("data-echo-placeholder"))&&(d.src=c,d.removeAttribute("data-echo-placeholder"),g(d,"unload"));j||f.detach()},f.detach=function(){document.removeEventListener?a.removeEventListener("scroll",i):a.detachEvent("onscroll",i),clearTimeout(c)},f});var window_focus,window_just_focused;$(window).focus(function(){window_focus=!0,window_just_focused=!0,setTimeout(function(){window_just_focused=!1},100)}).blur(function(){window_focus=!1}),function(a){"use strict";a(window.jQuery,window,document)}(function(a,b,c){"use strict";var d="tocify-header",e="."+d,f="tocify-subheader",g="."+f,h="tocify-item",i="."+h,j="tocify-extend-page",k="."+j;a.widget("toc.tocify",{version:"1.9.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:!0,showEffect:"slideDown",showEffectSpeed:"medium",hideEffect:"slideUp",hideEffectSpeed:"medium",smoothScroll:!0,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:!0,highlightOnScroll:!0,highlightOffset:40,theme:"bootstrap",extendPage:!0,extendPageOffset:100,history:!0,scrollHistory:!1,hashGenerator:"compact",highlightDefault:!0},_create:function(){var c=this;c.extendPageScroll=!0,c.items=[],c._generateToc(),c._addCSSClasses(),c.webkit=function(){for(var a in b)if(a&&-1!==a.toLowerCase().indexOf("webkit"))return!0;return!1}(),c._setEventHandlers(),a(b).load(function(){c._setActiveElement(!0),a("html, body").promise().done(function(){setTimeout(function(){c.extendPageScroll=!1},0)})})},_generateToc:function(){var b,c,e=this,f=e.options.ignoreSelector;return b=-1!==this.options.selectors.indexOf(",")?a(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(","))):a(this.options.context).find(this.options.selectors.replace(/ /g,"")),b.length?(e.element.addClass("tocify"),void b.each(function(b){a(this).is(f)||(c=a("<ul/>",{id:d+b,class:d}).append(e._nestElements(a(this),b)),e.element.append(c),a(this).nextUntil(this.nodeName.toLowerCase()).each(function(){0===a(this).find(e.options.selectors).length?a(this).filter(e.options.selectors).each(function(){a(this).is(f)||e._appendSubheaders.call(this,e,c)}):a(this).find(e.options.selectors).each(function(){a(this).is(f)||e._appendSubheaders.call(this,e,c)})}))})):void e.element.addClass("tocify-hide")},_setActiveElement:function(a){var c=this,d=b.location.hash.substring(1),e=c.element.find('li[data-unique="'+d+'"]');return d.length?(c.element.find("."+c.focusClass).removeClass(c.focusClass),e.addClass(c.focusClass),c.options.showAndHide&&e.click()):(c.element.find("."+c.focusClass).removeClass(c.focusClass),!d.length&&a&&c.options.highlightDefault&&c.element.find(i).first().addClass(c.focusClass)),c},_nestElements:function(b,c){var d,e,f;return d=a.grep(this.items,function(a){return a===b.text()}),d.length?this.items.push(b.text()+c):this.items.push(b.text()),f=this._generateHashValue(d,b,c),e=a("<li/>",{class:h,"data-unique":f}).append(a("<a/>",{text:b.text()})),b.before(a("<div/>",{name:f,"data-unique":f})),e},_generateHashValue:function(a,b,c){var d="",e=this.options.hashGenerator;if("pretty"===e){for(d=b.text().toLowerCase().replace(/\s/g,"-");d.indexOf("--")>-1;)d=d.replace(/--/g,"-");for(;d.indexOf(":-")>-1;)d=d.replace(/:-/g,"-")}else d="function"==typeof e?e(b.text(),b):b.text().replace(/\s/g,"");return a.length&&(d+=""+c),d},_appendSubheaders:function(b,c){var d=a(this).index(b.options.selectors),e=a(b.options.selectors).eq(d-1),h=+a(this).prop("tagName").charAt(1),j=+e.prop("tagName").charAt(1);j>h?b.element.find(g+"[data-tag="+h+"]").last().append(b._nestElements(a(this),d)):h===j?c.find(i).last().after(b._nestElements(a(this),d)):c.find(i).last().after(a("<ul/>",{class:f,"data-tag":h})).next(g).append(b._nestElements(a(this),d))},_setEventHandlers:function(){var d=this;this.element.on("click.tocify","li",function(){if(d.options.history&&(b.location.hash=a(this).attr("data-unique")),d.element.find("."+d.focusClass).removeClass(d.focusClass),a(this).addClass(d.focusClass),d.options.showAndHide){var c=a('li[data-unique="'+a(this).attr("data-unique")+'"]');d._triggerShow(c)}d._scrollTo(a(this))}),this.element.find("li").on({"mouseenter.tocify":function(){a(this).addClass(d.hoverClass),a(this).css("cursor","pointer")},"mouseleave.tocify":function(){"bootstrap"!==d.options.theme&&a(this).removeClass(d.hoverClass)}}),(d.options.extendPage||d.options.highlightOnScroll||d.options.scrollHistory||d.options.showAndHideOnScroll)&&a(b).on("scroll.tocify",function(){a("html, body").promise().done(function(){var e,f,g,h,l=a(b).scrollTop(),m=a(b).height(),n=a(c).height(),o=a("body")[0].scrollHeight;if(d.options.extendPage&&(d.webkit&&l>=o-m-d.options.extendPageOffset||!d.webkit&&m+l>n-d.options.extendPageOffset)&&!a(k).length){if(f=a('div[data-unique="'+a(i).last().attr("data-unique")+'"]'),!f.length)return;g=f.offset().top,a(d.options.context).append(a("<div />",{class:j,height:Math.abs(g-l)+"px","data-unique":j})),d.extendPageScroll&&(h=d.element.find("li.active"),d._scrollTo(a('div[data-unique="'+h.attr("data-unique")+'"]')))}setTimeout(function(){var c,f=null,g=null,h=a(d.options.context).find("div[data-unique]");h.each(function(b){var c=Math.abs((a(this).next().length?a(this).next():a(this)).offset().top-l-d.options.highlightOffset);return(null==f||f>c)&&(f=c,void(g=b))}),c=a(h[g]).attr("data-unique"),e=a('li[data-unique="'+c+'"]'),d.options.highlightOnScroll&&e.length&&(d.element.find("."+d.focusClass).removeClass(d.focusClass),e.addClass(d.focusClass)),d.options.scrollHistory&&b.location.hash!=="#"+c&&b.location.replace("#"+c),d.options.showAndHideOnScroll&&d.options.showAndHide&&d._triggerShow(e,!0)},0)})})},show:function(b){var c=this;if(!b.is(":visible"))switch(b.find(g).length||b.parent().is(e)||b.parent().is(":visible")?b.children(g).length||b.parent().is(e)||(b=b.closest(g)):b=b.parents(g).add(b),c.options.showEffect){case"none":b.show();break;case"show":b.show(c.options.showEffectSpeed);break;case"slideDown":b.slideDown(c.options.showEffectSpeed);break;case"fadeIn":b.fadeIn(c.options.showEffectSpeed);break;default:b.show()}return b.parent().is(e)?c.hide(a(g).not(b)):c.hide(a(g).not(b.closest(e).find(g).not(b.siblings()))),c},hide:function(a){var b=this;switch(b.options.hideEffect){case"none":a.hide();break;case"hide":a.hide(b.options.hideEffectSpeed);break;case"slideUp":a.slideUp(b.options.hideEffectSpeed);break;case"fadeOut":a.fadeOut(b.options.hideEffectSpeed);break;default:a.hide()}return b},_triggerShow:function(a,b){var c=this;return a.parent().is(e)||a.next().is(g)?c.show(a.next(g),b):a.parent().is(g)&&c.show(a.parent(),b),c},_addCSSClasses:function(){return"jqueryui"===this.options.theme?(this.focusClass="ui-state-default",this.hoverClass="ui-state-hover",this.element.addClass("ui-widget").find(".toc-title").addClass("ui-widget-header").end().find("li").addClass("ui-widget-content")):"bootstrap"===this.options.theme?(this.element.find(e+","+g).addClass("nav nav-list"),this.focusClass="active"):(this.focusClass="tocify-focus",this.hoverClass="tocify-hover"),this},setOption:function(){a.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){a.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(b){var c=this,d=c.options.smoothScroll||0,e=c.options.scrollTo,f=a('div[data-unique="'+b.attr("data-unique")+'"]');return f.length?(a("html, body").promise().done(function(){a("html, body").animate({scrollTop:f.offset().top-(a.isFunction(e)?e.call():e)+"px"},{duration:d})}),c):c}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var b=-1,c=-1,d=function(a){return parseFloat(a)||0},e=function(b){var c=a(b),e=null,f=[];return c.each(function(){var b=a(this),c=b.offset().top-d(b.css("margin-top")),g=f.length>0?f[f.length-1]:null;null===g?f.push(b):Math.floor(Math.abs(e-c))<=1?f[f.length-1]=g.add(b):f.push(b),e=c}),f},f=function(b){var c={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof b?a.extend(c,b):("boolean"==typeof b?c.byRow=b:"remove"===b&&(c.remove=!0),c)},g=a.fn.matchHeight=function(b){var c=f(b);if(c.remove){var d=this;return this.css(c.property,""),a.each(g._groups,function(a,b){b.elements=b.elements.not(d)}),this}return this.length<=1&&!c.target?this:(g._groups.push({elements:this,options:c}),g._apply(this,c),this)};g.version="0.7.2",g._groups=[],g._throttle=80,g._maintainScroll=!1,g._beforeUpdate=null,g._afterUpdate=null,g._rows=e,g._parse=d,g._parseOptions=f,g._apply=function(b,c){var h=f(c),i=a(b),j=[i],k=a(window).scrollTop(),l=a("html").outerHeight(!0),m=i.parents().filter(":hidden");return m.each(function(){var b=a(this);b.data("style-cache",b.attr("style"))}),m.css("display","block"),h.byRow&&!h.target&&(i.each(function(){var b=a(this),c=b.css("display");"inline-block"!==c&&"flex"!==c&&"inline-flex"!==c&&(c="block"),b.data("style-cache",b.attr("style")),b.css({display:c,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),j=e(i),i.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||"")})),a.each(j,function(b,c){var e=a(c),f=0;if(h.target)f=h.target.outerHeight(!1);else{if(h.byRow&&e.length<=1)return void e.css(h.property,"");e.each(function(){var b=a(this),c=b.attr("style"),d=b.css("display");"inline-block"!==d&&"flex"!==d&&"inline-flex"!==d&&(d="block");var e={display:d};e[h.property]="",b.css(e),b.outerHeight(!1)>f&&(f=b.outerHeight(!1)),c?b.attr("style",c):b.css("display","")})}e.each(function(){var b=a(this),c=0;h.target&&b.is(h.target)||("border-box"!==b.css("box-sizing")&&(c+=d(b.css("border-top-width"))+d(b.css("border-bottom-width")),c+=d(b.css("padding-top"))+d(b.css("padding-bottom"))),b.css(h.property,f-c+"px"))})}),m.each(function(){var b=a(this);b.attr("style",b.data("style-cache")||null)}),g._maintainScroll&&a(window).scrollTop(k/l*a("html").outerHeight(!0)),this},g._applyDataApi=function(){var b={};a("[data-match-height], [data-mh]").each(function(){var c=a(this),d=c.attr("data-mh")||c.attr("data-match-height");b[d]=d in b?b[d].add(c):c}),a.each(b,function(){this.matchHeight(!0)})};var h=function(b){g._beforeUpdate&&g._beforeUpdate(b,g._groups),a.each(g._groups,function(){g._apply(this.elements,this.options)}),g._afterUpdate&&g._afterUpdate(b,g._groups)};g._update=function(d,e){if(e&&"resize"===e.type){var f=a(window).width();if(f===b)return;b=f}d?-1===c&&(c=setTimeout(function(){h(e),c=-1},g._throttle)):h(e)},a(g._applyDataApi);var i=a.fn.on?"on":"bind";a(window)[i]("load",function(a){g._update(!1,a)}),a(window)[i]("resize orientationchange",function(a){g._update(!0,a)})});var initAccordion=function(){$(".accordion").not(".js-done").addClass("js-done").each(function(){var a=$(this),b=a.data("activepanel");a.accordion({header:".accordionHeader",collapsible:!0,heightStyle:"content",active:b})})},addItemToFav=function(){$(".addFavorite").not(".notLogged").on("click",function(){$(this).toggleClass("is-favorited")}).addClass("js-done")};$(".rc-GiftB2c-Index").length&&manageAddToCart();for(var navigateursEvents=["webkit","moz","MS","O",""],navigateurs=["webkit","Moz","ms","O",""],navigateur="",el=document.createElement("div"),i=0,l=navigateurs.length;i<l;i++)if(void 0!==el.style[navigateurs[i]+"Transform"]){navigateur=navigateurs[i];break}initBlanpain(),$(document).on("mousedown",".blocFeatured",function(a){var b=$(this);b.is(".noHover")||b.is(".blocFeatured-meteo")||(a.preventDefault(),window.location.href=b.find(".cta a").attr("href"))}),$(function(){$.fn.checkObjectFitSupport=function(){Modernizr.objectfit||$(this).not(".js-done").addClass("js-done").each(function(){var a=$(this).prop("src");a&&$(this).closest(".moodboard-item").css("backgroundImage","url("+a+")").addClass("no-object-fit")})}}),$(document).ready(function(a){$("html.is-phone").length&&$("body.basket").length&&$(window).width()<1024&&$(".basketBlockGift").find("a.finalizeBasket").clone().addClass("finalizeBasket--mobile").appendTo(".basketBlockGift");var b=0;$(".form-shipping-address").find("input").each(function(){""!==$(this).val()&&b++}),b>=1&&($("#rc_gifts_order_different_address").prop("checked",!0),$(".form-shipping-address").show()),$("#rc_gifts_order_different_address").on("click",function(a){$(this).is(":checked")||$(".form-shipping-address").find("input").each(function(){$(this).val("")})});var c=$(".shippingMain"),d=c.find(".shipping-form-radio__inner");void 0!==d&&0!==d.length&&changeDeliveryAside($("#shipping-form").find('[name="rc_gifts_shipping[pick]"]:checked'))}),$(".js-itemGiftPack").each(function(){var a=$(this);a.length&&(manageGiftPackQuantity(a),manageRemoveGiftFromCart(a))}),manageGiftCartCoupon(),$("#rc_gifts_shipping_boxMessage").on("change",function(a){a.target.checked||$("#rc_gifts_shipping_boxMessageContent").val("")}),$(".js-orderInformationsContainer").find(".submitInfosFormBtn").on("click",function(a){var b=$(".js-finalize-form-gift"),c=$(".js-finalizeForm-user-password");if($("#rc_gifts_order_different_address:checked").is(":checked")){var d=$("#rc_gifts_order_shipping_address"),e=$("#rc_gifts_order_shipping_zipCode"),f=$("#rc_gifts_order_shipping_city"),g=$("#rc_gifts_order_shipping_first_name"),h=$("#rc_gifts_order_shipping_last_name");if(""===d.val()||""===e.val()||""===f.val()||""===g.val()||""===h.val())return""===d.val()?d.css("border","2px solid #852e2d"):d.removeAttr("style"),""===e.val()?e.css("border","2px solid #852e2d"):e.removeAttr("style"),""===f.val()?f.css("border","2px solid #852e2d"):f.removeAttr("style"),""===g.val()?g.css("border","2px solid #852e2d"):g.removeAttr("style"),""===h.val()?h.css("border","2px solid #852e2d"):h.removeAttr("style"),$(".js-formError-shipping").show(),$("html, body").stop().animate({scrollTop:$(".form-shipping-address").offset().top},400),!1}if(c.length&&""!==c.find("#rc_gifts_order_password_first").val()&&(""===c.find("#rc_gifts_order_password_second").val()||c.find("#rc_gifts_order_password_first").val()!==c.find("#rc_gifts_order_password_second").val()))return $(".js-formError-password").show(),!1;b.find(".submit-button").each(function(){$(this).attr("disabled",!0),$(this).html($(this).attr("data-finalizing-text"))}),b.submit()}),$(".js-orderShippingContainer").find(".submitShippingFormBtn").on("click",function(a){$("#shipping-form").submit()}),$("#shipping-form").find('[name="rc_gifts_shipping[pick]"]').on("change",function(){changeDeliveryAside($(this))});var initCountDown=function(){var a=$("#countdown"),b=a.data("countdowndate"),c=a.data("countdownhour");a.countdown(b+" "+c,function(b){a.find(".countdown-day").html(b.strftime("%D")),a.find(".countdown-hour").html(b.strftime("%H")),a.find(".countdown-min").html(b.strftime("%M"))})};sDateFormatDefault=settingsLocalization.sDateFormat;var oDefaultsDatepikerSettings={sClassToRemove:"searchFormDatepicker startEndDate startDate endDate notFirstTime startEndDp",autoSize:!0,dateFormat:sDateFormatDefault,numberOfMonths:1,showAnim:"",beforeShow:function(a,b){$(a).datepicker("widget").removeClass(oDefaultsDatepikerSettings.sClassToRemove)}},aKeyDown=[],oStartEndDatepickerTempSettings={minDate:0,numberOfMonths:2},checkDateAvailability=function(a,b){var c=a,b=b||"close",d=c.find("input.startDate"),e=c.find(".startEndDatepicker");if(""==c.data("id-entity"))c.removeClass("displayAvailability");else if(""==getInputValue(d))c.find(".formError").removeClass("is-opened");else if(""!=getInputValue(d)&&c.data("id-entity")&&""!=c.data("id-entity")){var f=convertStrDateToObjDate(getInputValue(d));e.datepicker("setDate",f),updateCellAvailability(e,b)}},checkCellAvailability=function(a,b){var c=a,d=(c.closest(".startEndDatepickerWrapper"),c.closest(".startEndDate")),e=d.find(".formError"),f=d.find(".wrongDate");d.data("$btnClose"),e.removeClass("is-opened").find(".is-opened").removeClass("is-opened"),f.val("");var g=!1,h=d.data("iNbNights"),i=c.find(".start-date").data("minimumstay"),j=c.find(".start-date").data("active-minimumstay");if(c.find(".date-range-selected.notAvailable").not(".end-date").length?(e.find(".notAvailable").addClass("is-opened"),g=!0):c.find(".start-date.noArrival").length?(e.find(".noArrival").addClass("is-opened"),
g=!0):c.find(".end-date.noDeparture").length?(e.find(".noDeparture").addClass("is-opened"),g=!0):h<i&&1==j&&(e.find(".minimumStay").addClass("is-opened"),e.find(".minimumStay em").html(i),g=!0),g&&(f.val("wrongDate"),e.addClass("is-opened")),null==b)return!1;g&&"select"==b||(hideStartEndDatepicker(d),"select"==b&&null!=d.data("sScrollToID")&&($("#cboxLoadedContent").length?$("#cboxLoadedContent").animate({scrollTop:$("#"+d.data("sScrollToID")).offset().top},700):$("html, body").animate({scrollTop:$("#"+d.data("sScrollToID")).offset().top-40},700)))},updateCellAvailability=function(a,b){var c=a,b=b||null,d=c.closest(".startEndDate"),e=d.data("id-entity"),f=d.data("pax"),g=d.data("room"),h=e+"-"+f+"-"+g,i=c.data("sAjaxAvailabilityUrl");if(void 0!=$("#propertyBooking-pax").val()&&(f=$("#propertyBooking-pax").val()),void 0!=$("#propertyBooking-room").val()&&(g=$("#propertyBooking-room").val()),window.setTimeout(function(){c.find(".ui-datepicker-calendar td a").attr({tabindex:-1})},0),null==i||""==e)return d.removeClass("displayAvailability"),!1;d.addClass("displayAvailability"),window.setTimeout(function(){var a,j,k,l=c.find(".ui-datepicker-calendar td"),m=c.data("oAvailability");if(bIsPhone)a=c.find(".ui-datepicker-calendar td:not(.ui-state-disabled):eq(0)"),j=a.data("year")+"-"+(a.data("month")+1),k="mobile no end month";else{a=c.find(".ui-datepicker-group:eq(0) .ui-datepicker-calendar td:not(.ui-state-disabled):eq(0)");var n=c.find(".ui-datepicker-group:eq(1) .ui-datepicker-calendar td:not(.ui-state-disabled):eq(0)");j=a.data("year")+"-"+(a.data("month")+1),k=n.data("year")+"-"+(n.data("month")+1)}var o=function(){d.find(".startEndDateLegend .noArrival, .startEndDateLegend .noDeparture").addClass("is-hidden"),d.find(".ui-datepicker-calendar.loadingLayer").removeClass("loadingLayer"),l.each(function(){$(this).removeClass("available notAvailable noArrival noDeparture minimumStay")})},p=function(){o(),l.each(function(){if(null!=$(this).data("month")){var a=$(this).data("year")+"-"+($(this).data("month")+1),b=void 0===$(this).data("day")?parseInt($(this).children("a").html(),10):$(this).data("day"),c=m[h];if(void 0===$(this).data("day")&&($(this).attr("data-day",b),$(this).children().attr("data-day",b)),c&&c[a]){var e=!0;c[a].notAvailable.length&&-1!=$.inArray(b,c[a].notAvailable)&&($(this).addClass("notAvailable"),e=!1),c[a].noArrival.length&&-1!=$.inArray(b,c[a].noArrival)&&($(this).addClass("noArrival"),e=!1,d.find(".startEndDateLegend .noArrival").removeClass("is-hidden")),c[a].noDeparture.length&&-1!=$.inArray(b,c[a].noDeparture)&&($(this).addClass("noDeparture"),e=!1,d.find(".startEndDateLegend .noDeparture").removeClass("is-hidden")),e&&$(this).addClass("available"),c[a].minimumStay&&c[a].minimumStay[b]?$(this).attr("data-minimumstay",c[a].minimumStay[b]):$(this).attr("data-minimumstay",1),void 0!==c[a].activeMinStay?$(this).attr("data-active-minimumstay",c[a].activeMinStay):$(this).attr("data-active-minimumstay",!0),$(this).data("minimumstay")>1&&($(this).addClass("minimumStay"),$(this).children().attr("data-minimumstay",$(this).data("minimumstay")),$(this).children().attr("title",$(this).closest(".startEndDatepickerWrapper").data("minimumstay-title")+" "+$(this).data("minimumstay")),d.find(".startEndDateLegend .minimumStay").removeClass("is-hidden"));var f=$(this).find("a:first-child");e&&void 0!==c[a].pricesPerDay&&void 0!==c[a].pricesPerDay[b]&&1===$(this).data("minimumstay")&&(f.attr("data-price",c[a].pricesPerDay[b]),f.addClass("js-cell-loaded")),$(this).html(f)}}}),checkCellAvailability(c,b)},q=function(a){m[h][a]={notAvailable:[],noArrival:[],noDeparture:[],minimumStay:{}};var b=a.split("-"),d=b[1]-1;c.find('td[data-month="'+d+'"]').closest(".ui-datepicker-calendar").addClass("loadingLayer");var j=i;$("html").hasClass("onlyInte")&&(j=j.replace(".json","-"+e+"-"+a+".json")),loadData(j,"json",function(a){$.extend(m[h],a),p()},{month:a,idEntity:e,pax:f,room:g})},r=function(){m[h]||(m[h]={}),m[h][j]||q(j),bIsPhone||m[h][k]||q(k)};p(),c.data("idTimeoutAvailabilityAjax")&&clearTimeout(c.data("idTimeoutAvailabilityAjax")),c.data({idTimeoutAvailabilityAjax:setTimeout(r,200)})},0)};$(function(){$(document).on("click",function(a){var b=a.target;($(b).is("input.startDate")||$(b).is("input.endDate"))&&$(b).closest(".startEndDate").find(".startEndDatepickerWrapper").addClass("forbiddenHideDatepicker"),$(b).closest(".startEndDatepickerWrapper").length||$(b).is("[data-handler]")||$(b).closest("[data-handler]").length||$(".startEndDatepickerWrapper:not(.forbiddenHideDatepicker)").each(function(){"hidden"!==$(this).css("visibility")&&showHideStartEndDatepicker($(this),"closed")}),$(".startEndDate:not(.inline) .forbiddenHideDatepicker").removeClass("forbiddenHideDatepicker")});var datepickerCheckResize=function(){$window.on("resize",function(){var a=$(document.activeElement);a.is(".hasDatepicker")&&a.datepicker("hide").datepicker("show")})};$.fn.manageDatepicker=function(){datepickerCheckResize(),$(this).each(function(){var sTypeField=$(this).attr("type");if("date"==sTypeField){var $datepickerField=$(this).clone(),$datepickerFieldDate=$(this),sDateFormated=""==getInputValue($(this))?"":convertObjDateToStrDate(convertStrDateToObjDate($(this).val(),"yy-mm-dd"));$datepickerFieldDate.removeAttr("id").hide(),$datepickerField.removeAttr("name required format").attr({type:"text"}).val(sDateFormated).insertBefore($datepickerFieldDate),$datepickerField.on("change",function(){var a=""==getInputValue($(this))?"":convertObjDateToStrDate(convertStrDateToObjDate($(this).val()),"yy-mm-dd");$(this).next('input[type="date"]').val(a)}),Modernizr.input.placeholder||polyfillPlaceholder()}else var $datepickerField=$(this);var oDpOptions=$.extend({},oDefaultsDatepikerSettings);$datepickerField.data("options")&&(eval("var oDpDataOptions = "+$datepickerField.data("options")+";"),$.extend(oDpOptions,oDpDataOptions)),isTouchy&&$datepickerField.attr({readonly:"readonly"}),$datepickerField.datepicker(oDpOptions)})},$.fn.manageStartEndDatepicker=function(){$(this).each(function(){function getUiStateHighlightPos(a,b){return a==Keyboard.LEFT||a==Keyboard.UP?b?"last":"first":a==Keyboard.RIGHT||a==Keyboard.DOWN?b?"first":"last":void 0}var dStartDate,dEndDate,$startEndDate=$(this),oStartEndDateDefaultOptions={pax:2,room:1,minDate:"-1",maxDate:"-1",onlyDates:!1,minNights:1,maxNights:0,forbiddenStartDays:"",offerDays:""},oStartEndDateOptions={},$startEndDateLegend=$startEndDate.find(".startEndDateLegend"),$startEndDateLegendToggle=$startEndDate.find(".startEndDateLegendToggle");$startEndDate.data("options")&&eval("oStartEndDateOptions = "+$startEndDate.data("options")+";"),$startEndDate.find("input.startDate, input.endDate").each(function(){if("date"==$(this).attr("type")){var a=$(this).clone(),b=$(this),c=""==getInputValue($(this))?"":convertObjDateToStrDate(convertStrDateToObjDate($(this).val(),"yy-mm-dd"));b.removeAttr("id").removeClass("startDate endDate").hide(),a.removeAttr("name required format").attr({type:"text"}).val(c).insertBefore(b),a.on("change",function(){var a=""==getInputValue($(this))?"":convertObjDateToStrDate(convertStrDateToObjDate($(this).val()),"yy-mm-dd");$(this).next('input[type="date"]').val(a)}),Modernizr.input.placeholder||polyfillPlaceholder()}});var s=$.extend({},oStartEndDateDefaultOptions,oStartEndDateOptions),$dpWrapper=$startEndDate.find(".startEndDatepickerWrapper"),$btnClose=$dpWrapper.find(".btnClose"),$btnClear=$dpWrapper.find(".btnClear"),$dp=$startEndDate.find(".startEndDatepicker"),$startDateInput=$startEndDate.find("input.startDate"),$endDateInput=$startEndDate.find("input.endDate"),$startEndDateInput=$startEndDate.find("input.startDate, input.endDate"),iOneSec=1e3,iOneMin=60*iOneSec,iOneHour=60*iOneMin,iOneDay=24*iOneHour,dToday=new Date,iTimeToday=dToday.getTime()-iOneHour*dToday.getHours()-iOneMin*dToday.getMinutes()-iOneSec*dToday.getSeconds()-dToday.getMilliseconds(),dMinDate,iTimeMinDate=void 0,dMaxDate,iTimeMaxDate=void 0,sAjaxAvailabilityUrl=s.ajaxAvailabilityUrl||null,fSelectedAction=s.selectedAction,sScrollToID=s.scrollToID,bOnlyDates=s.onlyDates,iMinNights=s.minNights,iMaxNights=s.maxNights,aForbiddenStartDays=s.forbiddenStartDays.split(","),aOfferDays=s.offerDays.split(","),$nextField=$startEndDate.closest(".fastTrack").length?$startEndDate.closest(".formFieldset").next(".formFieldset").find("select").eq(0):$startEndDate.closest(".formField").siblings("select"),sIdDp=$startEndDate.attr("id")?$startEndDate.attr("id"):"dp"+iTimeToday+Math.floor(1e4*Math.random()+1);$startEndDate.attr("id")||$startEndDate.attr({id:sIdDp}),"-1"!=s.minDate&&(dMinDate=convertStrDateToObjDate(s.minDate),iTimeMinDate=dMinDate.getTime()),"-1"!=s.maxDate&&(dMaxDate=convertStrDateToObjDate(s.maxDate),iTimeMaxDate=dMaxDate.getTime()),$startEndDate.data({bFirstClick:!0,bInline:$startEndDate.hasClass("inline"),$dp:$dp,sIdDp:sIdDp,$dpWrapper:$dpWrapper,$btnClose:$btnClose,$startDateInput:$startDateInput,$endDateInput:$endDateInput,$startEndDateInput:$startEndDateInput,iMinNights:iMinNights,iMaxNights:iMaxNights,iTimeMinDate:iTimeMinDate,iTimeMaxDate:iTimeMaxDate,bOnlyDates:bOnlyDates,aForbiddenStartDays:aForbiddenStartDays,aOfferDays:aOfferDays,$nextField:$nextField,fSelectedAction:fSelectedAction,sScrollToID:sScrollToID,pax:s.pax,room:s.room}),$dp.data({oAvailability:{},sAjaxAvailabilityUrl:sAjaxAvailabilityUrl}),isTouchy&&$startEndDateInput.attr({readonly:"readonly"}),$startEndDateInput.on("focus",function(){if(window_just_focused)return!1;var a=$(this).hasClass("startDate")?"start":"end";$(this).closest(".startEndDate").data("bInline")||showHideStartEndDatepicker($(this),a)}),$startEndDateInput.on("click",function(){var a=$(this).hasClass("startDate")?"start":"end";$(this).closest(".startEndDate").data("bInline")&&showHideStartEndDatepicker($(this),a)});var Keyboard={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},focusDP,bKeyPress=!1;$startDateInput.on("keydown",function(a){keyDownInput($(this),a)}),$endDateInput.on("keydown",function(a){keyDownInput($(this),a)});var keyDownInput=function(a,b){var c=a.hasClass("startDate")?"start":"end",d=a.closest(".startEndDate"),e=d.data("sIdDp"),f=d.data("iMinNights"),g=d.data("$btnClose"),h=d.data("$dp"),i=(h.datepicker("widget"),d.data("$dpWrapper")),j=h.datepicker("option","isRTL"),k=!1;if("hidden"==i.css("visibility"))b.keyCode===Keyboard.DOWN&&(k=!0,a.trigger("click"));else{var l=h.datepicker("getDate");null==l&&("start"==c?l=new Date:(h.datepicker("setDate","+"+f+"d"),l=h.datepicker("getDate")));var m=l.getTime(),n=l.getFullYear(),o=l.getMonth(),p=0!=o?o-1:11,q=0!=o?n:n-1,r=daysInMonth(p+1,q),s=11!=o?o+1:0,t=11!=o?n:n+1,u=j?-1:1,v="";switch(b.keyCode){case Keyboard.ESCAPE:return g.trigger("click"),!1;case Keyboard.ENTER:var w=i.find(".ui-datepicker-current-day");("end"==c&&!w.hasClass("noDeparture")||"start"==c&&!w.hasClass("noArrival")&&!w.hasClass("notAvailable"))&&w.trigger("click"),k=!0;break;case Keyboard.LEFT:b.originalEvent.ctrlKey?v=j?"nextMonth":"prevMonth":h.datepicker("setDate",new Date(m-iOneDay*u));break;case Keyboard.UP:h.datepicker("setDate",new Date(m-7*iOneDay*u));break;case Keyboard.RIGHT:b.originalEvent.ctrlKey?v=j?"prevMonth":"nextMonth":h.datepicker("setDate",new Date(m+iOneDay*u));break;case Keyboard.DOWN:h.datepicker("setDate",new Date(m+7*iOneDay*u));break;case Keyboard.PAGE_UP:v="prevMonth";break;case Keyboard.PAGE_DOWN:v="nextMonth";break;default:k=!1}"prevMonth"==v?h.datepicker("setDate",new Date(q,p,r)):"nextMonth"==v&&h.datepicker("setDate",new Date(t,s,1)),-1!=$.inArray(b.keyCode,[Keyboard.LEFT,Keyboard.UP,Keyboard.RIGHT,Keyboard.DOWN,Keyboard.PAGE_UP,Keyboard.PAGE_DOWN])&&(k=!0,updateCellAvailability(h))}if(b.keyCode===Keyboard.TAB){var x=d.data("$startDateInput"),y=d.data("$endDateInput");if("start"!=c||b.originalEvent.shiftKey)if("start"==c&&b.originalEvent.shiftKey)"visible"!=i.css("visibility")||d.data("bInline")||showHideStartEndDatepicker(a,"closed");else if("end"!=c||b.originalEvent.shiftKey)"end"==c&&b.originalEvent.shiftKey&&d.data("bInline")&&(showHideStartEndDatepicker(x,"start"),setTimeout(function(){x.trigger("focus")},0));else{b.preventDefault();var z=d.data("$nextField");if(z.length)z.focus(),z.next(".selectboxit-container").children(".selectboxit-enabled").focus();else{var A=$(":tabbable");A.data({idTabbable:""}),a.data({idTabbable:e});var B=[];A.each(function(a,b){b=$(this),b.closest(".startEndDatepickerWrapper").length?b.attr({tabindex:-1}):B.push(b)}),$.each(B,function(a,b){b=$(this),b.hasClass("endDate")&&b.data("idTabbable")==e&&B[a+1].focus()})}"visible"!=i.css("visibility")||d.data("bInline")||showHideStartEndDatepicker(a,"closed")}else d.data("bInline")&&(showHideStartEndDatepicker(y,"end"),setTimeout(function(){y.trigger("focus")},0))}k&&(b.preventDefault(),b.stopPropagation())};$btnClose.on("click",function(){showHideStartEndDatepicker($(this),"closed")}),$btnClear.on("click",function(){var a=$btnClear.data("slug"),b=$("#etablissement-room-list");if(a&&b)return b.html(""),b.addClass("loadingLayer"),void $.post(Routing.generate("rc_etablissement_rooms."+settingsLocalization.sLanguageMin)+"/0/"+a,{},function(a){a.success&&(b.removeClass("loadingLayer"),b.html(a.content),initAndAjax())});var c=$(this).closest(".startEndDate"),d=c.find(".startEndDatepicker"),e=c.find("input.startDate, input.endDate"),f=c.find("input.startDate");e.each(function(){$(this).val("").trigger("change"),Modernizr.input.placeholder||$(this).val($(this).attr("placeholder")),$(this).data("lib")&&$(this).siblings("span").html($(this).siblings("span").data("placeholder"))}),c.data({dStartDate:void 0,dEndDate:void 0}),d.data({dStartDate:void 0,dEndDate:void 0}),d.datepicker("setDate",null),refreshNbNights(c),$(this).siblings(".btnClose").trigger("click"),c.hasClass("inline")&&(f.trigger("focus").trigger("click"),setTimeout(function(){},0))}),$startEndDate=$dp.closest(".startEndDate"),$inputStartDate=$startEndDate.find("input.startDate"),$inputEndDate=$startEndDate.find("input.endDate");var oStartEndDatepickerSettings={numberOfMonths:bIsPhone?1:2,defaultDate:convertStrDateToObjDate(getInputValue($inputStartDate)),onChangeMonthYear:function(a,b,c){var d=$(this);updateCellAvailability(d)},beforeShowDay:function(a){var b=$(this),c=a.getTime(),d=b.closest(".startEndDate"),e=d.find("input.startDate"),f=d.find("input.endDate"),g=convertStrDateToObjDate(getInputValue(e)),h=convertStrDateToObjDate(getInputValue(f)),i=null!=g&&void 0!=g?g.getTime():0,j=null!=h&&void 0!=h?h.getTime():0,k=d.data("iTimeMinDate"),l=d.data("iTimeMaxDate"),m=d.data("aForbiddenStartDays"),n=d.data("aOfferDays"),o=[],p=d.data("state"),q=String(a.getDay()),r=!0,s=-1!=$.inArray(q,m)&&"start"==p&&c>=k&&c<=l;return s&&(r=!1),0!=i&&0!=j&&(void 0!=k&&void 0!=l&&c>=k&&c<=l&&-1!=$.inArray(q,n)&&!s&&o.push("date-range-offer"),c>=i&&c<=j&&o.push("date-range-selected"),(e.hasClass("suggested")&&c>=i&&c<j||f.hasClass("suggested")&&c>i&&c<=j)&&o.push("date-range-suggested"),c==i&&o.push("start-date"),c==j&&o.push("end-date")),[r,o.join(" ")]}},oDpOptions=$.extend({},oDefaultsDatepikerSettings,oStartEndDatepickerSettings);$dp.data({oMinMaxStartEnd:{start:{min:bOnlyDates&&void 0!=iTimeMinDate?dMinDate:0,max:bOnlyDates&&void 0!=iTimeMaxDate?new Date(iTimeMaxDate-iOneDay*iMinNights):null},end:{min:bOnlyDates&&void 0!=iTimeMinDate?new Date(iTimeMinDate+iOneDay*iMinNights):iMinNights,max:bOnlyDates&&void 0!=iTimeMaxDate?dMaxDate:null}}}),""!=getInputValue($startDateInput)&&""!=getInputValue($endDateInput)&&(dStartDate=convertStrDateToObjDate(getInputValue($startDateInput)),dEndDate=convertStrDateToObjDate(getInputValue($endDateInput)),$dp.data({dStartDate:dStartDate,dEndDate:dEndDate})),$startEndDate.data({bDateSelected:!1,dStartDate:dStartDate,dEndDate:dEndDate,state:$startEndDate.hasClass("start")?"start":$startEndDate.hasClass("end")?"end":"closed"}),$dp.datepicker($.extend({},oDpOptions,{minDate:$dp.data("oMinMaxStartEnd").start.min,maxDate:$dp.data("oMinMaxStartEnd").start.max,onSelect:function(selected,datepicker){var $dp=$(this),$startEndDate=$dp.closest(".startEndDate"),$btnClose=$startEndDate.data("$btnClose"),oDates={start:{},end:{},selected:{}},sState=$startEndDate.data("state"),sOtherState="start"==sState?"end":"start",iDirection="start"==sState?1:-1,sIdEntity=$startEndDate.data("id-entity"),pax=$startEndDate.data("pax"),room=$startEndDate.data("room"),sIdEntityPaxRoom=sIdEntity+"-"+pax+"-"+room,iMinNights=$startEndDate.data("iMinNights");if($startEndDate.data({bDateSelected:!0}),$.each(oDates,function(a,b){"selected"!=a?(b.$inputDate=$startEndDate.find("input."+a+"Date"),b.sDate=getInputValue(b.$inputDate)):b.sDate=selected,b.dDate=convertStrDateToObjDate(b.sDate),b.iDate=null!=b.dDate?b.dDate.getTime():-1}),sIdEntity&&""!=sIdEntity&&"start"==sState&&-1!=oDates.selected.iDate){var sMonth=oDates.selected.dDate.getFullYear()+"-"+(oDates.selected.dDate.getMonth()+1),iDate=oDates.selected.dDate.getDate(),oAvailability=$dp.data("oAvailability");oAvailability[sIdEntityPaxRoom]&&oAvailability[sIdEntityPaxRoom][sMonth]&&oAvailability[sIdEntityPaxRoom][sMonth].minimumStay&&oAvailability[sIdEntityPaxRoom][sMonth].minimumStay[iDate]&&(iMinNights=oAvailability[sIdEntityPaxRoom][sMonth].minimumStay[iDate])}var $inputDate=oDates[sState].$inputDate;if($inputDate.removeClass("suggested").val(selected).trigger("change"),$inputDate.data("lib")&&$inputDate.siblings("span").html($inputDate.data("lib")+selected).removeClass("suggested"),-1!=oDates[sOtherState].iDate&&("end"==sState&&oDates.selected.iDate>=oDates.start.iDate-iDirection*iOneDay*iMinNights||"start"==sState&&oDates.selected.iDate<=oDates.end.iDate-iDirection*iOneDay*iMinNights))$startEndDate.data("id-entity")&&""!=$startEndDate.data("id-entity")?(checkDateAvailability($startEndDate,"select"),$startEndDate.data("bInline")&&$btnClose.trigger("click")):$btnClose.trigger("click");else{var dSuggestDate=new Date(oDates.selected.iDate+iDirection*iOneDay*iMinNights+(1==iDirection?iOneDay/2:0)),sSuggestedDate=convertObjDateToStrDate(dSuggestDate),$inputOtherDate=oDates[sOtherState].$inputDate;$inputOtherDate.val(sSuggestedDate).trigger("change"),$btnClose.trigger("click"),$inputOtherDate.data("lib")&&$inputOtherDate.siblings("span").html($inputOtherDate.data("lib")+sSuggestedDate)}if(""!=getInputValue(oDates.start.$inputDate)&&""!=getInputValue(oDates.end.$inputDate)){var sIdEntity=$startEndDate.data("id-entity"),pax=$startEndDate.data("pax"),room=$startEndDate.data("room");fSelectedAction&&eval($startEndDate.data("fSelectedAction")+"({idEntity:sIdEntity,startDate:getInputValue(oDates.start.$inputDate),endDate:getInputValue(oDates.end.$inputDate),pax:pax,room:room});")}refreshNbNights($startEndDate)}})),$startEndDate.data({iInitMinEndDate:void 0!=iTimeMinDate?iTimeMinDate+iOneDay*iMinNights:iTimeToday+iOneDay*iMinNights}),(""!=getInputValue($startDateInput)&&""!=getInputValue($endDateInput)||""==getInputValue($startDateInput)&&""==getInputValue($endDateInput))&&$dp.find(".ui-datepicker-inline").addClass("notFirstTime"),$dp.find(".ui-datepicker-inline").addClass("startEndDp"),$startEndDateLegendToggle.on("click",function(){$startEndDateLegendToggle.toggle(),$startEndDateLegend.toggle()}),refreshNbNights($startEndDate),updateCellAvailability($dp)})}});var viewports={default:"width=device-width, initial-scale=1",forced:"width=770, initial-scale=1",mobile:"width=device-width, initial-scale=1, user-scalable=no"},setDynamicViewport=function(){bIsPhone?$viewportMeta.attr("content",viewports.mobile):!1===bIsPhone&&screen.width<=770?$viewportMeta.attr("content",viewports.forced):$viewportMeta.attr("content",viewports.default)},updateDynamicViewport=function(){var a=$viewportMeta.attr("content");"width=770"===a&&iWindowHeight<iWindowWidth?$viewportMeta.attr("content","width=device-width, initial-scale=1.0"):"width=device-width, initial-scale=1.0"===a&&iWindowHeight>iWindowWidth&&$viewportMeta.attr("content","width=770")};$(function(){$.fn.examplePrototypeFunction=function(){$(this).each(function(){})}});var exampleSimpleFunction=function(){};$(function(){$.fn.manageFormFilters=function(){var a=200,b=5,c={};$(this).each(function(){var d=$(this),e=d.find("input, select, .rangeSlider"),f=function(a,c,d){var e=10*(c-1)+1;j=e+d.length-1,$(".paginationMeta em").html(e+" - "+j);var f=$("ul[data-action=result-pagination]"),g=Math.ceil(a/10),h=!1,i=!1,e=c,j=g,c=parseInt(c);if(1==g)return void f.html("");if(c<b?(e=1,j=g<=b?g:b,h=!1,i=!(g<=b)):c>=b&&g-b>=c?(half=Math.floor(b/2),e=c-half,j=c+half,h=!0,i=!0):(e=g-b,j=g,h=!0,i=!1),f.html(""),g>1&&1!=c){var k=$("<li></li>");k.attr("data-action","paginate"),k.attr("data-page",c-1),k.html(f.data("previous")),k.addClass("prev"),f.append(k)}if(h){var k=$("<li></li>");k.attr("data-action","paginate"),k.attr("data-page",1),k.html(1),f.append(k),f.append('<li class="gap">...</li>')}for(var l=e;l<=j;l++){var k=$("<li>"+l+"</li>");l===c?k.addClass("current"):(k.attr("data-action","paginate"),k.attr("data-page",l)),f.append(k)}if(i){var k=$("<li></li>");k.attr("data-action","paginate"),k.attr("data-page",g),k.html(g),f.append('<li class="gap">...</li>'),f.append(k)}if(g>1&&c!=g){var k=$("<li></li>");k.attr("data-action","paginate"),k.attr("data-page",c+1),k.html(f.data("next")),k.addClass("next"),f.append(k)}};$("body").on("click","*[data-action=paginate]",function(a){a.preventDefault(),a.stopPropagation();var b=$(this),c=($("span[data-action=result-total]").data("total"),b.data("page")),d=$("ul[data-action=result-pagination]"),e=$("[data-action=input-page]"),f=e.closest(".formFilters");d.data("page",c),d.attr("data-page",c),e.val(c),f.trigger("submit")}),e.on("change",function(){$(this).closest(".formFilters").trigger("submit")});var g=null,h=$("[data-action=filters-form]").data("timer");d.on("submit",function(){var b=$(this);return null!=g&&clearTimeout(g),g=setTimeout(function(){function d(a){var b=new $.Deferred;if("nodejs"==a){if("undefined"!=typeof socket){var c=$("body").attr("lang");socket.emit("find_markers",p,c),socket.once("markers_results",function(a){u.displayAjaxMarkers(a),b.resolve()})}}else $.ajax({url:a,data:o,type:"POST",success:function(a){if($("#nbRDBInMap").length>0&&$("#nbRDBInMap").html(a.length),u.displayAjaxMarkers(a),$(".inspireMeResults").length&&a[0]){var b=a[0].location.lat,c=a[0].location.lng;u.map.setCenter(new google.maps.LatLng(b,c)),u.centerMapAtLoad()}},complete:function(){b.resolve()}});return b.promise()}function e(a){var b=new $.Deferred;return $.ajax({url:a,data:o,type:"POST",success:function(a){var b=$("input[data-action=search-filter-service]");$.each(b,function(){var b=$(this).val();-1===a.indexOf(b)?($(this).attr("disabled",!0),$(this).removeAttr("checked")):$(this).attr("disabled",!1)})},complete:function(){b.resolve()}}),b.promise()}function h(a){var b=new $.Deferred;return $.ajax({url:l,data:o,type:"POST",success:function(a){n=a},complete:function(){b.resolve()}}),b.promise()}var i=b.data("map-linked"),j=b.data("load-markers-path"),k=b.data("load-filters-path"),l=b.data("load-results-path"),m=!1,n=null,o=(b.serialize(),b.serializeArray()),p={};mapContainer=$(".mapWrapper"),sideContainer=$(".overmapContent .innerOvermapContent"),mapContainer.addClass("loadingLayer"),sideContainer.addClass("loadingLayer");for(var q in o){var r=o[q].name.match(/\[\]/)?o[q].name.replace(/\[\]/,""):o[q].name;if(void 0!==p[r])if($.isArray(p[r]))p[r].push(o[q].value);else{var s=p[r],t=[s,o[q].value];p[r]=t}else p[r]=o[q].value}if(void 0!=i){var u=oInitGmaps[i];u.$refreshResults.addClass("loading")}var v=[];if(j){var w=d(j);v.push(w)}if(k){var w=e(k);v.push(w)}if(l){var w=h(l);v.push(w)}$.when.apply(null,v).then(function(){var b=$(".mapWrapper"),g=$(".overmapContent .innerOvermapContent");if(b.removeClass("loadingLayer"),g.removeClass("loadingLayer"),null!=n&&n.status===a){var h=$("span[data-action=result-total-label]"),l=1==n.total?h.data("singular"):h.data("plural");if(m=n.isCheckAvail,hasCheckAvailability=n.hasCheckAvail,m&&(p.ids=hasCheckAvailability?n.ids:"",$.each(o,function(a){"ids"==this.name&&(o[a].value=hasCheckAvailability?n.ids:"")}),$("[data-action=ids]").val(hasCheckAvailability?n.ids:""),hasCheckAvailability?($("header").removeClass("noSynxisSearch"),$("[data-action=experience]").removeAttr("disabled")):($("header").addClass("noSynxisSearch"),$("[data-action=experience]").attr("disabled",!0))),bIsPhone){var q=$("[data-action=infinite-load]");0==q.data("is-load")&&$("div[data-action=result-item]").remove()}else $("div[data-action=result-item]").remove();$("span[data-action=result-total]").html(n.total),$("span[data-action=result-total]").data("total",n.total),$("span[data-action=result-total-label]").html(l),bIsPhone||f(n.total,p.page,n.results),$.each(n.results,function(){var b=this,d=b.type,e=$("*[data-action=result-container]"),f="";void 0!==n.model&&void 0!=n.model.area&&""!=n.model.area&&(f=d);var g=$(c[b.id]).find("[data-parent]").data("parent");if(void 0===c[b.id]||""!=f&&(f+"").toLowerCase()!=(g+"").toLowerCase()){var h=$('<div><div class="hotelQuickView"></div></div>');if(e.data("inspire-me-slug")||h.addClass("col-1-2 collapse-s"),h.attr("data-action","result-item"),h.attr("data-id",b.id),h.attr("data-type",d),""!=f&&h.attr("data-parent",(f+"").toLowerCase()),h.find(".hotelQuickView").addClass("loadingLayer"),e.append(h),e.data("inspire-me-slug"))$.ajax({url:Routing.generate("rc_inspire_me_update_result_view."+settingsLocalization.sLanguageMin,{slugUrl:e.data("inspire-me-slug")}),method:"POST",data:{id:b.id},success:function(b){if(b.status===a){c[b.id]=b.content;var d=$(b.content),f=e.find("div[data-action=result-item][data-id="+b.id+"]");f.find(".hotelQuickView").remove(),f.html(d.html()),$("#js-inspire-title").show(),$("#js-inspire-title-number").show(),initAndAjax()}else{var f=e.find("div[data-action=result-item][data-id="+b.id+"]");f.remove()}}});else{var i={id:b.id,type:d,parent_type:(f+"").toLowerCase()};n.commissions&&void 0!==n.commissions[b.synxis]&&(i.commission=n.commissions[b.synxis]),$.ajax({url:Routing.generate("rc_app_search_result."+settingsLocalization.sLanguageMin,i),method:"GET",success:function(b){if(b.status===a){c[b.id]=b.content;var d=$(b.content),f=e.find("div[data-action=result-item][data-type="+b.type+"][data-id="+b.id+"]");f.find(".hotelQuickView").remove(),f.html(d.html()),$("#js-inspire-title").show(),$("#js-inspire-title-number").show(),initAndAjax()}else{var f=e.find("div[data-action=result-item][data-type="+b.type+"][data-id="+b.id+"]");f.remove()}}})}}else{var j=c[b.id],k=$(j),l=k.find(".addFavorite").data("id"),m=$("[data-action=input-favourite]").val(),o=void 0!==m&&""!=m?m.split(";").map(Number):[];-1!==$.inArray(l,o)&&k.find(".addFavorite").addClass("is-favorited"),e.append(k),initAndAjax()}}),$("body").trigger("find-results",[n.results])}if(bIsPhone){var q=$("[data-action=infinite-load]");q.length&&(q.data("results",q.data("results")+n.results.length),$(".paginationMeta em").html(q.data("results")),1==q.data("is-load")&&$(".paginationMeta").removeClass("hidden"),q.removeClass("is-hidden"),q.data("is-load",!0),q.data("triggered",!1),q.data("results")>=n.total&&q.addClass("is-hidden"))}void 0!=i&&(u.$refreshResults.removeClass("loading"),$("[data-action=result-container]").removeClass("is-hidden"),$("[data-action=result-total]").parent().removeClass("is-hidden")),m&&(d(j),e(k));var r=$("ul[data-action=result-pagination]"),s=$("[data-action=input-page]");r.data("page",1),r.attr("data-page",1),s.val(1)}),g=null},h),!1})})}}),$.fn.setFullscreenMedia=function(){$(this).each(function(a,b){var c=$(this);c.attr("width")/c.attr("height")>($("html").hasClass("portrait")?iWindowWidth/(iWindowHeight/3*2-$("header").height()):iWindowWidth/(iWindowHeight-$("header").height()))?c.css({maxWidth:"none",maxHeight:"100%"}):c.css({maxWidth:"100%",maxHeight:"none"})})};var sFunctionToLaunch,bPluginsGmapLoaded=!1,oParamsToLaunch,markerCluster=null,markerStopoverCluster=null,oInitGmaps={},oInfoBoxOptions={},aInfoBoxType=[],oGmapOptionsDefault={},oMarkersType={},aMarkerType=[],aPoiType=[],aForbidenClusterType=[];oMarkersType.images={},oMarkersType.shapes={},oMarkersType.anchor={};var google=null,initGmaps=function(){if(!bPluginsGmapLoaded)return!1;$.each(oInitGmaps,function(a,b){$("#"+a).not(".js-done").length&&(oInitGmaps[a]=void 0)}),$(".map").each(function(){var $map=$(this),sMapId=$map.attr("id");if(void 0==oInitGmaps[sMapId]&&$map.is(":visible")){$map.addClass("js-done"),oInitGmaps[sMapId]={},oInitGmaps[sMapId].$map=$map,oInitGmaps[sMapId].sMapId=sMapId;var oIbOpt=$.extend({},oInfoBoxOptions.common);oInitGmaps[sMapId].oIb=new InfoBox(oIbOpt);var oMapOptions=eval($map.data("map-options")),oLatLng=oMapOptions.LatLng,iZoom=oMapOptions.zoom||6,iMinZoom=oMapOptions.minZoom||(bIsPhone?2:3),iMaxZoom=oMapOptions.maxZoom||20;oInitGmaps[sMapId].iMinZoomPoiDefault=oMapOptions.iMinZoomPoiDefault||16,oInitGmaps[sMapId].oInitCenter=oLatLng,oInitGmaps[sMapId].oMarkers=oMapOptions.markers,oInitGmaps[sMapId].isPassport=oMapOptions.isPassport,oInitGmaps[sMapId].sTypeMap=oMapOptions.typeMap||"default",oInitGmaps[sMapId].sRoadName=oMapOptions.roadName||"",oInitGmaps[sMapId].oPolylines=oMapOptions.polylines,oInitGmaps[sMapId].oBoundsDisplay=oMapOptions.boundsDisplay||null,oInitGmaps[sMapId].sMarkersPathAjax=oMapOptions.ajaxMarkersPath||null,oInitGmaps[sMapId].sMarkersToIgnore=oMapOptions.sMarkersToIgnore||"",oInitGmaps[sMapId].sInfoBoxPathAjax=oMapOptions.ajaxInfoBoxPath||null,oInitGmaps[sMapId].sPoiPathAjax=oMapOptions.ajaxPoiPath||null,oInitGmaps[sMapId].sInfoBoxPoiPathAjax=oMapOptions.ajaxInfoBoxPoiPath||null,oInitGmaps[sMapId].oPoiToShow=oMapOptions.oPoiToShow||{},oInitGmaps[sMapId].$mapWrapper=$map.closest(".mapWrapper"),oInitGmaps[sMapId].$overmapWrap=$map.closest(".overmapWrap"),oInitGmaps[sMapId].$formLinked=$('form[data-map-linked="'+sMapId+'"]'),oInitGmaps[sMapId].$refreshResults=oInitGmaps[sMapId].$mapWrapper.find(".refreshResults"),oInitGmaps[sMapId].$btnsZoom=oInitGmaps[sMapId].$mapWrapper.find(".mapZoom button");var oGmapOptions=$.extend({},oGmapOptionsDefault.common,{center:oLatLng,zoom:iZoom,minZoom:iMinZoom,maxZoom:iMaxZoom,sMapId:sMapId,scrollwheel:!1});if(oInitGmaps[sMapId].map=new google.maps.Map(document.getElementById(sMapId),oGmapOptions),oInitGmaps[sMapId].$refreshResults.length&&(oInitGmaps[sMapId].$refreshResultsCheckBox=oInitGmaps[sMapId].$refreshResults.find('input[type="checkbox"]'),oInitGmaps[sMapId].map.bRefreshResults=oInitGmaps[sMapId].$refreshResultsCheckBox.is(":checked"),oInitGmaps[sMapId].$refreshResultsCheckBox.on("change",function(){var a=$(this).closest(".mapWrapper").find(".map").attr("id"),b=oInitGmaps[a];b.$formLinked,b.map.bRefreshResults=b.$refreshResultsCheckBox.is(":checked"),b.map.bRefreshResults&&(google.maps.event.trigger(b.map,"bounds_changed"),google.maps.event.trigger(b.map,"idle"))}),oInitGmaps[sMapId].map.bNoRefreshAtLoad=!oInitGmaps[sMapId].map.bRefreshResults,oInitGmaps[sMapId].map.bNoRefreshAtLoad&&(google.maps.event.trigger(oInitGmaps[sMapId].map,"bounds_changed"),google.maps.event.trigger(oInitGmaps[sMapId].map,"idle"),setTimeout(function(){oInitGmaps[sMapId].map.bNoRefreshAtLoad=!1},2e3))),oInitGmaps[sMapId].$btnsZoom.data({nbClick:0}),oInitGmaps[sMapId].$btnsZoom.on("click",function(){var a=$(this),b=a.data("nbClick");if(b+=1,a.data({nbClick:b}),1==b){var c=$(this).closest(".mapWrapper").find(".map").attr("id"),d=oInitGmaps[c],e=$(this).hasClass("zoomOut")?-1:1,f=-1==e?-.5:1,g=(d.iCurrentZoomLevel,-1==e?iMinZoom:iMaxZoom);d.iCurrentZoomLevel!=g&&(d.map.setZoom(d.iCurrentZoomLevel+e),d.map.panBy(f*(d.oBoundsDelta.left-d.oBoundsDelta.right)/2,f*(d.oBoundsDelta.top-d.oBoundsDelta.bottom)/2)),setTimeout(function(){a.data({nbClick:0})},500)}}),oInitGmaps[sMapId].setDimGmap=function(){
var a=this,b=a.$map,c=a.$mapWrapper,d=c.find(".edge.top")?c.find(".edge.top").height():0,e=c.find(".edge.bottom")?c.find(".edge.bottom").height():0,f=c.find(".edge.left")?c.find(".edge.left").width():0,g=c.find(".edge.right")?c.find(".edge.right").width():0;a.oMapDim={width:b.width(),height:b.height()},a.oBoundsDelta={top:d,right:g,bottom:e,left:f},a.oMapBoundsDim={width:a.oMapDim.width-a.oBoundsDelta.left-a.oBoundsDelta.right,height:a.oMapDim.height-a.oBoundsDelta.top-a.oBoundsDelta.bottom},a.oMapBoundsPos={top:a.oBoundsDelta.top,right:a.oBoundsDelta.left+a.oMapBoundsDim.width,bottom:a.oBoundsDelta.top+a.oMapBoundsDim.height,left:a.oBoundsDelta.left}},oInitGmaps[sMapId].setOldDimGmap=function(){var a=this;a.oMapOldDim={width:a.oMapDim.width,height:a.oMapDim.height},a.oMapOldBoundsDim={width:a.oMapBoundsDim.width,height:a.oMapBoundsDim.height}},oInitGmaps[sMapId].resizeGmap=function(){var a=this;google.maps.event.trigger(a.map,"resize");var b={top:0,left:0};a.setOldDimGmap(),a.setDimGmap(),b.left=(a.oMapBoundsDim.width-a.oMapOldBoundsDim.width)/2,b.top=(a.oMapBoundsDim.height-a.oMapOldBoundsDim.height)/2,a.map.panBy(-b.left,-b.top)},oInitGmaps[sMapId].aMarkers=[],oInitGmaps[sMapId].aPolylines=[],oInitGmaps[sMapId].aPoi=[],oInitGmaps[sMapId].aMarkersCluster=[],oInitGmaps[sMapId].setDimGmap(),oInitGmaps[sMapId].addUpdateMarker=function(a,b,c){var c=c||"Markers";this["o"+c+"ToDisplay"][a]?this.updateMarker(a,b,c):this.addMarker(a,b,c)},oInitGmaps[sMapId].addMarker=function(a,b,c){var c=c||"Markers";this["o"+c+"ToDisplay"][a]=b,this["aNew"+c+"ToDisplay"].push(b)},oInitGmaps[sMapId].updateMarker=function(a,b,c){var c=c||"Markers",d=this["o"+c+"ToDisplay"][a].marker,e=getGoodMarkerType(b);if(void 0!==d){var f=d.type;d.content=null,d.setOptions({title:"Markers"==c?b.entities[0].name||"":b.name}),e==f&&d.nbEntities==b.nbEntities||(this.removeMarker(a,c),this.addMarker(a,b,c))}},oInitGmaps[sMapId].removeMarker=function(a,b){var b=b||"Markers";this["o"+b+"ToDisplay"][a].marker.setMap(null),delete this["o"+b+"ToDisplay"][a]},oInitGmaps[sMapId].updateMarkersToDisplay=function(a,b){var b=b||"Markers",c=this,d=c.oRealBounds,e=c.map.getZoom();!bOnlyInte&&"Markers"==b&&c.$formLinked.length&&$.each(c["o"+b+"ToDisplay"],function(d,e){var f=!1;$.each(a,function(a,b){b.id==d&&(f=!0)}),f||c.removeMarker(d,b)}),$.each(a,function(a,f){var g=f.id,h="Poi"!=b?0:f.zoomLevel?f.zoomLevel:c.iMinZoomPoiDefault,i="Poi"!=b||c.oPoiToShow[f.type];bOnlyInte&&!$(".inspireMeResults").length||"Markers"!=b?i&&e>=h&&f.location.lat>=d.south&&f.location.lat<=d.north&&(d.west<d.east&&f.location.lng>=d.west&&f.location.lng<=d.east||d.west>d.east&&(f.location.lng<=d.east&&f.location.lng>=-180||f.location.lng>=d.west&&f.location.lng<=180))?c.addUpdateMarker(g,f,b):c["o"+b+"ToDisplay"][g]&&c.removeMarker(g,b):c.addUpdateMarker(g,f,b)})},oInitGmaps[sMapId].displayAjaxMarkers=function(a,b){var c=this,b=b||"Markers",d=a,e="Markers"==b?c.sInfoBoxPathAjax:c.sInfoBoxPoiPathAjax,f=c.oRealBounds;c["aNew"+b+"ToDisplay"]=[],!c.map.bRefreshResults&&"Markers"==b&&c.$formLinked.length&&(f.north=c.$formLinked.find(".boundsNorthEastLat").val(),f.east=c.$formLinked.find(".boundsNorthEastLng").val(),f.south=c.$formLinked.find(".boundsSouthWestLat").val(),f.west=c.$formLinked.find(".boundsSouthWestLng").val()),"Markers"==b&&(oInitGmaps[sMapId].aMarkersCluster=[]),c["o"+b+"ToDisplay"]||(c["o"+b+"ToDisplay"]={}),c.updateMarkersToDisplay(d,b),$.each(c["aNew"+b+"ToDisplay"],function(a,d){var f=getGoodMarkerType(d),g="Poi"==b?"poi":d.infoBoxType&&-1!=$.inArray(d.infoBoxType,aInfoBoxType)?d.infoBoxType:"default",h={position:d.location?d.location:new google.maps.LatLng(d.location.lat,d.location.lng),id:d.id,title:"Markers"==b?d.entities[0].name||"":d.name,entities:"Markers"==b?d.entities:null,nbEntities:"Markers"==b?d.nbEntities:null,type:f,infoBoxType:g,icon:{url:oMarkersType.images[f],anchor:oMarkersType.anchor[f]},shape:oMarkersType.shapes[f],opacity:"rdb"==c.sTypeMap?d.opacity?d.opacity:.7:1,pathAjax:e,content:null,map:c.map,sMapId:sMapId},i={draggable:!1,labelContent:d.nbEntities,labelAnchor:new google.maps.Point(0,0),labelClass:"markerLabel nbEntities"+("rdb"==c.sTypeMap?" faded":""),labelInBackground:!1};d.marker="Markers"==b&&d.nbEntities>1?new MarkerWithLabel($.extend({},h,i)):new google.maps.Marker(h),null==d.content&&null==e||google.maps.event.addListener(d.marker,"click",function(a){var b=this,c=b.map,d=b.sMapId,e=oInitGmaps[d],f=function(){var a=new google.maps.OverlayView;a.onAdd=function(){var a=this.getProjection(),d=a.fromLatLngToContainerPixel(b.getPosition()),f=25,g=25,h=e.oIb.infoBoxClearance_.width-e.oIb.pixelOffset_.width,i=d.x-e.oMapBoundsPos.left-h+f,j=e.oMapBoundsPos.right-d.x-h+g;i<0?c.panBy(i,0):j<0&&c.panBy(-j,0),infoBoxOpen(e.oIb,c,b)},a.draw=function(){},a.setMap(c)};e.oIb.setOptions(oInfoBoxOptions[b.infoBoxType]),!b.content&&b.pathAjax?$.ajax({url:b.pathAjax,method:"POST",data:{entities:b.entities?b.entities:[{id:b.id,name:b.title,type:b.type}]},success:function(a){if("null"==a)return console.error("error ajax loaded : response = null"),!1;b.content=a,e.oIb.setContent('<div class="infoBoxContent">'+a+"</div>"),f()},error:function(a){console.error("error ajax loaded")}}):b.content&&(e.oIb.setContent('<div class="infoBoxContent">'+b.content+"</div>"),f())})}),"Markers"==b&&($.each(c.oMarkersToDisplay,function(a,b){c.aMarkersCluster.push(b.marker)}),null!=markerCluster&&markerCluster.clearMarkers(),c.aMarkersCluster.length&&(markerCluster=new MarkerClusterer(c.map,c.aMarkersCluster,{styles:[{url:settingsGlobal.sRootPath+settingsGlobal.sMarkerPath+"cluster.png",width:42,height:42,textColor:"#000",anchorClass:"cluster"+("rdb"==c.sTypeMap?" faded":"")}],averageCenter:!0,gridSize:55}),google.maps.event.addListener(markerCluster,"click",function(){var a=this,b=a.map;setTimeout(function(){var a=$(".map").closest(".mapWrapper"),c=a.find(".edge.right");c=c.outerWidth()/2,b.panBy(c,-24)},0)})))},oInitGmaps[sMapId].checkMarkerPostion=function(a){var b=this,c=b.map,d=b.$mapWrapper,e=$map.find(".stopOver"+a);if(0!=$(e).length){var f=100,g={x:e.offset().left+e.width()/2,y:e.offset().top+e.height()/2,deltaX:0,deltaY:0},h={top:d.find(".edge.top").offset().top+d.find(".edge.top").height()+f,bottom:d.find(".edge.bottom").offset().top-f,right:d.find(".edge.right").offset().left-f,left:d.find(".edge.left").offset().left+d.find(".edge.left").width()+f};g.x>h.right?g.deltaX=h.right-g.x:g.x<h.left&&(g.deltaX=h.left-g.x),g.y>h.bottom?g.deltaY=h.bottom-g.y:g.y<h.top&&(g.deltaY=h.top-g.y),0==g.deltaX&&0==g.deltaY||c.panBy(-g.deltaX,-g.deltaY)}},oInitGmaps[sMapId].activeStopOveMarker=function(a){var b=this,c=b.$map;c.find(".stopOver").removeClass("active"),c.find(".stopOver"+a).addClass("active")},oInitGmaps[sMapId].displayMarkers=function(){var a=this,b=a.oMarkers,c=a.sInfoBoxPathAjax,d=a.sInfoBoxPoiPathAjax;if(a.oMarkersStopoverCluster={},b){var e=$.map(b,function(a,b){return b}).length,f=$(".routeCityStep").length?$(".routeCityStep.active").attr("data-marker-linked"):$(".innerOvermapContent .routeStep.active").attr("data-marker-linked");$.each(b,function(b,g){var h=g.type&&-1!=$.inArray(g.type,aMarkerType)?g.type:"default",i=void 0!=g.stopover?"stopover":h,j=g.infoBoxType&&-1!=$.inArray(g.infoBoxType,aInfoBoxType)?g.infoBoxType:"default",k={position:g.location?g.location:new google.maps.LatLng(g.LatLng.lat,g.LatLng.lng),id:b,title:g.name||"",type:i,infoBoxType:j,static:!0,icon:{url:oMarkersType.images[i],anchor:oMarkersType.anchor[i]},shape:oMarkersType.shapes[i],pathAjax:"poi"==j?d:c,content:g.content&&("poi"==j&&null==d||null==c)?g.content:null,map:a.map,sMapId:sMapId},l=g.stopover||0,m={draggable:!1,labelContent:l,labelAnchor:new google.maps.Point(0,0),labelClass:"markerLabel "+h+" stopOver stopOver"+b+(b==f?" active":""),labelInBackground:!1},n=void 0!=g.stopover?new MarkerWithLabel($.extend({},k,m)):new google.maps.Marker(k);e>=1&&(a.aMarkers.push(n),"rdb"==a.sTypeMap||a.isPassport||a.aMarkersCluster.push(n),"stopover"==i&&(a.oMarkersStopoverCluster[l]||(a.oMarkersStopoverCluster[l]={markers:[],markersClusterer:null}),a.oMarkersStopoverCluster[l].markers.push(n))),null==g.content&&null==c&&"stopover"!=i||google.maps.event.addListener(n,"click",function(a){var b=this,c=b.map,d=b.sMapId,e=oInitGmaps[d];if(e.oIb.setOptions(oInfoBoxOptions[b.infoBoxType]),"stopover"==b.type)if(e.isPassport){var f=$('[data-marker-linked="'+b.id+'"]').offset().top-120;$("html, body").animate({scrollTop:f})}else{var g=$('.routeCityStep[data-marker-linked="'+b.id+'"]'),h=g.offset().top-$window.height()/2+g.height()/2;$("html, body").animate({scrollTop:h})}else!b.content&&b.pathAjax?$.ajax({url:b.pathAjax,method:"POST",data:{entities:[{id:b.id,type:b.type,name:b.title}]},success:function(a){if("null"==a)return console.error("error ajax loaded : response = null"),!1;b.content=a,e.oIb.setContent('<div class="infoBoxContent">'+a+"</div>"),infoBoxOpen(e.oIb,c,b)},error:function(a){console.error("error ajax loaded")}}):b.content&&(e.oIb.setContent('<div class="infoBoxContent">'+b.content+"</div>"),infoBoxOpen(e.oIb,c,b))})}),a.aMarkersCluster.length>1&&(markerCluster=new MarkerClusterer(a.map,a.aMarkersCluster,{styles:[{url:settingsGlobal.sRootPath+settingsGlobal.sMarkerPath+"cluster.png",width:42,height:42,textColor:"#000"}],averageCenter:!0,gridSize:50}),google.maps.event.addListener(markerCluster,"click",function(){var a=this,b=a.map;setTimeout(function(){var a=$(".map").closest(".mapWrapper"),c=a.find(".edge.right");c=c.outerWidth()/2,b.panBy(c,-24)},0)})),Object.size(a.oMarkersStopoverCluster)&&$.each(a.oMarkersStopoverCluster,function(b,c){c.markers.length>1&&(c.markersClusterer=new MarkerClusterer(a.map,c.markers,{styles:[{url:settingsGlobal.sRootPath+settingsGlobal.sMarkerPath+"cluster.png",width:30,height:30,textColor:"#000",anchorClass:"clusterStopOver"}],averageCenter:!0,gridSize:50}))})}a.oPolylines&&($.each(a.oPolylines,function(b,c){var d=c.path,e=[],f="";for(e=google.maps.geometry.encoding.decodePath(d),i=0;i<e.length;i+=1)f+="B";if(e.length){var g=new google.maps.Polyline({path:e,geodesic:!0,strokeColor:"#c8ac7c",strokeOpacity:1,strokeWeight:5});g.setMap(a.map),a.aPolylines.push(g)}}),a.oMarkerRoad=new google.maps.Marker({position:a.oInitCenter,title:a.sRoadName,icon:{url:oMarkersType.images.rdb,anchor:oMarkersType.anchor.rdb},shape:oMarkersType.shapes.rdb,map:a.map,sMapId:sMapId}),a.oMarkerRoad.setMap(null),google.maps.event.addListener(a.oMarkerRoad,"click",function(a){var b=this,c=b.map,d=oInitGmaps[b.sMapId];d.oMarkerBounds&&(d.$map.width(d.oMapBoundsDim.width),d.$map.height(d.oMapBoundsDim.height),google.maps.event.trigger(c,"resize"),c.fitBounds(d.oMarkerBounds),setTimeout(function(){d.$map.width("100%"),d.$map.height("100%"),google.maps.event.trigger(c,"resize"),c.panBy(-d.oBoundsDelta.left,-d.oBoundsDelta.top)},0))}))},oInitGmaps[sMapId].displayMarkers(),oInitGmaps[sMapId].loadAjaxMarkers=function(){var a=this;$.ajax({url:a.sMarkersPathAjax,method:"POST",data:{markersToIgnore:a.sMarkersToIgnore},success:function(b){a.aMarkersLoaded=[];for(var c=0;c<b.length;c+=1){for(var d=!1,e=0;e<a.aMarkers.length;e+=1)if(b[c].id==a.aMarkers[e].id){d=!0;break}d||a.aMarkersLoaded.push(b[c])}a.displayAjaxMarkers(a.aMarkersLoaded,"Markers")},error:function(a){console.error("error ajax loaded")}})},oInitGmaps[sMapId].loadAjaxPoiMarkers=function(){var a=this;$.ajax({url:a.sPoiPathAjax,method:"POST",data:{poiToShow:a.oPoiToShow},success:function(b){a.aPoiMarkersLoaded=b,a.displayAjaxMarkers(a.aPoiMarkersLoaded,"Poi")},error:function(a){console.error("error ajax loaded")}})},oInitGmaps[sMapId].centerMapAtLoad=function(a){var b=this;if(null==b.oBoundsDisplay)var c=b.map.getCenter();var d={x:0,y:0};b.$map.width(b.oMapBoundsDim.width+d.x),b.$map.height(b.oMapBoundsDim.height+d.y);var e,f=function(){b.$map.width("100%"),b.$map.height("100%"),google.maps.event.trigger(b.map,"resize"),b.map.panBy(b.oBoundsDelta.right/2,-b.oBoundsDelta.top+d.y/2)};if(google.maps.event.trigger(b.map,"resize"),null==b.oBoundsDisplay)b.map.setCenter(c),e=google.maps.event.addListener(b.map,"idle",function(){f(),google.maps.event.removeListener(e)});else{b.oMarkerBounds=new google.maps.LatLngBounds;var g=b.oBoundsDisplay.northEast,h=b.oBoundsDisplay.southWest,i=new google.maps.LatLng(g.lat,g.lng),j=new google.maps.LatLng(h.lat,h.lng);g.lat,h.lat,h.lng,g.lng,b.oMarkerBounds.extend(i),b.oMarkerBounds.extend(j),b.map.fitBounds(b.oMarkerBounds),e=google.maps.event.addListener(b.map,"idle",function(){b.map.getZoom()>14&&b.map.setZoom(14),f(),google.maps.event.removeListener(e)})}},oInitGmaps[sMapId].centerMapAtLoad(),oInitGmaps[sMapId].$formLinked.length&&oInitGmaps[sMapId].$formLinked.find("[data-poi-map]").length){var $checkboxPoi=oInitGmaps[sMapId].$formLinked.find("[data-poi-map]");$checkboxPoi.data({oGmap:oInitGmaps[sMapId]}),$checkboxPoi.on("change",function(){var a=$(this).data("oGmap"),b=$(this).val();a.oPoiToShow[b]=$(this).is(":checked"),a.displayAjaxMarkers(a.aPoiMarkersLoaded,"Poi")})}var bMobileFirstLoadMapPage=bIsPhone;google.maps.event.addListener(oInitGmaps[sMapId].map,"idle",function(){var a=this,b=oInitGmaps[a.sMapId],c=b.$overmapWrap,d=b.$mapWrapper,e=b.$formLinked;b.iPreviousZoomLevel=b.iCurrentZoomLevel||b.map.getZoom(),b.iCurrentZoomLevel=b.map.getZoom();var f=new google.maps.OverlayView;f.onAdd=function(){var f=this.getProjection(),g=f.fromContainerPixelToLatLng({x:b.oBoundsDelta.left+b.oMapBoundsDim.width,y:b.oBoundsDelta.top}),h=f.fromContainerPixelToLatLng({x:b.oBoundsDelta.left,y:b.oBoundsDelta.top+b.oMapBoundsDim.height});if(f.fromContainerPixelToLatLng({x:b.oBoundsDelta.left+b.oMapBoundsDim.width/2,y:b.oBoundsDelta.top+b.oMapBoundsDim.height/2}),b.oRealBounds={north:g.lat(),south:h.lat(),west:h.lng(),east:g.lng()},null!=b.sPoiPathAjax&&(b.aPoiMarkersLoaded?b.displayAjaxMarkers(b.aPoiMarkersLoaded,"Poi"):b.loadAjaxPoiMarkers()),null!=b.sMarkersPathAjax&&(b.aMarkersLoaded?b.displayAjaxMarkers(b.aMarkersLoaded,"Markers"):b.loadAjaxMarkers()),e.length&&(b.map.bRefreshResults||b.map.bNoRefreshAtLoad)&&(!bIsPhone||bMobileFirstLoadMapPage||c.hasClass("mapView"))&&(void 0!=b.idTimeoutIdle&&clearTimeout(b.idTimeoutIdle),b.idTimeoutIdle=setTimeout(function(){b.map.bNoRefreshAtLoad||(e.find(".boundsNorthEastLat").val(b.oRealBounds.north),e.find(".boundsNorthEastLng").val(b.oRealBounds.east),e.find(".boundsSouthWestLat").val(b.oRealBounds.south),e.find(".boundsSouthWestLng").val(b.oRealBounds.west)),e.trigger("submit"),b.idTimeoutIdle=void 0},1e3)),"rdb"==b.sTypeMap){var i={minWidth:150,minHeight:150,northEast:f.fromLatLngToContainerPixel(new google.maps.LatLng(b.oBoundsDisplay.northEast.lat,b.oBoundsDisplay.northEast.lng)),southWest:f.fromLatLngToContainerPixel(new google.maps.LatLng(b.oBoundsDisplay.southWest.lat,b.oBoundsDisplay.southWest.lng))};i.width=i.northEast.x-i.southWest.x,i.height=i.southWest.y-i.northEast.y,b.bRoadIsVisible=b.bRoadIsVisible||null,b.bRoadChangeState=!1,b.iCurrentZoomLevel!=b.iPreviousZoomLevel&&(i.width<i.minWidth&&i.height<i.minHeight?((null==b.bRoadIsVisible||b.bRoadIsVisible)&&(b.bRoadChangeState=!0),b.bRoadIsVisible=!1):(null!=b.bRoadIsVisible&&b.bRoadIsVisible||(b.bRoadChangeState=!0),b.bRoadIsVisible=!0),b.bRoadChangeState&&($.each(b.oMarkersStopoverCluster,function(a,b){null!=b.markersClusterer&&b.markersClusterer.clearMarkers()}),b.bRoadIsVisible?($.each(b.aMarkers,function(b,c){c.setMap(a)}),$.each(b.aPolylines,function(b,c){c.setMap(a)}),b.oMarkerRoad.setMap(null),$.each(b.oMarkersStopoverCluster,function(a,c){c.markersClusterer=new MarkerClusterer(b.map,c.markers,{styles:[{url:settingsGlobal.sRootPath+settingsGlobal.sMarkerPath+"cluster.png",width:30,height:30,textColor:"#000",anchorClass:"clusterStopOver"}],averageCenter:!0,gridSize:50})})):($.each(b.aMarkers,function(a,b){b.setMap(null)}),$.each(b.aPolylines,function(a,b){b.setMap(null)}),b.oMarkerRoad.setMap(a))))}d.hasClass("showEdges")&&(b.oPolygonEdges&&b.oPolygonEdges.setMap(null),b.oPolygonEdges=new google.maps.Polygon({paths:[new google.maps.LatLng(b.oRealBounds.north,b.oRealBounds.west),new google.maps.LatLng(b.oRealBounds.north,b.oRealBounds.east),new google.maps.LatLng(b.oRealBounds.south,b.oRealBounds.east),new google.maps.LatLng(b.oRealBounds.south,b.oRealBounds.west)],strokeColor:"#0000FF",strokeOpacity:.5,strokeWeight:2,fillOpacity:0,map:a}))},f.draw=function(){},f.setMap(a)}),oInitGmaps[sMapId].$refreshResults.length&&google.maps.event.addListener(oInitGmaps[sMapId].map,"bounds_changed",function(){var a=this;!oInitGmaps[a.sMapId].map.bRefreshResults||bIsPhone&&!oInitGmaps[a.sMapId].$overmapWrap.hasClass("mapView")||oInitGmaps[a.sMapId].$refreshResults.addClass("loading")}),google.maps.event.addListener(oInitGmaps[sMapId].map,"zoom_changed",function(){var a=this,b=oInitGmaps[a.sMapId].$btnsZoom;b.removeAttr("disabled"),a.getZoom()==a.minZoom?b.filter(".zoomOut").attr({disabled:"disabled"}):a.getZoom()==a.maxZoom&&b.filter(".zoomIn").attr({disabled:"disabled"})}),google.maps.event.trigger(oInitGmaps[sMapId].map,"zoom_changed")}})};$(".fullmap-container").length&&mapPanelToggler(".fullmap-container");var setOrientation=function(){iWindowHeight<iWindowWidth?$("html").removeClass("portrait").addClass("landscape"):$("html").removeClass("landscape").addClass("portrait")},uploadPic=function(){var a=$(".profilePic"),b=a.find('[type="file"]');a.on("click",".icon , .btn",function(){b.trigger("click")}),b.change(function(){var b=$(this).val();a.find(".btn").text(b)})},initRangeSlider=function(){$(".rangeSlider").not(".js-done").each(function(){var a=$(this),b=a.data("separator-thousand"),c=a.data("separator-decimal"),d=a.data("range-min"),e=a.data("range-max"),f=a.data("range-id"),g=a.data("range-unit"),h=$('[data-range-start="'+f+'"]'),i=$('[data-range-end="'+f+'"]');a.addClass("js-done"),a.noUiSlider({start:[""!=h.val()?h.val():d,""!=i.val()?i.val():e],connect:!0,range:{min:d,max:e},format:wNumb({decimals:0})}),a.Link("upper").to('-inline-<div class="rangeTip"></div>',function(a){$(this).html(g.replace("XXX","<span>"+range_number_format(a,0,c,b)+"</span>")),$(this).children("span").html(range_number_format(a,0,c,b))}),a.Link("lower").to('-inline-<div class="rangeTip"></div>',function(a){$(this).html(g.replace("XXX","<span>"+range_number_format(a,0,c,b)+"</span>")),$(this).children("span").html(range_number_format(a,0,c,b))}),a.Link("lower").to(h),a.Link("upper").to(i)})},initRevealer=function(){$(".revealer").each(function(){var a=$(this),b=a.find("> .revealerContent");a.on("click","> .revealerButton .btn",function(){if(a.hasClass("opened"))a.removeClass("opened"),b.css({height:"auto"}).animate({height:0},500);else{b.css({position:"absolute",visibility:"hidden",height:"auto"});var c=b.height();a.addClass("opened"),b.css({position:"static",visibility:"visible",height:0}).animate({height:c},500,function(){$(this).css("height","auto")})}})})};$(function(){$.fn.manageTabSwitcher=function(){$(this).each(function(){var a=$(this),b=a.find(".tabNav"),c=a.find(".tabDetail");b.data({$tabSwitcher:a,$tabNav:b,$tabDetail:c}),b.each(function(){$(this).on("click",function(a){a.preventDefault();var b=$(this),c=b.data("tab"),d=(b.data("$tabSwitcher"),b.data("$tabNav")),e=b.data("$tabDetail");if(!$(this).data("tab"))return console.warn("Aie ! data-tab is not defined on .tabNav"),!1;var f=e.filter('[data-tab="'+c+'"]');return f.length?!$(this).hasClass("active")&&(d.removeClass("active"),e.removeClass("active"),b.addClass("active"),void f.addClass("active")):(console.warn("Aie ! .tabDetail has no datatab : "+c+" associated"),!1)})})})}});var displayQuickAccessNav=function(){$("body").on("click",".userWrap",function(){$(this).toggleClass("opened")});var a=$(".userWrap");$(document).mouseup(function(b){a.is(b.target)||0!==a.has(b.target).length||a.removeClass("opened")})};if($(function(){$.fn.switchView=function(){$(this).each(function(){var a=!1,b=$(this),c=b.find(".overmapContent"),d=b.find(".overmapFooter"),e=b.find("#triggerMapView"),f=b.find("#triggerListView"),g=null,h=function(){if(null==g){var a=b.find(".map").attr("id");g=oInitGmaps[a]}g.resizeGmap()};e.length&&f.length&&(e.on("click",function(){b.hasClass("mapView")||!1===a&&(a=!0,e.addClass("active").siblings().removeClass("active"),b.addClass("mapViewEdges"),h(),c.animate({right:-940},700,function(){var c=$(this);b.addClass("mapView"),c.animate({right:-320},500,function(){c.removeAttr("style"),a=!1}),$(window).scrollTop(0)}),d.animate({right:-940},700))}),f.on("click",function(){b.hasClass("mapView")&&!1===a&&(a=!0,b.removeClass("mapViewEdges"),h(),f.addClass("active").siblings().removeClass("active"),c.animate({right:-940},700,function(){b.removeClass("mapView"),$(this).animate({right:0},500,function(){a=!1}),d.animate({right:0},500),c.find(".defaultSlider").slick("setPosition")}))})),b.on("click",".showFilters",function(){c.toggleClass("opened"),b.toggleClass("filtersOpened"),h()}),$(window).on("keydown",function(a){9==a.keyCode&&!c.hasClass("opened")&&b.hasClass("mapView")&&a.preventDefault()})})}}),$("#toc").length&&$("#toc").tocify({context:".richText",selectors:"h2, h3, h4, h5",history:!1}),FixedSticky.tests.sticky=!1,Modernizr.addTest("csssticky",function(){var a;return Modernizr.testStyles("#modernizr { position: -webkit-sticky;position: -moz-sticky;position: -o-sticky; position: -ms-sticky; position: sticky;}",function(b,c){a=-1!==(window.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position.indexOf("sticky")}),a}),Object.entries||(Object.entries=function(a){for(var b=Object.keys(a),c=b.length,d=new Array(c);c--;)d[c]=[b[c],a[b[c]]];return d}),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}),Modernizr.addTest("objectfit",!!Modernizr.prefixed("objectFit")),$(function(){function a(){$(".rc-GiftCard").not(".rc-GiftCard-check").each(function(){var a=JSON.parse($(this).attr("data-product"));void 0!==a&&a!=={}&&"undefined"!=typeof dataLayer&&$(this).find("[data-product-link]").on("click",function(b){b.preventDefault(),dataLayer.push({event:"productClick",ecommerce:{currencyCode:"EUR",click:{actionField:{list:a.list},products:[{name:a.name,id:a.id,price:a.price,category:a.category,list:a.list,position:a.position,brand:"gift"}]}}}),window.location=$(this).attr("href")})})}if($window=$(window),setDynamicViewport(),initAndAjax(),$(".linkParent").length>0&&$(".linkParent").addLinkBlock(),"true"===$("body").attr("data-menuExpanded")?$("body").addClass("menuExpanded"):$(".firstLevel-gift-link").removeClass("no-focus"),appNav(),$("body").on("click",".bannerScrollDown",function(){var a;a=$(".hotelHeader").length?$(".hotelHeader"):$(".bannerImageDefault");var b=a.height();$("html,body").animate({scrollTop:b},500)}),$("#etablissement-room-list").length){var b=document.getElementById("etablissement-room-list"),c={attributes:!0,childList:!1,subtree:!1},d=function(b){for(var c=0;c<b.length;c++)if("include_200"===b[c].target.className){a();break}$("body").is(".hotel")&&"#giftTab"===window.location.hash&&$(".propertyBookingNav").find("#buyGiftBtn").trigger("click")};new MutationObserver(d).observe(b,c)}else a();$(".homeSlideDown").on("click",function(){var a=$("#homeMedia"),b=a.offset().top,c=a.height(),d=b+c;$("html,body").animate({scrollTop:d-60},500)});try{if($("#homeMedia-video").length)$("#homeMedia-video").setFullscreenMedia();else if($("#homeMedia-diaporama").length){var e=$("#homeMedia-diaporama").children(".homeMedia-img");e.setFullscreenMedia();var f=parseInt($("#homeMedia-diaporama").attr("data-speed"),10),g=e.length;if(e.each(function(a,b){$(this).attr("width")}),g>1){e.eq(0).addClass("active");var h=1;echo.init({unload:!1,callback:function(a,b){++h==g&&setInterval(function(){var a=e.filter(function(a,b){return $(this).hasClass("active")});a.removeClass("active"),a.next().length?a.next().addClass("active"):e.eq(0).addClass("active")},f)}}),$window.on("resize",function(){var a=bIsPhone?Math.min($window.width(),$window.height()):$window.height();$("#homeMedia").height(a-(bIsPhone?60:130))})}else e.eq(0).addClass("active")}}catch(a){console.log(a)}appFooter(),$(".tabFooterShare, .popinSocialShare").length&&socialCount();var i="";$("body").hasClass("home")?i="home":$("body").hasClass("hotel")?i="hotel":$("body").hasClass("chef")?i="chef":$("body").hasClass("rc-GiftProductView")&&(i="giftProduct"),(bIsPhone||""!==i)&&eventScroll(i),$("body").on("click",".jsTrigger",function(a){a.preventDefault();var b=$(this).data("trigger");b.length&&$(b).trigger("click")}),$("body").on("click",".close-cnil",function(a){a.preventDefault(),$("#cookie_account_accept").submit()}),$("body").on("click",".jsClose-msg",function(a){a.preventDefault(),$("body").removeClass("error-isvisible cnil-isvisible"),$(this).parent(".displayMsg").remove()}),$("body").on("click",".jsScrollTo",function(a){a.preventDefault();var b=$(this).attr("href");$("html,body").animate({scrollTop:$(b).offset().top+-70},1e3)}),$("body").on("click",'.btn.disabled, .btn[disabled="disabled"]',function(a){a.preventDefault()}),$("body").on("change",".ftrackChoose-select",function(){var a=$(this).find(":selected").data("id-typesearch"),b=$(this).find(":selected").data("placeholder");$(".fastTrack form").attr("id",a),$('.ftrackSearch input[type="text"]').attr("placeholder",b)}),$(".rmLoadingLayer").removeClass("loadingLayer"),$(document).on("click",function(a){var b=a.target;$(b).closest(".ftrackSearch").length||$(".ftrackSearchResults").is(":visible")&&$(".ftrackSearch").removeClass("is-opened"),$(b).closest(".autocompletePropertyResults").length||$(".autocompletePropertyResults").hasClass("is-opened")&&$(".autocompletePropertyResults").removeClass("is-opened"),$(b).closest(".has-price-detail").length||$(".has-price-detail").hasClass("is-opened")&&$(".has-price-detail").removeClass("is-opened")}),$("body").on("click",".basketItemHotel .expendItem",function(){$(this).closest(".basketItemHotel").toggleClass("is-opened")}),$("body").on("click",".seeDetails",function(){$(this).siblings(".details").slideToggle(function(){$(this).siblings(".seeDetails").toggleClass("is-opened")})}),$(".basketAside").length&&$(".basketAside").on("click",".basketAsideToolTip button",function(){$(this).parent().removeClass("is-opened")}),$("body").on("click",".trashItem",function(){var a=$(this).attr("data-referer");$("#popinDeleteProperty").attr("data-referer",a),$.colorbox({href:"#popinDeleteProperty",inline:!0})}),$("body").on("click","#deleteProperty-yes",function(){var a=$("#popinDeleteProperty").attr("data-referer");$("#"+a).css({border:"1px solid red"}),$.colorbox.close()}),$("body").on("click","#deleteProperty-no",function(){$.colorbox.close()}),$(".basketAside").length&&$(".basketAside").parent(".col-1-4").addClass("basketAsideContainer"),$(".rangeSlider").length&&initRangeSlider(),$(".revealer").length&&initRevealer(),hotelFn();var j=!1,k=!1,l=!1;if($(".jsSecondNav").length){if(Modernizr.history){var m=$(".jsSecondNavMain").find(".active").children(),n=m.attr("data-id"),o=window.location.href;history.replaceState(n,"",o)}$(".jsSecondNav").on("click","a",function(a){if(a.preventDefault(),!l){l=!0;var b=$(".ajaxPages"),c=$(".tableBooking").first(),d=$(".jsSecondNavSub"),e=$(this).attr("href"),f=$(this).attr("data-id").slice(2),g=$("#tab"+f);"Restaurants"==f&&$(".jsSecondNavSub").length&&(e=d.find("li").eq(0).find("a").attr("href"),f=d.find("li").eq(0).find("a").attr("data-id").slice(2),g=$("#tab"+f)),$(".ajaxContent.active").removeClass("active"),$(".jsSecondNav").find("li.active").removeClass("active");var h=this,i=function(){if("Property"==f&&1==j){if(bIsPhone)var a=setInterval(function(){var b=$(".propertyBookingTab.bookStayTab");if(b.length){var c=b.offset().top-scrollY();$("html, body").animate({scrollTop:b.offset().top-40-(c<0?60:0)},700),$(".js-triggerNavHotel").removeClass("loadingLayer"),clearInterval(a)}},100);else{console.log("in");var a=setInterval(function(){var b=$("#bookStayTabBtn");b.length&&(b.trigger("click"),$(".js-triggerNavHotel").removeClass("loadingLayer"),clearInterval(a))},100)}j=!1}else if("Property"==f&&1==triggerNavPlanATrip){if(bIsPhone)var a=setInterval(function(){var b=$(".propertyBookingTab.tripTab");if(b.length){var c=b.offset().top-scrollY(),d=$(".innerHotelHeader .priceTag .tagLabelOnly").length?50:0;$("html, body").animate({scrollTop:b.offset().top-d-(c<0?60:0)},700),$(".js-triggerNavHotel").removeClass("loadingLayer"),clearInterval(a)}},100);else var a=setInterval(function(){var b=$("#planATripTabBtn");b.length&&(b.trigger("click"),$(".js-triggerNavHotel").removeClass("loadingLayer"),clearInterval(a))},100);triggerNavPlanATrip=!1}else-1!=f.indexOf("Restaurant")&&1==k?$("html, body").animate({scrollTop:c.offset().top-114},700,function(){k=!1}):"Location"==f?$(".map").length&&loadPluginsGmap():(bIsPhone?setTimeout(function(){var a;a=$(".header").find(".priceTag").length?b.offset().top-30:b.offset().top,$("html, body").animate({scrollTop:a},700,function(){$("body").addClass("antiScroll-on")})},200):$("html, body").animate({scrollTop:b.offset().top-114},700),restaurantStaffManager())};if(g.length){var m=$("body").find("#tab"+f).attr("data-title");void 0!==m&&(document.title=m),i()}else $.ajax({url:e}).done(function(a){if(b.append(a),initAndAjax(),i(),"isProperty"==$(h).data("id")){if($("body").prepend($("#tabProperty").data("gtm-datalayer")),$("#etablissement-room-list").not(".include_200").length){var c=hinclude.get_meta("include_mode","buffered");if("async"===c)hinclude.set_content_async;else if("buffered"===c){hinclude.set_content_buffered;var d=1e3*hinclude.get_meta("include_timeout",2.5);setTimeout(hinclude.show_buffered_content,d)}}qualitelisFooter(),hinclude.run()}setTimeout(function(){var a=$("body").find("#tab"+f).attr("data-title");void 0!==a&&(document.title=a)},100)});$('[data-id="is'+f+'"]').parent().addClass("active"),g.addClass("active"),Modernizr.history&&(0==iStory?history.pushState($(this).attr("data-id"),"",e):("Restaurant"==iStoryData&&($('[data-id="isRestaurants"]').eq(0).parent().addClass("active"),iStoryData=""),iStory=!1)),$(".will-stick").length&&1!=Modernizr.csssticky&&stickyResize(),g.find(".defaultSlider").slick("setPosition"),-1!=f.indexOf("Restaurant")?(d.addClass("active"),$('[data-id="isRestaurants"]').eq(0).parent().addClass("active")):d.removeClass("active"),l=!1}}),$("body").on("click",".js-triggerNavHotel",function(a){a.preventDefault(),j=!0,$('[data-id="isProperty"]').trigger("click")}),$("body").on("click",".js-triggerNavPlanATrip",function(a){a.preventDefault(),triggerNavPlanATrip=!0,$('[data-id="isProperty"]').trigger("click")}),"#bookStay"===window.location.hash&&$("#bookStayTabBtn").length&&$("#bookStayTabBtn").trigger("click"),$("body").on("click",".js-triggerNavResto",function(a){a.preventDefault(),$('[data-id^="isRestaurant"]').eq(0).trigger("click")})}displayQuickAccessNav(),$(".profilePic").length&&uploadPic(),chefFn(),managePopins(),$window.on("debouncedresize",function(){clearTimeout(idTimeoutDebouncedresize),idTimeoutDebouncedresize=setTimeout(function(){1!=Modernizr.csssticky&&stickyResize(),iWindowHeight=$(window).height(),iWindowWidth=$(window).width(),$.colorbox.resize(),bIsPhone||updateDynamicViewport(),setOrientation(),fixPositionDpOniPad(),$("#homeMedia-diaporama").length&&$("#homeMedia-diaporama").children(".homeMedia-img").setFullscreenMedia(),$("#homeMedia-video").length&&$("#homeMedia-video").setFullscreenMedia()},100)}),setOrientation(),fixPositionDpOniPad(),$(".routeStep").length&&initRouteStep(),$(".moodboard").length&&($(".moodboard-item img").checkObjectFitSupport(),moodboardInfiniteScroll(),Modernizr.touchevents&&moodBoardTouchHover()),$("#countdown").length&&initCountDown(),restaurantStaffManager(),displayCheckoutFormErrors()}),
Modernizr.history){var iStory=!1,iStoryData;window.addEventListener("popstate",function(a){if($(".jsSecondNav").length){iStory=!0;var b=a.state;b&&-1!=b.indexOf("Restaurant")&&(iStoryData="Restaurant"),$('[data-id="'+a.state+'"]').eq(0).trigger("click")}})}$(document).ready(function(){autoCompleteB2B()}),$(document).ready(function(){var a=$("#newsletter"),b=a.find("div.formError");b.hide(),$("body").on("submit","#newsletter",function(a){a.preventDefault(),a.stopPropagation();var c=$(this),d=c.serialize(),e=!1;return $.ajax({url:c.attr("action"),type:"POST",data:d,cache:!1,async:!1,success:function(c){e=!0,c.success?(b.hide(),$.colorbox({html:c.message,onComplete:function(){initAndAjax();var a=$(".popinContact").find("input[type=email]");a.val(a.attr("value"))}})):(b.html(c.message).show(),a.preventDefault())},error:function(){e=!1,b.html(json.message).show()}}),e||a.preventDefault(),!1})}),$(document).ready(function(){$("#send_message div.formError").hide(),$("body").on("submit","#send_message",function(a){$("#send_message div.messageError").hide(),$("#send_message div.emailError").hide(),a.preventDefault(),a.stopPropagation();var b=$(this),c=b.find("[data-sendaction=email]").val(),d=b.find("[data-sendaction=message]").val();return b.find("[data-sendaction=route]").val(window.location.href),data=b.serialize(),send=!0,ajaxSuccess=!1,void 0!==c&&""!=c||($(".emailError",b).show(),send=!1),void 0!==d&&""!=d||($(".messageError",b).show(),send=!1),send&&$.ajax({url:b.attr("action"),type:"POST",data:data,cache:!1,async:!1,success:function(b){ajaxSuccess=!0,b.success?($("#send_message div.formError").hide(),$(".tabFooterConcierge .btnCloseFooterTabs").trigger("click"),$.colorbox({html:b.message})):($("#send_message div.messageError").hide(),$("#send_message div.emailError").hide(),b.message.message_error&&$("div.messageError").html(b.message.message_error).show(),b.message.email_error&&$("div.emailError").html(b.message.email_error).show(),a.preventDefault())},error:function(){ajaxSuccess=!1,$("#send_message div.formError").html(json.message).show()}}),!1})}),$(document).ready(function(){$("body").on("change","select#changeCountry",function(a){var b,c=$("option:selected",$(this)),d=$(c).data("phone"),e=$(c).data("country"),f=$(c).data("country-code"),g=$(c).data("cost"),h=$(this).val(),i={number:{id:h,phone:d,country:e,cost:g,country_code:f,locale:$("html").attr("lang")}};$.ajax({url:Routing.generate("switch_number."+settingsLocalization.sLanguageMin),type:"POST",data:i,cache:!1,async:!1,success:function(c){if(b=!0,c.success){var f=d.replace(/ |\(0\)|\*|\-|\./g,"");$("*[data-action=phone-call]").attr("href","tel:"+f),$("*[data-action=phone-call]").html(d+" *"),$("*[data-action=phone-country-call]").html(e),$("*[data-action=call-cost]").html(g.length?"* "+g:""),$(".btobLogoDesc").length&&$(".btobLogoDesc em").html(d+" *")}else a.preventDefault()},error:function(){b=!1,console.log("error call ajax")}}),$.colorbox.close()}).trigger("change"),$("body").on("click",".closeTooltip",function(){$("#dockBasketToolTip .btnclose").trigger("click")}),hinclude.registerCallback("etablissement-room-list",function(a,b,c){initAndAjax(),$("#etablissement-room-list").removeClass("loadingLayer"),$(".blockDmc").removeClass("loadingLayer"),updateMaxCommission()}),hinclude.registerCallback("dmc-inner-hotel",function(a,b,c){initAndAjax(),$("#dmc-inner-hotel").removeClass("loadingLayer")}),$("body").on("click","a.changeLanguage",function(){$.ajax({method:"post",url:Routing.generate("locale_cookie."+settingsLocalization.sLanguageMin,{locale:$(this).data("locale")}),async:!1})}),$(".langSelector.mdSelect").clone().appendTo(".headerSelectorBasket"),$(".currencyElem").clone().appendTo("#currencySelectorMainMenu"),$(".footerSelector .mdSelect").clone().appendTo(".headerSelector"),$("body").on("click","#rc_cookie_settings_googleAnalytics, #rc_cookie_settings_piksel",function(){return!1})}),$(document).ready(function(){$("body").on("submit","#dmcApplicationForm",function(a){a.preventDefault();var b=$(this);data=b.serialize(),$.ajax({url:b.attr("action"),type:"POST",data:data,cache:!1,async:!1,success:function(a){if(ajaxSuccess=!0,a.success)$("div#alert-error:visible").hide(),$("#alert-error-dmc").hide(),$("#dmcApplicationTitle .paragraphIntro").remove(),$("#dmc-form-wrapper").html(a.content),b.hasClass("popin")||$("html, body").animate({scrollTop:$("#dmcApplicationTitle").offset().top-124},200);else{var c=$('<div class="formError"></div>');$("#dmcApplicationForm .formField .formError").remove(),$("#alert-error-dmc").show(),b.hasClass("popin")?$("#cboxLoadedContent").animate({scrollTop:0},200):$("html, body").animate({scrollTop:$("#dmcApplicationTitle").offset().top-124},200),$.each(a.errors,function(a){var b=this,d=$("#"+b.form+"_"+b.field),e=d.closest(".formField"),f=c.clone();f.html(b.message),e.append(f)})}},error:function(){}})})}),$(document).ready(function(){$("body").on("click","a.btnClose",function(a){$("#cboxClose").trigger("click")}),$("body").on("submit","#loginForm",function(a){var b=$(this),c=b.serialize(),d=!1;$.ajax({url:b.attr("action"),type:"POST",data:c,cache:!1,async:!1,success:function(b){d=!0,b.success?(a.preventDefault(),void 0!==b.redirect?parent.location.replace(b.redirect):parent.location.reload()):($("div#alert-error").html(b.message).show(),a.preventDefault())},error:function(a){d=!1}}),d||a.preventDefault()}),$("body").on("submit","#popinForgotPasswordForm form",function(a){a.preventDefault();var b=$(this),c=b.serialize();b.find(".formError").addClass("is-hidden"),$.ajax({url:b.attr("action"),type:"POST",data:c,cache:!1,async:!1,success:function(a){a&&"email"==a?b.find(".formError").removeClass("is-hidden"):$("#popinForgotPasswordForm").parent().html(a)},error:function(a){b.find(".formError").removeClass("is-hidden")}})}),$("body").on("submit","#popinJoinForm form",function(a){a.preventDefault();var b=$(this),c=b.serialize();b.find(".formError").addClass("is-hidden"),$.ajax({url:b.attr("action"),type:"POST",data:c,cache:!1,async:!1,success:function(a){a.errors?(manageErrors(a,b),"slideUp"==b.data("on-fail")&&$("#cboxLoadedContent").scrollTop(b.offset().top-140)):$("#popinJoinForm").parent().html(a)},error:function(){}})}),$("body").on("submit","#popinJoin5CForm form",function(a){a.preventDefault();var b=$(this),c=b.serialize();b.find(".formError").addClass("is-hidden"),b.find(".alert-error").addClass("is-hidden"),$.ajax({url:b.attr("action"),type:"POST",data:c,cache:!1,async:!1,success:function(a){if(a.errors)manageErrors(a,b);else if(a.code)switch(a.code){case 98:b.find(".formError#error5cId").removeClass("is-hidden").html(a.message);break;case 99:b.find(".formError#errorEmail").removeClass("is-hidden").html(a.message);break;case 100:b.find(".formError#error5cId").removeClass("is-hidden").html(a.message),b.find(".formError#error5cPassword").removeClass("is-hidden").html(a.message);break;case 101:b.find(".alert-error#errorUpdate5c").removeClass("is-hidden").html(a.message)}else $("#popinJoin5CForm").parent().html(a)},error:function(){}})})}),$(document).ready(function(){$("body").on("submit","form.validate",function(a){var b=$(this),c=$(this).find('[type="submit"]'),d=b.serialize();return void 0!=b.data("loading-btn")&&c.addClass("loadingLayer"),void 0==$(this).data("validation-url")||""==$(this).data("validation-url")?(void 0!=b.data("loading-btn")&&setTimeout(function(){c.removeClass("loadingLayer")},0),!0):($.ajax({method:"post",data:d,async:!0,url:b.data("validation-url"),success:function(d){if(d.success){if(void 0!=b.data("callback-popin")&&""!=b.data("callback-popin")){a.preventDefault();var e=b.data("callback-popin");return $.colorbox({href:Routing.generate(e+"."+settingsLocalization.sLanguageMin)}),void 0!=b.data("loading-btn")&&c.removeClass("loadingLayer"),!1}return $(b)[0].submit(),!0}return a.preventDefault(),manageErrors(d,b),"slideUp"==b.data("on-fail")?$(window).scrollTop(b.offset().top-140):"slideUpPopin"==b.data("on-fail")&&$("#cboxLoadedContent").scrollTop(0),void 0!=b.data("loading-btn")&&c.removeClass("loadingLayer"),!1},error:function(){return a.preventDefault(),void 0!=b.data("loading-btn")&&c.removeClass("loadingLayer"),!1}}),b.unbind("submit"),!1)})}),$(document).ready(function(){$("form.submit-checker").each(function(){manageSubmitStatus($(this))}),$("body").on("keyup","form.submit-checker input.checkable",function(a){return a.preventDefault(),manageSubmitStatus($(this).closest("form.submit-checker")),!1}),$(document).on("change","form.submit-checker select.checkable",function(a){return a.preventDefault(),manageSubmitStatus($(this).closest("form.submit-checker")),!1}),$(document).on("change","form.submit-checker .checkable-radio input",function(a){return a.preventDefault(),manageSubmitStatus($(this).closest("form.submit-checker")),!1}),$(document).on("change","form.submit-checker input.checkable-checkbox",function(a){return a.preventDefault(),manageSubmitStatus($(this).closest("form.submit-checker")),!1})}),$(function(){$("form .formField").has(".rc-url").hide()}),$(document).on("cbox_complete",function(){$("#popinJoinForm, #popinCreate5C, #popinContact, #formJoinB2b").length&&$("#popinJoinForm, #popinCreate5C, #popinContact, #popinContact, #formJoinB2b").find(".formField").has(".rc-url").hide()}),$(document).ready(function(){cookie.handleCnil(),$("button.close-cnil").click(function(){$.ajax({url:Routing.generate("cnil_display_cookie."+settingsLocalization.sLanguageMin)}).done(function(){cookie.handleCnil()})})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"number"==typeof a&&!isNaN(a)}function c(a){return void 0===a}function d(a,c){var d=[];return b(c)&&d.push(c),d.slice.apply(a,d)}function e(a,b){var c=d(arguments,2);return function(){return a.apply(b,c.concat(d(arguments)))}}function f(a){var b=a.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return b&&(b[1]!==u.protocol||b[2]!==u.hostname||b[3]!==u.port)}function g(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function h(a){return a?' crossOrigin="'+a+'"':""}function i(a,b){var c;if(a.naturalWidth&&!na)return b(a.naturalWidth,a.naturalHeight);c=document.createElement("img"),c.onload=function(){b(this.width,this.height)},c.src=a.src}function j(a){var c=[],d=a.rotate,e=a.scaleX,f=a.scaleY;return b(d)&&c.push("rotate("+d+"deg)"),b(e)&&b(f)&&c.push("scale("+e+","+f+")"),c.length?c.join(" "):"none"}function k(a,b){var c,d,e=ra(a.degree)%180,f=(e>90?180-e:e)*Math.PI/180,g=sa(f),h=ta(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function l(c,d){var e,f,g,h=a("<canvas>")[0],i=h.getContext("2d"),j=0,l=0,m=d.naturalWidth,n=d.naturalHeight,o=d.rotate,p=d.scaleX,q=d.scaleY,r=b(p)&&b(q)&&(1!==p||1!==q),s=b(o)&&0!==o,t=s||r,u=m*ra(p||1),v=n*ra(q||1);return r&&(e=u/2,f=v/2),s&&(g=k({width:u,height:v,degree:o}),u=g.width,v=g.height,e=u/2,f=v/2),h.width=u,h.height=v,t&&(j=-m/2,l=-n/2,i.save(),i.translate(e,f)),s&&i.rotate(o*Math.PI/180),r&&i.scale(p,q),i.drawImage(c,wa(j),wa(l),wa(m),wa(n)),t&&i.restore(),h}function m(b){var c=b.length,d=0,e=0;return c&&(a.each(b,function(a,b){d+=b.pageX,e+=b.pageY}),d/=c,e/=c),{pageX:d,pageY:e}}function n(a,b,c){var d,e="";for(d=b,c+=b;d<c;d++)e+=xa(a.getUint8(d));return e}function o(a){var b,c,d,e,f,g,h,i,j,k,l=new y(a),m=l.byteLength;if(255===l.getUint8(0)&&216===l.getUint8(1))for(j=2;j<m;){if(255===l.getUint8(j)&&225===l.getUint8(j+1)){h=j;break}j++}if(h&&(c=h+4,d=h+10,"Exif"===n(l,c,4)&&(g=l.getUint16(d),((f=18761===g)||19789===g)&&42===l.getUint16(d+2,f)&&(e=l.getUint32(d+4,f))>=8&&(i=d+e))),i)for(m=l.getUint16(i,f),k=0;k<m;k++)if(j=i+12*k+2,274===l.getUint16(j,f)){j+=8,b=l.getUint16(j,f),na&&l.setUint16(j,1,f);break}return b}function p(a){var b,c=a.replace(Y,""),d=atob(c),e=d.length,f=new w(e),g=new x(f);for(b=0;b<e;b++)g[b]=d.charCodeAt(b);return f}function q(a){var b,c=new x(a),d=c.length,e="";for(b=0;b<d;b++)e+=xa(c[b]);return"data:image/jpeg;base64,"+z(e)}function r(b,c){this.$element=a(b),this.options=a.extend({},r.DEFAULTS,a.isPlainObject(c)&&c),this.isLoaded=!1,this.isBuilt=!1,this.isCompleted=!1,this.isRotated=!1,this.isCropped=!1,this.isDisabled=!1,this.isReplaced=!1,this.isLimited=!1,this.wheeling=!1,this.isImg=!1,this.originalUrl="",this.canvas=null,this.cropBox=null,this.init()}var s=a(window),t=a(document),u=window.location,v=window.navigator,w=window.ArrayBuffer,x=window.Uint8Array,y=window.DataView,z=function(a){return window.btoa?window.btoa(a):Base64.encode(a)},A="cropper",B="cropper-modal",C="cropper-hide",D="cropper-hidden",E="cropper-move",F="cropper-crop",G="cropper-disabled",H="mousedown touchstart pointerdown MSPointerDown",I="mousemove touchmove pointermove MSPointerMove",J="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",K="wheel mousewheel DOMMouseScroll",L="dblclick",M="load."+A,N="error."+A,O="resize."+A,P="build."+A,Q="built."+A,R="cropstart."+A,S="cropmove."+A,T="cropend."+A,U="crop."+A,V="zoom."+A,W=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,X=/^data\:/,Y=/^data\:([^\;]+)\;base64,/,Z=/^data\:image\/jpeg.*;base64,/,$="preview",_="action",aa="e",ba="w",ca="s",da="n",ea="se",fa="sw",ga="ne",ha="nw",ia="all",ja="crop",ka="move",la="zoom",ma=a.isFunction(a("<canvas>")[0].getContext),na=v&&/safari/i.test(v.userAgent)&&/apple computer/i.test(v.vendor),oa=Number,pa=Math.min,qa=Math.max,ra=Math.abs,sa=Math.sin,ta=Math.cos,ua=Math.sqrt,va=Math.round,wa=Math.floor,xa=String.fromCharCode;r.prototype={constructor:r,init:function(){var a,b=this.$element;if(b.is("img")){if(this.isImg=!0,this.originalUrl=a=b.attr("src"),!a)return;a=b.prop("src")}else b.is("canvas")&&ma&&(a=b[0].toDataURL());this.load(a)},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d},load:function(b){var c,d,e=this.options,f=this.$element;if(b&&(f.one(P,e.build),!this.trigger(P).isDefaultPrevented())){if(this.url=b,this.image={},!e.checkOrientation||!w)return this.clone();if(c=a.proxy(this.read,this),X.test(b))return Z.test(b)?c(p(b)):this.clone();d=new XMLHttpRequest,d.onerror=d.onabort=a.proxy(function(){this.clone()},this),d.onload=function(){c(this.response)},d.open("get",b),d.responseType="arraybuffer",d.send()}},read:function(a){var b,c,d,e=this.options,f=o(a),g=this.image;if(f>1)switch(this.url=q(a),f){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90,d=-1;break;case 6:b=90;break;case 7:b=90,c=-1;break;case 8:b=-90}e.rotatable&&(g.rotate=b),e.scalable&&(g.scaleX=c,g.scaleY=d),this.clone()},clone:function(){var b,c,d=this.options,e=this.$element,i=this.url,j="";d.checkCrossOrigin&&f(i)&&(j=e.prop("crossOrigin"),j?b=i:(j="anonymous",b=g(i))),this.crossOrigin=j,this.crossOriginUrl=b,this.$clone=c=a("<img"+h(j)+' src="'+(b||i)+'">'),this.isImg?e[0].complete?this.start():e.one(M,a.proxy(this.start,this)):c.one(M,a.proxy(this.start,this)).one(N,a.proxy(this.stop,this)).addClass(C).insertAfter(e)},start:function(){var b=this.$element,c=this.$clone;this.isImg||(c.off(N,this.stop),b=c),i(b[0],a.proxy(function(b,c){a.extend(this.image,{naturalWidth:b,naturalHeight:c,aspectRatio:b/c}),this.isLoaded=!0,this.build()},this))},stop:function(){this.$clone.remove(),this.$clone=null},build:function(){var b,c,d,e=this.options,f=this.$element,g=this.$clone;this.isLoaded&&(this.isBuilt&&this.unbuild(),this.$container=f.parent(),this.$cropper=b=a(r.TEMPLATE),this.$canvas=b.find(".cropper-canvas").append(g),this.$dragBox=b.find(".cropper-drag-box"),this.$cropBox=c=b.find(".cropper-crop-box"),this.$viewBox=b.find(".cropper-view-box"),this.$face=d=c.find(".cropper-face"),f.addClass(D).after(b),this.isImg||g.removeClass(C),this.initPreview(),this.bind(),e.aspectRatio=qa(0,e.aspectRatio)||NaN,e.viewMode=qa(0,pa(3,va(e.viewMode)))||0,e.autoCrop?(this.isCropped=!0,e.modal&&this.$dragBox.addClass(B)):c.addClass(D),e.guides||c.find(".cropper-dashed").addClass(D),e.center||c.find(".cropper-center").addClass(D),e.cropBoxMovable&&d.addClass(E).data(_,ia),e.highlight||d.addClass("cropper-invisible"),e.background&&b.addClass("cropper-bg"),e.cropBoxResizable||c.find(".cropper-line, .cropper-point").addClass(D),this.setDragMode(e.dragMode),this.render(),this.isBuilt=!0,this.setData(e.data),f.one(Q,e.built),setTimeout(a.proxy(function(){this.trigger(Q),this.isCompleted=!0},this),0))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.isCompleted=!1,this.initialImage=null,this.initialCanvas=null,this.initialCropBox=null,this.container=null,this.canvas=null,this.cropBox=null,this.unbind(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.isCropped&&this.renderCropBox()},initContainer:function(){var a=this.options,b=this.$element,c=this.$container,d=this.$cropper;d.addClass(D),b.removeClass(D),d.css(this.container={width:qa(c.width(),oa(a.minContainerWidth)||200),height:qa(c.height(),oa(a.minContainerHeight)||100)}),b.addClass(D),d.removeClass(D)},initCanvas:function(){var b,c=this.options.viewMode,d=this.container,e=d.width,f=d.height,g=this.image,h=g.naturalWidth,i=g.naturalHeight,j=90===ra(g.rotate),k=j?i:h,l=j?h:i,m=k/l,n=e,o=f;f*m>e?3===c?n=f*m:o=e/m:3===c?o=e/m:n=f*m,b={naturalWidth:k,naturalHeight:l,aspectRatio:m,width:n,height:o},b.oldLeft=b.left=(e-n)/2,b.oldTop=b.top=(f-o)/2,this.canvas=b,this.isLimited=1===c||2===c,this.limitCanvas(!0,!0),this.initialImage=a.extend({},g),this.initialCanvas=a.extend({},b)},limitCanvas:function(a,b){var c,d,e,f,g=this.options,h=g.viewMode,i=this.container,j=i.width,k=i.height,l=this.canvas,m=l.aspectRatio,n=this.cropBox,o=this.isCropped&&n;a&&(c=oa(g.minCanvasWidth)||0,d=oa(g.minCanvasHeight)||0,h&&(h>1?(c=qa(c,j),d=qa(d,k),3===h&&(d*m>c?c=d*m:d=c/m)):c?c=qa(c,o?n.width:0):d?d=qa(d,o?n.height:0):o&&(c=n.width,d=n.height,d*m>c?c=d*m:d=c/m)),c&&d?d*m>c?d=c/m:c=d*m:c?d=c/m:d&&(c=d*m),l.minWidth=c,l.minHeight=d,l.maxWidth=1/0,l.maxHeight=1/0),b&&(h?(e=j-l.width,f=k-l.height,l.minLeft=pa(0,e),l.minTop=pa(0,f),l.maxLeft=qa(0,e),l.maxTop=qa(0,f),o&&this.isLimited&&(l.minLeft=pa(n.left,n.left+n.width-l.width),l.minTop=pa(n.top,n.top+n.height-l.height),l.maxLeft=n.left,l.maxTop=n.top,2===h&&(l.width>=j&&(l.minLeft=pa(0,e),l.maxLeft=qa(0,e)),l.height>=k&&(l.minTop=pa(0,f),l.maxTop=qa(0,f))))):(l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=j,l.maxTop=k))},renderCanvas:function(a){var b,c,d=this.canvas,e=this.image,f=e.rotate,g=e.naturalWidth,h=e.naturalHeight;this.isRotated&&(this.isRotated=!1,c=k({width:e.width,height:e.height,degree:f}),(b=c.width/c.height)!==d.aspectRatio&&(d.left-=(c.width-d.width)/2,d.top-=(c.height-d.height)/2,d.width=c.width,d.height=c.height,d.aspectRatio=b,d.naturalWidth=g,d.naturalHeight=h,f%180&&(c=k({width:g,height:h,degree:f}),d.naturalWidth=c.width,d.naturalHeight=c.height),this.limitCanvas(!0,!1))),(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=pa(qa(d.width,d.minWidth),d.maxWidth),d.height=pa(qa(d.height,d.minHeight),d.maxHeight),this.limitCanvas(!1,!0),d.oldLeft=d.left=pa(qa(d.left,d.minLeft),d.maxLeft),d.oldTop=d.top=pa(qa(d.top,d.minTop),d.maxTop),this.$canvas.css({width:d.width,height:d.height,left:d.left,top:d.top}),this.renderImage(),this.isCropped&&this.isLimited&&this.limitCropBox(!0,!0),a&&this.output()},renderImage:function(b){var c,d=this.canvas,e=this.image;e.rotate&&(c=k({width:d.width,height:d.height,degree:e.rotate,aspectRatio:e.aspectRatio},!0)),a.extend(e,c?{width:c.width,height:c.height,left:(d.width-c.width)/2,top:(d.height-c.height)/2}:{width:d.width,height:d.height,left:0,top:0}),this.$clone.css({width:e.width,height:e.height,marginLeft:e.left,marginTop:e.top,transform:j(e)}),b&&this.output()},initCropBox:function(){var b=this.options,c=this.canvas,d=b.aspectRatio,e=oa(b.autoCropArea)||.8,f={width:c.width,height:c.height};d&&(c.height*d>c.width?f.height=f.width/d:f.width=f.height*d),this.cropBox=f,this.limitCropBox(!0,!0),f.width=pa(qa(f.width,f.minWidth),f.maxWidth),f.height=pa(qa(f.height,f.minHeight),f.maxHeight),f.width=qa(f.minWidth,f.width*e),f.height=qa(f.minHeight,f.height*e),f.oldLeft=f.left=c.left+(c.width-f.width)/2,f.oldTop=f.top=c.top+(c.height-f.height)/2,this.initialCropBox=a.extend({},f)},limitCropBox:function(a,b){var c,d,e,f,g=this.options,h=g.aspectRatio,i=this.container,j=i.width,k=i.height,l=this.canvas,m=this.cropBox,n=this.isLimited;a&&(c=oa(g.minCropBoxWidth)||0,d=oa(g.minCropBoxHeight)||0,c=pa(c,j),d=pa(d,k),e=pa(j,n?l.width:j),f=pa(k,n?l.height:k),h&&(c&&d?d*h>c?d=c/h:c=d*h:c?d=c/h:d&&(c=d*h),f*h>e?f=e/h:e=f*h),m.minWidth=pa(c,e),m.minHeight=pa(d,f),m.maxWidth=e,m.maxHeight=f),b&&(n?(m.minLeft=qa(0,l.left),m.minTop=qa(0,l.top),m.maxLeft=pa(j,l.left+l.width)-m.width,m.maxTop=pa(k,l.top+l.height)-m.height):(m.minLeft=0,m.minTop=0,m.maxLeft=j-m.width,m.maxTop=k-m.height))},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.cropBox;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=pa(qa(e.width,e.minWidth),e.maxWidth),e.height=pa(qa(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.oldLeft=e.left=pa(qa(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=pa(qa(e.top,e.minTop),e.maxTop),a.movable&&a.cropBoxMovable&&this.$face.data(_,e.width===c&&e.height===d?ka:ia),this.$cropBox.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.isCropped&&this.isLimited&&this.limitCanvas(!0,!0),this.isDisabled||this.output()},output:function(){this.preview(),this.isCompleted?this.trigger(U,this.getData()):this.isBuilt||this.$element.one(Q,a.proxy(function(){this.trigger(U,this.getData())},this))},initPreview:function(){var b,c=h(this.crossOrigin),d=c?this.crossOriginUrl:this.url;this.$preview=a(this.options.preview),this.$clone2=b=a("<img"+c+' src="'+d+'">'),this.$viewBox.html(b),this.$preview.each(function(){var b=a(this);b.data($,{width:b.width(),height:b.height(),html:b.html()}),b.html("<img"+c+' src="'+d+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var b=a(this),c=b.data($);b.css({width:c.width,height:c.height}).html(c.html).removeData($)})},preview:function(){var b=this.image,c=this.canvas,d=this.cropBox,e=d.width,f=d.height,g=b.width,h=b.height,i=d.left-c.left-b.left,k=d.top-c.top-b.top;this.isCropped&&!this.isDisabled&&(this.$clone2.css({width:g,height:h,marginLeft:-i,marginTop:-k,transform:j(b)}),this.$preview.each(function(){var c=a(this),d=c.data($),l=d.width,m=d.height,n=l,o=m,p=1;e&&(p=l/e,o=f*p),f&&o>m&&(p=m/f,n=e*p,o=m),c.css({width:n,height:o}).find("img").css({width:g*p,height:h*p,marginLeft:-i*p,marginTop:-k*p,transform:j(b)})}))},bind:function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.on(R,b.cropstart),a.isFunction(b.cropmove)&&c.on(S,b.cropmove),a.isFunction(b.cropend)&&c.on(T,b.cropend),a.isFunction(b.crop)&&c.on(U,b.crop),a.isFunction(b.zoom)&&c.on(V,b.zoom),d.on(H,a.proxy(this.cropStart,this)),b.zoomable&&b.zoomOnWheel&&d.on(K,a.proxy(this.wheel,this)),b.toggleDragModeOnDblclick&&d.on(L,a.proxy(this.dblclick,this)),t.on(I,this._cropMove=e(this.cropMove,this)).on(J,this._cropEnd=e(this.cropEnd,this)),b.responsive&&s.on(O,this._resize=e(this.resize,this))},unbind:function(){var b=this.options,c=this.$element,d=this.$cropper;a.isFunction(b.cropstart)&&c.off(R,b.cropstart),a.isFunction(b.cropmove)&&c.off(S,b.cropmove),a.isFunction(b.cropend)&&c.off(T,b.cropend),a.isFunction(b.crop)&&c.off(U,b.crop),a.isFunction(b.zoom)&&c.off(V,b.zoom),d.off(H,this.cropStart),b.zoomable&&b.zoomOnWheel&&d.off(K,this.wheel),b.toggleDragModeOnDblclick&&d.off(L,this.dblclick),t.off(I,this._cropMove).off(J,this._cropEnd),b.responsive&&s.off(O,this._resize)},resize:function(){var b,c,d,e=this.options.restore,f=this.$container,g=this.container;!this.isDisabled&&g&&(1==(d=f.width()/g.width)&&f.height()===g.height||(e&&(b=this.getCanvasData(),c=this.getCropBoxData()),this.render(),e&&(this.setCanvasData(a.each(b,function(a,c){b[a]=c*d})),this.setCropBoxData(a.each(c,function(a,b){c[a]=b*d})))))},dblclick:function(){this.isDisabled||(this.$dragBox.hasClass(F)?this.setDragMode(ka):this.setDragMode(ja))},wheel:function(b){var c=b.originalEvent||b,d=oa(this.options.wheelZoomRatio)||.1,e=1;this.isDisabled||(b.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(a.proxy(function(){this.wheeling=!1},this),50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),this.zoom(-e*d,b)))},cropStart:function(b){var c,d,e=this.options,f=b.originalEvent,g=f&&f.touches,h=b;if(!this.isDisabled){if(g){if((c=g.length)>1){if(!e.zoomable||!e.zoomOnTouch||2!==c)return;h=g[1],this.startX2=h.pageX,this.startY2=h.pageY,d=la}h=g[0]}if(d=d||a(h.target).data(_),W.test(d)){if(this.trigger(R,{originalEvent:f,action:d}).isDefaultPrevented())return;b.preventDefault(),this.action=d,this.cropping=!1,this.startX=h.pageX||f&&f.pageX,this.startY=h.pageY||f&&f.pageY,d===ja&&(this.cropping=!0,this.$dragBox.addClass(B))}}},cropMove:function(a){var b,c=this.options,d=a.originalEvent,e=d&&d.touches,f=a,g=this.action;if(!this.isDisabled){if(e){if((b=e.length)>1){if(!c.zoomable||!c.zoomOnTouch||2!==b)return;f=e[1],this.endX2=f.pageX,this.endY2=f.pageY}f=e[0]}if(g){if(this.trigger(S,{originalEvent:d,action:g}).isDefaultPrevented())return;a.preventDefault(),this.endX=f.pageX||d&&d.pageX,this.endY=f.pageY||d&&d.pageY,this.change(f.shiftKey,g===la?a:null)}}},cropEnd:function(a){var b=a.originalEvent,c=this.action;this.isDisabled||c&&(a.preventDefault(),this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(B,this.isCropped&&this.options.modal)),this.action="",this.trigger(T,{originalEvent:b,action:c}))},change:function(a,b){var c,d,e=this.options,f=e.aspectRatio,g=this.action,h=this.container,i=this.canvas,j=this.cropBox,k=j.width,l=j.height,m=j.left,n=j.top,o=m+k,p=n+l,q=0,r=0,s=h.width,t=h.height,u=!0;switch(!f&&a&&(f=k&&l?k/l:1),this.limited&&(q=j.minLeft,r=j.minTop,s=q+pa(h.width,i.left+i.width),t=r+pa(h.height,i.top+i.height)),d={x:this.endX-this.startX,y:this.endY-this.startY},f&&(d.X=d.y*f,d.Y=d.x/f),g){case ia:m+=d.x,n+=d.y;break;case aa:if(d.x>=0&&(o>=s||f&&(n<=r||p>=t))){u=!1;break}k+=d.x,f&&(l=k/f,n-=d.Y/2),k<0&&(g=ba,k=0);break;case da:if(d.y<=0&&(n<=r||f&&(m<=q||o>=s))){u=!1;break}l-=d.y,n+=d.y,f&&(k=l*f,m+=d.X/2),l<0&&(g=ca,l=0);break;case ba:if(d.x<=0&&(m<=q||f&&(n<=r||p>=t))){u=!1;break}k-=d.x,m+=d.x,f&&(l=k/f,n+=d.Y/2),k<0&&(g=aa,k=0);break;case ca:if(d.y>=0&&(p>=t||f&&(m<=q||o>=s))){u=!1;break}l+=d.y,f&&(k=l*f,m-=d.X/2),l<0&&(g=da,l=0);break;case ga:if(f){if(d.y<=0&&(n<=r||o>=s)){u=!1;break}l-=d.y,n+=d.y,k=l*f}else d.x>=0?o<s?k+=d.x:d.y<=0&&n<=r&&(u=!1):k+=d.x,d.y<=0?n>r&&(l-=d.y,n+=d.y):(l-=d.y,n+=d.y);k<0&&l<0?(g=fa,l=0,k=0):k<0?(g=ha,k=0):l<0&&(g=ea,l=0);break;case ha:if(f){if(d.y<=0&&(n<=r||m<=q)){u=!1;break}l-=d.y,n+=d.y,k=l*f,m+=d.X}else d.x<=0?m>q?(k-=d.x,m+=d.x):d.y<=0&&n<=r&&(u=!1):(k-=d.x,m+=d.x),d.y<=0?n>r&&(l-=d.y,n+=d.y):(l-=d.y,n+=d.y);k<0&&l<0?(g=ea,l=0,k=0):k<0?(g=ga,k=0):l<0&&(g=fa,l=0);break;case fa:if(f){if(d.x<=0&&(m<=q||p>=t)){u=!1;break}k-=d.x,m+=d.x,l=k/f}else d.x<=0?m>q?(k-=d.x,m+=d.x):d.y>=0&&p>=t&&(u=!1):(k-=d.x,m+=d.x),d.y>=0?p<t&&(l+=d.y):l+=d.y;k<0&&l<0?(g=ga,l=0,k=0):k<0?(g=ea,k=0):l<0&&(g=ha,l=0);break;case ea:if(f){if(d.x>=0&&(o>=s||p>=t)){u=!1;break}k+=d.x,l=k/f}else d.x>=0?o<s?k+=d.x:d.y>=0&&p>=t&&(u=!1):k+=d.x,d.y>=0?p<t&&(l+=d.y):l+=d.y;k<0&&l<0?(g=ha,l=0,k=0):k<0?(g=fa,k=0):l<0&&(g=ga,l=0);break;case ka:this.move(d.x,d.y),u=!1;break;case la:this.zoom(function(a,b,c,d){var e=ua(a*a+b*b);return(ua(c*c+d*d)-e)/e}(ra(this.startX-this.startX2),ra(this.startY-this.startY2),ra(this.endX-this.endX2),ra(this.endY-this.endY2)),b),this.startX2=this.endX2,this.startY2=this.endY2,u=!1;break;case ja:if(!d.x||!d.y){u=!1;break}c=this.$cropper.offset(),m=this.startX-c.left,n=this.startY-c.top,k=j.minWidth,l=j.minHeight,d.x>0?g=d.y>0?ea:ga:d.x<0&&(m-=k,g=d.y>0?fa:ha),d.y<0&&(n-=l),this.isCropped||(this.$cropBox.removeClass(D),this.isCropped=!0,this.limited&&this.limitCropBox(!0,!0))}u&&(j.width=k,j.height=l,j.left=m,j.top=n,this.action=g,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},crop:function(){this.isBuilt&&!this.isDisabled&&(this.isCropped||(this.isCropped=!0,this.limitCropBox(!0,!0),this.options.modal&&this.$dragBox.addClass(B),this.$cropBox.removeClass(D)),this.setCropBoxData(this.initialCropBox))},reset:function(){this.isBuilt&&!this.isDisabled&&(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.cropBox=a.extend({},this.initialCropBox),this.renderCanvas(),this.isCropped&&this.renderCropBox())},clear:function(){this.isCropped&&!this.isDisabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.isCropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),this.$dragBox.removeClass(B),this.$cropBox.addClass(D))},replace:function(a,b){!this.isDisabled&&a&&(this.isImg&&this.$element.attr("src",a),b?(this.url=a,this.$clone.attr("src",a),this.isBuilt&&this.$preview.find("img").add(this.$clone2).attr("src",a)):(this.isImg&&(this.isReplaced=!0),this.options.data=null,this.load(a)))},enable:function(){this.isBuilt&&(this.isDisabled=!1,this.$cropper.removeClass(G))},disable:function(){this.isBuilt&&(this.isDisabled=!0,this.$cropper.addClass(G))},destroy:function(){var a=this.$element;this.isLoaded?(this.isImg&&this.isReplaced&&a.attr("src",this.originalUrl),this.unbuild(),a.removeClass(D)):this.isImg?a.off(M,this.start):this.$clone&&this.$clone.remove(),a.removeData(A)},move:function(a,b){var d=this.canvas;this.moveTo(c(a)?a:d.left+oa(a),c(b)?b:d.top+oa(b))},moveTo:function(a,d){var e=this.canvas,f=!1;c(d)&&(d=a),a=oa(a),d=oa(d),this.isBuilt&&!this.isDisabled&&this.options.movable&&(b(a)&&(e.left=a,f=!0),b(d)&&(e.top=d,f=!0),f&&this.renderCanvas(!0))},zoom:function(a,b){var c=this.canvas;a=oa(a),a=a<0?1/(1-a):1+a,this.zoomTo(c.width*a/c.naturalWidth,b)},zoomTo:function(a,b){var c,d,e,f,g,h=this.options,i=this.canvas,j=i.width,k=i.height,l=i.naturalWidth,n=i.naturalHeight;if((a=oa(a))>=0&&this.isBuilt&&!this.isDisabled&&h.zoomable){if(d=l*a,e=n*a,b&&(c=b.originalEvent),this.trigger(V,{originalEvent:c,oldRatio:j/l,ratio:d/l}).isDefaultPrevented())return;c?(f=this.$cropper.offset(),g=c.touches?m(c.touches):{pageX:b.pageX||c.pageX||0,pageY:b.pageY||c.pageY||0},i.left-=(d-j)*((g.pageX-f.left-i.left)/j),i.top-=(e-k)*((g.pageY-f.top-i.top)/k)):(i.left-=(d-j)/2,i.top-=(e-k)/2),i.width=d,i.height=e,this.renderCanvas(!0)}},rotate:function(a){this.rotateTo((this.image.rotate||0)+oa(a))},rotateTo:function(a){a=oa(a),b(a)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable&&(this.image.rotate=a%360,this.isRotated=!0,this.renderCanvas(!0))},scale:function(a,d){var e=this.image,f=!1;c(d)&&(d=a),a=oa(a),d=oa(d),this.isBuilt&&!this.isDisabled&&this.options.scalable&&(b(a)&&(e.scaleX=a,f=!0),b(d)&&(e.scaleY=d,f=!0),f&&this.renderImage(!0))},scaleX:function(a){var c=this.image.scaleY;this.scale(a,b(c)?c:1)},scaleY:function(a){var c=this.image.scaleX;this.scale(b(c)?c:1,a)},getData:function(b){var c,d,e=this.options,f=this.image,g=this.canvas,h=this.cropBox;return this.isBuilt&&this.isCropped?(d={x:h.left-g.left,y:h.top-g.top,width:h.width,height:h.height},c=f.width/f.naturalWidth,a.each(d,function(a,e){e/=c,d[a]=b?va(e):e})):d={x:0,y:0,width:0,height:0},e.rotatable&&(d.rotate=f.rotate||0),e.scalable&&(d.scaleX=f.scaleX||1,d.scaleY=f.scaleY||1),d},setData:function(c){
var d,e,f,g=this.options,h=this.image,i=this.canvas,j={};a.isFunction(c)&&(c=c.call(this.element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(c)&&(g.rotatable&&b(c.rotate)&&c.rotate!==h.rotate&&(h.rotate=c.rotate,this.isRotated=d=!0),g.scalable&&(b(c.scaleX)&&c.scaleX!==h.scaleX&&(h.scaleX=c.scaleX,e=!0),b(c.scaleY)&&c.scaleY!==h.scaleY&&(h.scaleY=c.scaleY,e=!0)),d?this.renderCanvas():e&&this.renderImage(),f=h.width/h.naturalWidth,b(c.x)&&(j.left=c.x*f+i.left),b(c.y)&&(j.top=c.y*f+i.top),b(c.width)&&(j.width=c.width*f),b(c.height)&&(j.height=c.height*f),this.setCropBoxData(j))},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var b=this.canvas,c={};return this.isBuilt&&a.each(["left","top","width","height","naturalWidth","naturalHeight"],function(a,d){c[d]=b[d]}),c},setCanvasData:function(c){var d=this.canvas,e=d.aspectRatio;a.isFunction(c)&&(c=c.call(this.$element)),this.isBuilt&&!this.isDisabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&&(d.height=c.height,d.width=c.height*e),this.renderCanvas(!0))},getCropBoxData:function(){var a,b=this.cropBox;return this.isBuilt&&this.isCropped&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:function(c){var d,e,f=this.cropBox,g=this.options.aspectRatio;a.isFunction(c)&&(c=c.call(this.$element)),this.isBuilt&&this.isCropped&&!this.isDisabled&&a.isPlainObject(c)&&(b(c.left)&&(f.left=c.left),b(c.top)&&(f.top=c.top),b(c.width)&&(d=!0,f.width=c.width),b(c.height)&&(e=!0,f.height=c.height),g&&(d?f.height=f.width/g:e&&(f.width=f.height*g)),this.renderCropBox())},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,j,k,m,n;if(this.isBuilt&&this.isCropped&&ma)return a.isPlainObject(b)||(b={}),n=this.getData(),c=n.width,d=n.height,j=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/j,i=g/c):h&&(g=h*j,i=h/d)),e=wa(g||c),f=wa(h||d),k=a("<canvas>")[0],k.width=e,k.height=f,m=k.getContext("2d"),b.fillColor&&(m.fillStyle=b.fillColor,m.fillRect(0,0,e,f)),m.drawImage.apply(m,function(){var a,b,e,f,g,h,j=l(this.$clone[0],this.image),k=j.width,m=j.height,o=this.canvas,p=[j],q=n.x+o.naturalWidth*(ra(n.scaleX||1)-1)/2,r=n.y+o.naturalHeight*(ra(n.scaleY||1)-1)/2;return q<=-c||q>k?q=a=e=g=0:q<=0?(e=-q,q=0,a=g=pa(k,c+q)):q<=k&&(e=0,a=g=pa(c,k-q)),a<=0||r<=-d||r>m?r=b=f=h=0:r<=0?(f=-r,r=0,b=h=pa(m,d+r)):r<=m&&(f=0,b=h=pa(d,m-r)),p.push(wa(q),wa(r),wa(a),wa(b)),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&p.push(wa(e),wa(f),wa(g),wa(h)),p}.call(this)),k},setAspectRatio:function(a){var b=this.options;this.isDisabled||c(a)||(b.aspectRatio=qa(0,a)||NaN,this.isBuilt&&(this.initCropBox(),this.isCropped&&this.renderCropBox()))},setDragMode:function(a){var b,c,d=this.options;this.isLoaded&&!this.isDisabled&&(b=a===ja,c=d.movable&&a===ka,a=b||c?a:"none",this.$dragBox.data(_,a).toggleClass(F,b).toggleClass(E,c),d.cropBoxMovable||this.$face.data(_,a).toggleClass(F,b).toggleClass(E,c))}},r.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},r.setDefaults=function(b){a.extend(r.DEFAULTS,b)},r.TEMPLATE='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',r.other=a.fn.cropper,a.fn.cropper=function(b){var e,f=d(arguments,1);return this.each(function(){var c,d,g=a(this),h=g.data(A);if(!h){if(/destroy/.test(b))return;c=a.extend({},g.data(),a.isPlainObject(b)&&b),g.data(A,h=new r(this,c))}"string"==typeof b&&a.isFunction(d=h[b])&&(e=d.apply(h,f))}),c(e)?this:e},a.fn.cropper.Constructor=r,a.fn.cropper.setDefaults=r.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=r.other,this}});var hinclude;!function(){"use strict";hinclude={classprefix:"include_",dataIncludeSrc:"data-include-src",callbackRegistry:{},registerCallback:function(a,b){this.callbackRegistry[a]=b},set_content_async:function(a,b,c){4===b.readyState&&(200!==b.status&&304!==b.status||(a.innerHTML=b.responseText,hinclude.runJs(a),"function"==typeof hinclude.callbackRegistry[a.id]&&hinclude.callbackRegistry[a.id](a,b,c)),a.className=hinclude.classprefix+b.status)},buffer:[],set_content_buffered:function(a,b,c){4===b.readyState&&(hinclude.buffer.push([a,b,c]),hinclude.outstanding-=1,0===hinclude.outstanding&&hinclude.show_buffered_content())},show_buffered_content:function(){for(;hinclude.buffer.length>0;){var a=hinclude.buffer.pop();200!==a[1].status&&304!==a[1].status||(a[0].innerHTML=a[1].responseText,hinclude.runJs(a[0]),"function"==typeof hinclude.callbackRegistry[a[0].id]&&hinclude.callbackRegistry[a[0].id](a[0],a[1],a[2])),a[0].className=hinclude.classprefix+a[1].status}},outstanding:0,includes:[],run:function(){var a=0,b=this.get_meta("include_mode","buffered"),c=function(a,b){};if("async"===b)c=this.set_content_async;else if("buffered"===b){c=this.set_content_buffered;var d=1e3*this.get_meta("include_timeout",2.5);setTimeout(hinclude.show_buffered_content,d)}for(this.includes=this.getAllElementsWithAttribute(this.dataIncludeSrc),a;a<this.includes.length;a+=1)this.include(this.includes[a],this.includes[a].getAttribute(this.dataIncludeSrc),this.includes[a].getAttribute("media"),c)},include:function(a,b,c,d){var e=this;if(!c||!window.matchMedia||window.matchMedia(c).matches)if("data"===b.substring(0,b.indexOf(":")).toLowerCase()){var f=decodeURIComponent(b.substring(b.indexOf(",")+1,b.length));a.innerHTML=f}else{var g=!1;if(window.XMLHttpRequest)try{g=new XMLHttpRequest}catch(a){g=!1}else if(window.ActiveXObject)try{g=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){g=!1}var f=this.collectData(a);if(g){this.outstanding+=1,g.onreadystatechange=function(){d.apply(e,[a,g,f])};try{g.open("GET",b),g.send()}catch(a){this.outstanding-=1,alert("Include error: "+b+" ("+a+")")}}}},runJs:function(element){for(var scripts=element.getElementsByTagName("script"),i=0;i<scripts.length;i++)eval(scripts[i].innerHTML)},collectData:function(a){var b=this,c=[];return[].forEach.call(a.attributes,function(a){/^data-/.test(a.name)&&a.name!=b.dataIncludeSrc&&(c[a.name.substr(5)]=encodeURIComponent(a.value))}),c},getAllElementsWithAttribute:function(a){for(var b=[],c=document.getElementsByTagName("*"),d=0,e=c.length;d<e;d++)null!=c[d].getAttribute(a)&&b.push(c[d]);return b},refresh:function(a){var b=0,c=(this.get_meta("include_mode","buffered"),function(a,b){});for(c=this.set_content_buffered,b;b<this.includes.length;b+=1)if(this.includes[b].getAttribute("id")===a){var d=this.collectData(this.includes[b]);this.include(this.includes[b],this.includes[b].getAttribute("src"),d,c)}},get_meta:function(a,b){var c=0,d=document.getElementsByTagName("meta");for(c;c<d.length;c+=1)if(d[c].getAttribute("name")===a)return d[c].getAttribute("content");return b},contentLoaded:function(a,b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener,h=g?"addEventListener":"attachEvent",i=g?"removeEventListener":"detachEvent",j=g?"":"on",k=function(d){"readystatechange"==d.type&&"complete"!=e.readyState||(("load"==d.type?a:e)[i](j+d.type,k,!1),!c&&(c=!0)&&b.call(a,d.type||d))},l=function(){try{f.doScroll("left")}catch(a){return void setTimeout(l,50)}k("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(!g&&f.doScroll){try{d=!a.frameElement}catch(a){}d&&l()}e[h](j+"DOMContentLoaded",k,!1),e[h](j+"readystatechange",k,!1),a[h](j+"load",k,!1)}}},hinclude.contentLoaded(window,function(){hinclude.run()})}(),window.AddToCart={addToCartPopin:function(a,b){var c=a||null,d=b||null,e=this;if(window.jQuery){var f=$(".js-rc-AddToCart-form"),g=$(".formField-submit"),h=f.serializeArray(),i=this.getAttribute(h,"name","qty"),j=f.find(".form-input-wrap input:checked").attr("data-galitt"),k=f.find("#gift-a2c-country option:selected").val();$(".js-formError").removeClass("is-visible"),g.addClass("loadingLayer"),$.ajax({url:f.attr("action"),method:"POST",data:h}).done(function(a){if(void 0===a.addCart||a.addCart){var b=a.items;if(g.removeClass("loadingLayer"),"undefined"!=typeof dataLayer){var f={products:[{name:c.label+" - "+c.name,id:c.reference,price:c.variants[Object.keys(c.variants)[0]].price.current/100,category:c.taxons.main,quantity:h[i],brand:"gift",id_galitt:j,product_lang:k}]};null!==d&&(f.actionField=d),dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"EUR",add:f}})}$.colorbox.close(),e.updateCatalogMiniBasket(b,h[i].value)}else $(".js-formError-extension").addClass("is-visible"),g.removeClass("loadingLayer")}).fail(function(a){$(".js-formError").html(Translator.trans("rc.gifts.add_to_cart.popin.error_label")).addClass("is-visible"),g.removeClass("loadingLayer")})}else console.error("jQuery must be loaded.")},getProductVariants:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=[],c=Object.entries(a),d=[],e=[],f=[],g=[];return c.map(function(a){d.push(a[1].axis[0]),e.push(a[1].axis[1]),f.push(a[1].nameAxis),g.push(a[1].codeGalitt)}),d.map(function(a,c){for(var d=!1,h=0,i=0;i<b.length;i++)b[i].lang.code===a&&(d=!0,h=i);var j=e[c],k=f[c],l=g[c];d?b[h].types.push({code:j,label:k[j].replace("Type ",""),galitt:l}):b.push({lang:{code:a,label:k[a].replace("Pays ",""),galitt:l},types:[{code:j,label:k[j].replace("Type ",""),galitt:l}]})}),b},updateCatalogMiniBasket:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=$("#basket-count");if(c.length){for(var d=0,e=parseInt(c.data("basket-count")),f=0;f<a.length;++f)d+=a[f].quantity;if(c.html(e+d),b){var g=$("#nbGiftUpdated");g.find(".nbGiftUpdated__label").hide(),g.find(".js-nbGiftUpdated__amount").text(b),1==b?g.find(".nbGiftUpdated__label--singular").show():g.find(".nbGiftUpdated__label--plural").show()}$(".js-giftFooterDockToolTip").addClass("is-opened")}},getAttribute:function(a,b,c){return a.findIndex(function(a){if(a.hasOwnProperty(b)&&a[b]===c)return a[b]===c})},setProductPopinDropdownForTWIG:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];document.querySelector(b).innerHTML="";var c=this.getProductVariants(a.variants),d=document.createElement("select");d.id="gift-a2c-country",d.name="country",d.setAttribute("required",!0);var e=c.map(function(a,b){return'<option value="'+a.lang.code+'" data-id="'+b+'">'+a.lang.label+"</option>"});return d.innerHTML=e.toString(),document.querySelector(b).appendChild(d),c},setProductPopinRadioButtonsForTWIG:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=document.querySelector(".js-form-radio-container"),d=a[b].types.map(function(a){return'\n\t\t\t<div class="form-input-wrap radio">\n\t\t\t\t<input id="gift-a2c-format-'+a.code+'" type="radio" name="type" value="'+a.code+'" required '+("ecrin"===a.code?"checked":"")+' />\n\t\t\t\t<label for="gift-a2c-format-'+a.code+'">'+a.label+"</label>\n\t\t\t</div>\n\t\t"});c.innerHTML=d.join("")}};