!function(e){this.BannerExpand=function(){this.isWrapperDefined()&&(this.wrapper=document.querySelector("[data-banner]"),this.uid=null,this.collapseWrapper=null,this.computedWidth=getComputedStyle(this.wrapper).getPropertyValue("width"),this.expandWrapper=null,this.isExpandBanner=this.isExpandBanner(),this.closeButton=null,this.closeButtonClicked=!1,this.closeMiniButton=null,this.expanded=!1,this.openAnimation=null,this.keyFramePrefix=null,this.providerUrl="https://eb.r1a.eu/b/",this.eventUrl="https://eb.r1a.eu/t/",this.bannerCode=this.wrapper.getAttribute("data-banner"),this.eventOpen=null,this.eventClick=null,this.instance=!1,this.clientBannerProperties={},this.getBannerProperties(),this.width=e.innerWidth,this.height=e.innerHeight)},BannerExpand.prototype={getBannerProperties:function(){var t=this
if(!this.isDesktop()){var n=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
clientProperties=null,n.open("GET",this.providerUrl+this.bannerCode+"?domain="+this.getDomain()+"&height="+screen.height+"&width="+screen.width,!0),n.onreadystatechange=function(e){if(4===n.readyState&&200===n.status){t.clientBannerProperties=JSON.parse(n.responseText)
var i=!1
t.useCookieDetection()===!1&&(i=!0),t.useCookieCustom()===!0&&(i=!0),t.useCookieClient()===!0&&(i=!0),i===!0&&null===t.getCookie("eb_ch")&&t.createBanner()}},n.send(null)}},createBanner:function(){this.initializeBannerElements(),this.wrapper.style.position="relative",this.wrapper.style.width=this.getWidthProperty(),this.populateCollapseWrapper(),this.attachElements(),this.addContentEvent(),this.isMobile&&this.wrapper.classList.add("eb-mobile"),this.isExpandBanner===!0&&(this.createAnimationStyle(),this.populateExpandWrapper())},initializeBannerElements:function(){this.collapseWrapper=document.createElement("div"),this.eventClick=this.clientBannerProperties.events[1],this.uid=this.clientBannerProperties.uid,this.useCookieHide()===!0&&(this.closeMiniButton=document.createElement("img"),this.populateCloseMiniButton()),this.isExpandBanner===!0&&(this.closeButton=document.createElement("img"),this.expandWrapper=document.createElement("div"),this.eventOpen=this.clientBannerProperties.events[0])},attachElements:function(){this.wrapper.appendChild(this.collapseWrapper),this.useCookieHide()===!0&&this.wrapper.appendChild(this.closeMiniButton),this.isExpandBanner===!0&&(document.body.appendChild(this.expandWrapper),this.expandWrapper.appendChild(this.closeButton))},addContentEvent:function(){var t=this
this.addContentStyle(),this.collapseWrapper.addEventListener("click",function(){t.isExpandBanner===!1?(t.postEvent(t.eventClick),e.open(t.clientBannerProperties.banner.redirect_url,"_target")):(t.expanded=!0,t.postEvent(t.eventOpen),t.showHideBannerFullScreen(),t.populateCloseButton(),t.closeButtonClicked=!1)})},populateCollapseWrapper:function(){var e=document.createElement("img")
e.setAttribute("src",this.clientBannerProperties.banner.image_collapse),e.style.maxWidth=this.getWidthProperty(),e.style.display="block",e.style.height="auto",e.style.zIndex=99999999,this.collapseWrapper.appendChild(e)},getBannerFullScreen:function(){var t=this,n=document.createElement("img")
return n.setAttribute("id","bannerFullSizeId"),n.setAttribute("src",this.clientBannerProperties.banner.image_expand),n.style.width=this.width+"px",n.style.height=t.clientBannerProperties.banner.expand_size.height/t.clientBannerProperties.banner.expand_size.width*this.width+" px",n.style.marginTop=this.getBannerFullTopMargin()+"px",n.style.display="inline-block",n.addEventListener("click",function(){return e.open(t.clientBannerProperties.banner.redirect_url,"_target"),t.postEvent(t.eventClick),t.expanded=!1,t.showHideBannerFullScreen(),!1}),n.addEventListener("touchmove",function(e){e.preventDefault()}),n},showHideBannerFullScreen:function(){this.expanded?(this.expandWrapper.style.display="block",this.expandWrapper.style.zIndex=99999999):this.expandWrapper.style.display="none"},attachBannerToExpandWrapper:function(){return this.isDefined("bannerFullSizeId")?this.expandWrapper.appendChild(document.getElementById("bannerFullSizeId")):this.expandWrapper.appendChild(this.getBannerFullScreen())},getBannerMarginTop:function(){return(screen.height-this.clientBannerProperties.banner.expand_size.height)/2},getBannerFullTopMargin:function(){var e=(parseInt(screen.height)-parseInt(this.clientBannerProperties.banner.expand_size.height))/2
return e>0?e:0},postEvent:function(t){var n=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")
n.onreadystatechange=function(){},n.open("POST",this.eventUrl+this.uid,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("event="+t)},getCloseBtnRightPosition:function(){var e=(parseInt(screen.width)-parseInt(this.clientBannerProperties.banner.expand_size.width))/2
return e>0?e:0},addCloseButtonEvent:function(){var e=this
this.closeButton.addEventListener("click",function(){e.expanded=!1,e.showHideBannerFullScreen(),e.closeButtonClicked=!0})},populateCloseButton:function(){this.closeButton.setAttribute("src",this.clientBannerProperties.banner.image_close),this.closeButton.setAttribute("id","banner-close"),this.closeButton.style.position="absolute",this.closeButton.style.top="16px",this.closeButton.style.right="16px",this.closeButton.style.width="36px",this.closeButton.style.height="36px",this.addCloseButtonEvent()},populateCloseMiniButton:function(){this.closeMiniButton.setAttribute("src",this.clientBannerProperties.banner.image_close),this.closeMiniButton.style.position="absolute",this.closeMiniButton.style.top="16px",this.closeMiniButton.style.right="16px",this.closeMiniButton.style.width="36px",this.closeMiniButton.style.height="36px",this.addCloseMiniButtonEvent()},addCloseMiniButtonEvent:function(){var e=this
this.closeMiniButton.addEventListener("click",function(){e.wrapper.style.display="none",e.useCookieExpire()})},useCookieCustom:function(){return 1==this.clientBannerProperties.banner.cookie_custom_active&&(null===this.getCookie("eb_cc")&&(document.cookie="eb_cc="+(new Date).getTime()+";expires="+this.clientBannerProperties.expires,!0))},useCookieDetection:function(){return 1==this.clientBannerProperties.banner.cookie_client_active||1==this.clientBannerProperties.banner.cookie_custom_active},useCookieClient:function(){return 1==this.clientBannerProperties.banner.cookie_client_active&&null!=this.getCookie(this.clientBannerProperties.banner.cookie_client_name)},useCookieExpire:function(){if(null!=this.clientBannerProperties.banner.cookie_hide_expires){var e=new Date,t=this.clientBannerProperties.banner.cookie_hide_expires
return e.setTime(e.getTime()+60*t*1e3),document.cookie="eb_ch="+(new Date).getTime()+";expires="+e.toGMTString(),!0}return!1},useCookieHide:function(){return 1==this.clientBannerProperties.banner.cookie_hide_active},customCookie:function(e){return this.getCookie(e)},getCookie:function(e){return(e=(document.cookie+";").match(new RegExp(e+"=.*;")))&&e[0].split(/=|;/)[1]},isWrapperDefined:function(){return this.isBannerDataDefined("[data-banner]")},isBannerDataDefined:function(e){return null!=document.querySelector(e)&&void 0!==document.querySelector(e)},getBannerData:function(e){return this.wrapper.getAttribute("data-banner-"+e)},isExpandBanner:function(){return null==this.getBannerData("expand")||this.isBannerDataDefined("[data-banner-expand]")===!0&&1==this.getBannerData("expand")},isDesktop:function(){var e=parseInt(screen.width)
return e>parseInt(screen.height)&&e>800},isMobile:function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isDefined:function(e){var t=document.getElementById(e)
return void 0!==typeof t&&null!=t},getDomain:function(){var t=e.location.host
return t.substring(t.lastIndexOf(".",t.lastIndexOf(".")-1)+1)},getWidthProperty:function(){return this.computedWidth},populateExpandWrapper:function(){var e=this
e.expandWrapper.style.display="none",e.expandWrapper.style.minHeight="100%",e.expandWrapper.style.width=this.width+"px",e.expandWrapper.style.height=this.height+"px",e.expandWrapper.style.position="fixed",e.expandWrapper.style.top="0px",e.expandWrapper.style.left="0px",e.expandWrapper.style.whiteSpace="nowrap",e.expandWrapper.style.textAlign="center",e.expandWrapper.style.verticalAlign="middle",e.expandWrapper.style.background="#1A1A1A",e.expandWrapper.style.zIndex="99999999",e.expandWrapper.style.WebkitAnimation="fadeIn 0.7s ease",e.expandWrapper.style.MozAnimation="fadeIn 0.7s ease",e.expandWrapper.style.OAnimation="fadeIn 0.7s ease",e.expandWrapper.style.animation="fadeIn 0.7s ease",e.attachBannerToExpandWrapper()},createAnimationStyle:function(){var e=document.createElement("style")
e.appendChild(document.createTextNode("")),this.getVendorPrefix(),document.head.appendChild(e),e.sheet.insertRule(this.keyFramePrefix+" fadeIn { from {opacity:0; } to {opacity:1;}}",0)},getVendorPrefix:function(){for(var e=["Webkit","Moz","O","ms","Khtml"],t="",n=document.createElement("div"),i=0;i<e.length;i++)void 0!==n.style[e[i]+"AnimationName"]&&(t=e[i].toLowerCase())
return this.keyFramePrefix="@-"+t+"-keyframes "},addContentStyle:function(){return this.collapseWrapper.style.width=this.getWidthProperty()},getInstance:function(){}},new BannerExpand}(window)

